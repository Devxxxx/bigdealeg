(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9924],{7372:function(e,r,t){Promise.resolve().then(t.bind(t,821))},821:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return FormFieldsManagement}});var s=t(7437),a=t(2265),l=t(5243),d=t(1949),i=t(5925),n=t(3159);function FieldFormModal(e){let{isOpen:r,onClose:t,onSave:l,field:d,mode:i="create"}=e,o={field_name:"",field_label:"",field_type:"text",is_required:!1,field_span:"full",placeholder:"",help_text:"",options:"",min_value:"",max_value:""},[c,m]=(0,a.useState)(o),[x,u]=(0,a.useState)({});(0,a.useEffect)(()=>{"edit"===i&&d?m({...o,...d}):"create"===i&&m(o)},[d,i]);let h=(0,a.useCallback)(e=>{let{name:r,value:t,type:s,checked:a}=e.target;m(e=>({...e,[r]:"checkbox"===s?a:t})),x[r]&&u(e=>({...e,[r]:""}))},[x]),f=(0,a.useCallback)(()=>{let e={};if(c.field_name.trim()?/^[a-zA-Z0-9_]+$/.test(c.field_name)||(e.field_name="Field name can only contain letters, numbers, and underscores"):e.field_name="Field name is required",c.field_label.trim()||(e.field_label="Field label is required"),"select"!==c.field_type||c.options.trim()||(e.options="Options are required for dropdown fields"),"number"===c.field_type&&""!==c.min_value&&""!==c.max_value){let r=parseFloat(c.min_value),t=parseFloat(c.max_value);r>=t&&(e.min_value="Minimum value must be less than maximum value")}return u(e),0===Object.keys(e).length},[c]),p=(0,a.useCallback)(e=>{if(e.preventDefault(),f()){let e={...c};"number"!==e.field_type&&(delete e.min_value,delete e.max_value),"select"!==e.field_type&&delete e.options,"edit"===i&&(null==d?void 0:d.id)&&(e.id=d.id),l(e)}},[c,f,i,d,l]);return r?(0,s.jsx)("div",{className:"fixed inset-0 overflow-y-auto z-50",children:(0,s.jsxs)("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[(0,s.jsx)("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",onClick:t,children:(0,s.jsx)("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),(0,s.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"​"}),(0,s.jsxs)("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[(0,s.jsx)("div",{className:"bg-white dark:bg-gray-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:(0,s.jsxs)("div",{className:"sm:flex sm:items-start",children:[(0,s.jsx)("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-100 sm:mx-0 sm:h-10 sm:w-10",children:(0,s.jsx)(n.p4t,{className:"h-6 w-6 text-blue-600"})}),(0,s.jsxs)("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full",children:[(0,s.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900 dark:text-white",children:"create"===i?"Add New Field":"Edit Field"}),(0,s.jsx)("form",{onSubmit:p,className:"mt-4",children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"field_name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Field Name ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"text",id:"field_name",name:"field_name",value:c.field_name,onChange:h,disabled:"edit"===i,className:"mt-1 block w-full rounded-md ".concat("edit"===i?"bg-gray-100 dark:bg-gray-700":""," ").concat(x.field_name?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary focus:border-primary"," shadow-sm dark:border-gray-600 dark:text-white")}),x.field_name&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:x.field_name}),(0,s.jsx)("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Unique identifier (no spaces, only letters, numbers, and underscores)"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"field_label",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Field Label ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"text",id:"field_label",name:"field_label",value:c.field_label,onChange:h,className:"mt-1 block w-full rounded-md ".concat(x.field_label?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary focus:border-primary"," shadow-sm dark:border-gray-600 dark:text-white")}),x.field_label&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:x.field_label}),(0,s.jsx)("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Text displayed above the field"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"field_type",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Field Type ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("select",{id:"field_type",name:"field_type",value:c.field_type,onChange:h,className:"mt-1 block w-full rounded-md border-gray-300 focus:ring-primary focus:border-primary shadow-sm dark:border-gray-600 dark:bg-gray-700 dark:text-white",children:[(0,s.jsx)("option",{value:"text",children:"Text"}),(0,s.jsx)("option",{value:"number",children:"Number"}),(0,s.jsx)("option",{value:"select",children:"Dropdown"}),(0,s.jsx)("option",{value:"checkbox",children:"Checkbox"}),(0,s.jsx)("option",{value:"textarea",children:"Text Area"})]})]}),(0,s.jsxs)("div",{className:"flex items-start",children:[(0,s.jsx)("div",{className:"flex items-center h-5",children:(0,s.jsx)("input",{id:"is_required",name:"is_required",type:"checkbox",checked:c.is_required,onChange:h,className:"focus:ring-primary h-4 w-4 text-primary border-gray-300 rounded dark:border-gray-600 dark:bg-gray-700"})}),(0,s.jsxs)("div",{className:"ml-3 text-sm",children:[(0,s.jsx)("label",{htmlFor:"is_required",className:"font-medium text-gray-700 dark:text-gray-300",children:"Required Field"}),(0,s.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Users must fill out this field"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"field_span",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Field Width"}),(0,s.jsxs)("select",{id:"field_span",name:"field_span",value:c.field_span,onChange:h,className:"mt-1 block w-full rounded-md border-gray-300 focus:ring-primary focus:border-primary shadow-sm dark:border-gray-600 dark:bg-gray-700 dark:text-white",children:[(0,s.jsx)("option",{value:"full",children:"Full Width"}),(0,s.jsx)("option",{value:"half",children:"Half Width"}),(0,s.jsx)("option",{value:"third",children:"Third Width"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"placeholder",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Placeholder"}),(0,s.jsx)("input",{type:"text",id:"placeholder",name:"placeholder",value:c.placeholder,onChange:h,className:"mt-1 block w-full rounded-md border-gray-300 focus:ring-primary focus:border-primary shadow-sm dark:border-gray-600 dark:text-white"}),(0,s.jsx)("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Example text shown in the field"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"help_text",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Help Text"}),(0,s.jsx)("input",{type:"text",id:"help_text",name:"help_text",value:c.help_text,onChange:h,className:"mt-1 block w-full rounded-md border-gray-300 focus:ring-primary focus:border-primary shadow-sm dark:border-gray-600 dark:text-white"}),(0,s.jsx)("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Additional instructions shown below the field"})]}),"select"===c.field_type&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"options",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Options ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("textarea",{id:"options",name:"options",value:c.options,onChange:h,rows:3,className:"mt-1 block w-full rounded-md ".concat(x.options?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary focus:border-primary"," shadow-sm dark:border-gray-600 dark:text-white")}),x.options&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:x.options}),(0,s.jsx)("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:'Comma-separated list of options (e.g., "Option 1, Option 2, Option 3")'})]}),"number"===c.field_type&&(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"min_value",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Minimum Value"}),(0,s.jsx)("input",{type:"number",id:"min_value",name:"min_value",value:c.min_value,onChange:h,className:"mt-1 block w-full rounded-md ".concat(x.min_value?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary focus:border-primary"," shadow-sm dark:border-gray-600 dark:text-white")}),x.min_value&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:x.min_value})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"max_value",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Maximum Value"}),(0,s.jsx)("input",{type:"number",id:"max_value",name:"max_value",value:c.max_value,onChange:h,className:"mt-1 block w-full rounded-md border-gray-300 focus:ring-primary focus:border-primary shadow-sm dark:border-gray-600 dark:text-white"})]})]})]})})]})]})}),(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[(0,s.jsxs)("button",{type:"button",onClick:p,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary text-base font-medium text-white hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary sm:ml-3 sm:w-auto sm:text-sm",children:[(0,s.jsx)(n.TvB,{className:"mr-2 h-5 w-5"}),"create"===i?"Create Field":"Save Changes"]}),(0,s.jsxs)("button",{type:"button",onClick:t,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm dark:bg-gray-600 dark:text-white dark:border-gray-600 dark:hover:bg-gray-500",children:[(0,s.jsx)(n.aHS,{className:"mr-2 h-5 w-5"}),"Cancel"]})]})]})]})}):null}function Header(e){let{openCreateModal:r,fieldCount:t}=e;return(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between p-6",children:[(0,s.jsxs)("div",{className:"mb-4 md:mb-0",children:[(0,s.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[(0,s.jsx)("span",{className:"mr-2",children:"\uD83D\uDEE0️"})," Form Fields Management"]}),(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-600",children:"Customize the property request form fields for your users"})]}),(0,s.jsx)("div",{children:(0,s.jsxs)("button",{onClick:r,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",children:[(0,s.jsx)(n.wEH,{className:"mr-2 h-4 w-4"}),"Add Field"]})})]})})}function FieldsListHeader(e){let{fieldCount:r}=e;return(0,s.jsxs)("div",{className:"px-6 py-4 flex justify-between items-center bg-gray-50 rounded-t-lg",children:[(0,s.jsxs)("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:["Form Fields",(0,s.jsx)("span",{className:"ml-2 bg-gray-200 text-gray-700 text-xs font-medium px-2.5 py-0.5 rounded-full",children:r})]}),(0,s.jsxs)("div",{className:"flex items-center text-sm text-gray-500",children:[(0,s.jsx)(n.r_,{className:"mr-2 h-4 w-4"}),(0,s.jsx)("span",{children:"Ordered by position"})]})]})}function EmptyState(e){let{hasFilters:r,openCreateModal:t}=e;return(0,s.jsx)("div",{className:"flex flex-col items-center justify-center p-12 text-center",children:r?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"text-gray-400 text-4xl mb-4",children:"\uD83D\uDD0D"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No matching fields"}),(0,s.jsx)("p",{className:"text-gray-500 text-sm",children:"Try adjusting your search or filter"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"text-gray-400 text-4xl mb-4",children:"\uD83D\uDCCB"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No fields found"}),(0,s.jsx)("p",{className:"text-gray-500 text-sm mb-4",children:"Create your first form field to get started"}),(0,s.jsxs)("button",{onClick:t,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",children:[(0,s.jsx)(n.wEH,{className:"-ml-1 mr-2 h-4 w-4"}),"Add First Field"]})]})})}let getFieldTypeDetails=e=>{switch(e){case"text":return{icon:"T",color:"bg-blue-500",label:"Text"};case"number":return{icon:"#",color:"bg-green-500",label:"Number"};case"select":return{icon:"▼",color:"bg-purple-500",label:"Dropdown"};case"checkbox":return{icon:"☑",color:"bg-yellow-500",label:"Checkbox"};case"textarea":return{icon:"\xb6",color:"bg-indigo-500",label:"Text Area"};default:return{icon:"?",color:"bg-gray-500",label:e}}};function FieldCard(e){let{field:r,index:t,totalFields:a,onEdit:l,onDelete:d,onToggleRequired:i,onChangeOrder:o,onDuplicate:c}=e,m=getFieldTypeDetails(r.field_type),x=0===t,u=t===a-1;return(0,s.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4 shadow-sm transition-all hover:shadow-md relative group",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsxs)("div",{className:"flex items-start",children:[(0,s.jsx)("div",{className:"flex-shrink-0 w-10 h-10 ".concat(m.color," text-white flex items-center justify-center rounded-lg font-mono text-lg"),children:m.icon}),(0,s.jsxs)("div",{className:"ml-4",children:[(0,s.jsxs)("div",{className:"flex items-center flex-wrap gap-2",children:[(0,s.jsx)("h4",{className:"text-lg font-medium text-gray-900",children:r.field_label}),r.is_required&&(0,s.jsx)("span",{className:"bg-red-100 text-red-800 text-xs font-semibold px-2.5 py-0.5 rounded-full",children:"Required"}),(0,s.jsx)("span",{className:"text-gray-500 text-xs font-medium px-2.5 py-0.5 rounded-full border border-gray-300",children:"full"===r.field_span?"Full Width":"half"===r.field_span?"Half Width":"Third Width"})]}),(0,s.jsxs)("div",{className:"mt-1 text-sm text-gray-500 flex flex-wrap gap-2 items-center",children:[(0,s.jsx)("span",{className:"font-mono bg-gray-100 px-2 py-0.5 rounded",children:r.field_name}),(0,s.jsxs)("span",{className:"flex items-center",children:[(0,s.jsx)("span",{className:"inline-block w-2 h-2 rounded-full ".concat(m.color," mr-1")}),m.label]}),(0,s.jsxs)("span",{children:["Order: ",r.order]})]}),r.help_text&&(0,s.jsxs)("div",{className:"mt-2 text-xs text-gray-500 bg-gray-50 p-2 rounded",children:[(0,s.jsx)("span",{className:"font-medium",children:"Help text:"})," ",r.help_text]}),"select"===r.field_type&&r.options&&(0,s.jsxs)("div",{className:"mt-2 text-xs text-gray-500",children:[(0,s.jsx)("span",{className:"font-medium",children:"Options:"})," ",r.options]})]})]}),(0,s.jsxs)("div",{className:"hidden group-hover:flex items-start space-x-2",children:[(0,s.jsx)("button",{onClick:()=>i(r),className:"p-1 rounded-md hover:bg-gray-100",title:r.is_required?"Make Optional":"Make Required",children:r.is_required?(0,s.jsx)(n.NCu,{className:"h-5 w-5 text-green-600"}):(0,s.jsx)(n.uYB,{className:"h-5 w-5 text-gray-400"})}),(0,s.jsx)("button",{onClick:()=>o(r,"up"),className:"p-1 rounded-md hover:bg-gray-100",title:"Move Up",disabled:x,children:(0,s.jsx)(n.ZTc,{className:"h-5 w-5 ".concat(x?"text-gray-300":"text-gray-600 hover:text-gray-900")})}),(0,s.jsx)("button",{onClick:()=>o(r,"down"),className:"p-1 rounded-md hover:bg-gray-100",title:"Move Down",disabled:u,children:(0,s.jsx)(n.NWQ,{className:"h-5 w-5 ".concat(u?"text-gray-300":"text-gray-600 hover:text-gray-900")})}),(0,s.jsx)("button",{onClick:()=>c(r),className:"p-1 rounded-md hover:bg-gray-100 text-blue-600 hover:text-blue-800",title:"Duplicate Field",children:(0,s.jsx)(n.d_e,{className:"h-5 w-5"})}),(0,s.jsx)("button",{onClick:()=>l(r),className:"p-1 rounded-md hover:bg-gray-100 text-primary hover:text-primary/80",title:"Edit Field",children:(0,s.jsx)(n.fmQ,{className:"h-5 w-5"})}),(0,s.jsx)("button",{onClick:()=>d(r.id),className:"p-1 rounded-md hover:bg-gray-100 text-red-600 hover:text-red-800",title:"Delete Field",children:(0,s.jsx)(n.Xm5,{className:"h-5 w-5"})})]})]}),(0,s.jsx)("div",{className:"absolute top-1/2 left-0 transform -translate-y-1/2 -translate-x-2 w-4 h-8 flex items-center justify-center opacity-0 group-hover:opacity-50 cursor-move",children:(0,s.jsx)(n.U9V,{className:"h-4 w-4 text-gray-400"})})]})}function SearchAndFilter(e){let{searchTerm:r,setSearchTerm:t,filterType:a,setFilterType:l}=e;return(0,s.jsxs)("div",{className:"flex flex-col md:flex-row space-y-2 md:space-y-0 md:space-x-4",children:[(0,s.jsxs)("div",{className:"relative flex-grow",children:[(0,s.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,s.jsx)(n.U41,{className:"h-4 w-4 text-gray-400"})}),(0,s.jsx)("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-primary focus:border-primary sm:text-sm",placeholder:"Search fields...",value:r,onChange:e=>t(e.target.value)})]}),(0,s.jsxs)("div",{className:"relative w-full md:w-56",children:[(0,s.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,s.jsx)(n.ulB,{className:"h-4 w-4 text-gray-400"})}),(0,s.jsxs)("select",{className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white focus:outline-none focus:ring-primary focus:border-primary sm:text-sm",value:a,onChange:e=>l(e.target.value),children:[(0,s.jsx)("option",{value:"all",children:"All Field Types"}),(0,s.jsx)("option",{value:"text",children:"Text Fields"}),(0,s.jsx)("option",{value:"number",children:"Number Fields"}),(0,s.jsx)("option",{value:"select",children:"Dropdown Fields"}),(0,s.jsx)("option",{value:"checkbox",children:"Checkbox Fields"}),(0,s.jsx)("option",{value:"textarea",children:"Text Area Fields"})]})]})]})}function HelpPanel(){let[e,r]=(0,a.useState)(!1);return(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden mb-6",children:[(0,s.jsxs)("div",{className:"p-6 flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(n.DAO,{className:"h-5 w-5 text-blue-500 mr-3"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Need help with form fields?"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Learn about how to create and manage form fields effectively"})]})]}),(0,s.jsx)("button",{onClick:()=>r(!e),className:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",children:e?"Hide Help":"Show Help"})]}),e&&(0,s.jsxs)("div",{className:"bg-blue-50 p-6 animate-fadeIn border-t border-blue-100",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{className:"bg-white p-4 rounded shadow-sm",children:[(0,s.jsx)("h4",{className:"font-medium text-gray-800 mb-2",children:"Field Name"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Unique identifier for the field (no spaces, letters, numbers, and underscores only)."})]}),(0,s.jsxs)("div",{className:"bg-white p-4 rounded shadow-sm",children:[(0,s.jsx)("h4",{className:"font-medium text-gray-800 mb-2",children:"Field Label"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"The text that appears above the field on the form."})]}),(0,s.jsxs)("div",{className:"bg-white p-4 rounded shadow-sm",children:[(0,s.jsx)("h4",{className:"font-medium text-gray-800 mb-2",children:"Field Types"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Choose from text, number, dropdown, checkbox, or text area inputs."})]}),(0,s.jsxs)("div",{className:"bg-white p-4 rounded shadow-sm",children:[(0,s.jsx)("h4",{className:"font-medium text-gray-800 mb-2",children:"Field Order"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Arrange fields by using the up/down arrows to change display order."})]})]}),(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("h4",{className:"font-medium text-gray-800 mb-2",children:"Best Practices"}),(0,s.jsxs)("ul",{className:"list-disc pl-5 text-sm text-gray-600 space-y-1",children:[(0,s.jsx)("li",{children:"Keep field labels clear and concise"}),(0,s.jsx)("li",{children:"Group related fields together with similar order numbers"}),(0,s.jsx)("li",{children:"Use help text to clarify what information is needed"}),(0,s.jsx)("li",{children:"Only mark fields as required when the information is essential"}),(0,s.jsx)("li",{children:"For dropdown fields, list the most common options first"})]})]})]})]})}function StatusMessage(e){let{message:r,type:t}=e;return r?(0,s.jsx)("div",{className:"\n      bg-".concat("success"===t?"green":"red","-50 \n      border-l-4 \n      border-").concat("success"===t?"green":"red","-400 \n      p-4 \n      rounded-md \n      shadow-sm \n      animate-fadeIn\n      mb-4\n    "),children:(0,s.jsxs)("div",{className:"flex items-center",children:["success"===t?(0,s.jsx)(n.l_A,{className:"h-5 w-5 text-green-400 mr-3"}):(0,s.jsx)(n.aHS,{className:"h-5 w-5 text-red-400 mr-3"}),(0,s.jsx)("p",{className:"text-sm text-".concat("success"===t?"green":"red","-700"),children:r})]})}):null}function FormFieldsManagement(){let{session:e}=(0,l.a)(),[r,t]=(0,a.useState)([]),[n,o]=(0,a.useState)(!0),[c,m]=(0,a.useState)(!1),[x,u]=(0,a.useState)(null),[h,f]=(0,a.useState)("create"),[p,g]=(0,a.useState)(""),[y,b]=(0,a.useState)(""),[j,N]=(0,a.useState)(""),[v,w]=(0,a.useState)("all");(0,a.useEffect)(()=>{let fetchFields=async()=>{try{if(o(!0),!e||!e.access_token){console.error("No access token available");return}let r=await (0,d.s4)(e.access_token);t(r||[])}catch(e){console.error("Error fetching form fields:",e),g("Failed to load form fields"),i.toast.error("Failed to load form fields")}finally{o(!1)}};fetchFields()},[e]),(0,a.useEffect)(()=>{if(p){let e=setTimeout(()=>g(""),3e3);return()=>clearTimeout(e)}},[p]),(0,a.useEffect)(()=>{if(y){let e=setTimeout(()=>b(""),3e3);return()=>clearTimeout(e)}},[y]);let openCreateModal=()=>{u(null),f("create"),m(!0)},openEditModal=e=>{u(e),f("edit"),m(!0)},handleDuplicateField=async s=>{try{if(!e||!e.access_token){console.error("No access token available");return}let{id:a,created_at:l,updated_at:i,...n}=s,o=r.length>0?Math.max(...r.map(e=>e.order)):0,c={...n,field_name:"".concat(n.field_name,"_copy"),field_label:"".concat(n.field_label," (Copy)"),order:o+10},m=await (0,d.WP)(e.access_token,c);t([...r,m]),b("Field duplicated successfully")}catch(e){console.error("Error duplicating field:",e),g("Failed to duplicate field"),i.toast.error("Failed to duplicate field")}},handleSaveField=async s=>{try{if(!e||!e.access_token){console.error("No access token available");return}if("create"===h){let a=await (0,d.WP)(e.access_token,s);t([...r,a]),b("Field created successfully")}else{let a=await (0,d.kN)(e.access_token,null==x?void 0:x.id,s);t(r.map(e=>e.id===a.id?a:e)),b("Field updated successfully")}m(!1)}catch(e){console.error("Error saving field:",e),g("create"===h?"Failed to create field":"Failed to update field"),i.toast.error("create"===h?"Failed to create field":"Failed to update field")}},handleDeleteField=async s=>{if(confirm("Are you sure you want to delete this field? This action cannot be undone."))try{if(!e||!e.access_token){console.error("No access token available");return}await (0,d.HG)(e.access_token,s),t(r.filter(e=>e.id!==s)),b("Field deleted successfully")}catch(e){console.error("Error deleting field:",e),g("Failed to delete field"),i.toast.error("Failed to delete field")}},handleToggleRequired=async s=>{try{if(!e||!e.access_token){console.error("No access token available");return}let a=await (0,d.bs)(e.access_token,s.id,!s.is_required);t(r.map(e=>e.id===s.id?a:e)),b("Field ".concat(a.is_required?"marked as required":"marked as optional"))}catch(e){console.error("Error toggling required field:",e),g("Failed to update field"),i.toast.error("Failed to update field")}},handleChangeOrder=async(s,a)=>{let l=[...r].sort((e,r)=>e.order-r.order),n=l.findIndex(e=>e.id===s.id),o="up"===a?n-1:n+1;if(o<0||o>=l.length)return;let c=l[o],m=s.order,x=c.order;try{if(!e||!e.access_token){console.error("No access token available");return}console.log("Updating field order:",{fieldId:s.id,currentOrder:m,targetOrder:x,currentOrderType:typeof m,targetOrderType:typeof x}),await (0,d.ow)(e.access_token,s.id,m,x),t(r.map(e=>e.id===s.id?{...e,order:x}:e.id===c.id?{...e,order:m}:e)),b("Field order updated")}catch(e){console.error("Error updating field order:",e),g("Failed to update field order"),i.toast.error("Failed to update field order")}},k=r.filter(e=>{let r=""===j||e.field_label.toLowerCase().includes(j.toLowerCase())||e.field_name.toLowerCase().includes(j.toLowerCase()),t="all"===v||e.field_type===v;return r&&t}),_=[...k].sort((e,r)=>e.order-r.order);return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)(Header,{openCreateModal:openCreateModal,fieldCount:r.length}),y&&(0,s.jsx)(StatusMessage,{message:y,type:"success"}),p&&(0,s.jsx)(StatusMessage,{message:p,type:"error"}),(0,s.jsx)(HelpPanel,{}),(0,s.jsx)(SearchAndFilter,{searchTerm:j,setSearchTerm:N,filterType:v,setFilterType:w}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm divide-y divide-gray-200 min-h-[300px]",children:[(0,s.jsx)(FieldsListHeader,{fieldCount:_.length}),n?(0,s.jsxs)("div",{className:"flex justify-center items-center p-12",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"}),(0,s.jsx)("span",{className:"ml-3 text-sm text-gray-500",children:"Loading fields..."})]}):0===_.length?(0,s.jsx)(EmptyState,{hasFilters:""!==j||"all"!==v,openCreateModal:openCreateModal}):(0,s.jsx)("div",{className:"p-6 grid grid-cols-1 gap-4",children:_.map((e,r)=>(0,s.jsx)(FieldCard,{field:e,index:r,totalFields:_.length,onEdit:openEditModal,onDelete:handleDeleteField,onToggleRequired:handleToggleRequired,onChangeOrder:handleChangeOrder,onDuplicate:handleDuplicateField},e.id))})]}),c&&(0,s.jsx)(FieldFormModal,{isOpen:c,onClose:()=>m(!1),onSave:handleSaveField,field:x,mode:h})]})}}},function(e){e.O(0,[2420,2726,9480,2971,2472,1744],function(){return e(e.s=7372)}),_N_E=e.O()}]);