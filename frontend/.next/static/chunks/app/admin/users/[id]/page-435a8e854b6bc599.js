(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[214],{7635:function(e,s,t){Promise.resolve().then(t.bind(t,9223))},9223:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return UserDetail}});var r=t(7437),a=t(2265),i=t(5243),c=t(1949),n=t(5925),l=t(4033),d=t(3159);function UserHeader(e){let{user:s,formatDate:t,toggleUserActive:a,router:i}=e;return(0,r.jsxs)("div",{className:"p-6 sm:flex sm:items-center sm:justify-between",children:[(0,r.jsxs)("div",{className:"sm:flex sm:items-center",children:[(0,r.jsx)("div",{className:"mb-4 sm:mb-0 sm:mr-4 flex-shrink-0",children:s.profile_image?(0,r.jsx)("img",{className:"h-24 w-24 rounded-full object-cover",src:s.profile_image,alt:s.name}):(0,r.jsx)("div",{className:"h-24 w-24 rounded-full bg-primary/10 flex items-center justify-center",children:(0,r.jsx)(d.Xws,{className:"h-12 w-12 text-primary/30"})})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[s.name,(0,r.jsx)("span",{className:"ml-3",children:s.is_active?(0,r.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[(0,r.jsx)(d.l_A,{className:"mr-1 h-3 w-3"}),"Active"]}):(0,r.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[(0,r.jsx)(d.aHS,{className:"mr-1 h-3 w-3"}),"Inactive"]})})]}),(0,r.jsxs)("div",{className:"mt-1 text-sm text-gray-500 flex items-center",children:[(0,r.jsx)(d.SRX,{className:"mr-1 h-4 w-4"}),s.email]}),(0,r.jsxs)("div",{className:"mt-2 flex items-center",children:[(e=>{switch(e){case"admin":return(0,r.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:"Admin"});case"sales_ops":return(0,r.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Sales Operations"});case"customer":return(0,r.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Customer"});default:return(0,r.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:e})}})(s.role),(0,r.jsxs)("span",{className:"ml-2 text-sm text-gray-500",children:["Joined: ",t(s.created_at)]})]})]})]}),(0,r.jsxs)("div",{className:"mt-5 sm:mt-0 flex flex-col sm:flex-row gap-2",children:[(0,r.jsxs)("button",{onClick:()=>i.push("/admin/users/".concat(s.id,"/edit")),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",children:[(0,r.jsx)(d.fmQ,{className:"mr-2 h-4 w-4 text-gray-500"}),"Edit User"]}),(0,r.jsx)("button",{onClick:a,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white ".concat(s.is_active?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"," focus:outline-none focus:ring-2 focus:ring-offset-2 ").concat(s.is_active?"focus:ring-red-500":"focus:ring-green-500"),children:s.is_active?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.kUi,{className:"mr-2 h-4 w-4"}),"Deactivate"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.D5B,{className:"mr-2 h-4 w-4"}),"Activate"]})})]})]})}function TabBar(e){let{activeTab:s,setActiveTab:t}=e;return(0,r.jsx)("div",{className:"border-t border-gray-200",children:(0,r.jsxs)("nav",{className:"-mb-px flex","aria-label":"Tabs",children:[(0,r.jsx)("button",{className:"".concat("profile"===s?"border-primary text-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"," w-1/4 py-4 px-1 text-center border-b-2 font-medium text-sm"),onClick:()=>t("profile"),children:"Profile"}),(0,r.jsx)("button",{className:"".concat("activity"===s?"border-primary text-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"," w-1/4 py-4 px-1 text-center border-b-2 font-medium text-sm"),onClick:()=>t("activity"),children:"Activity"}),(0,r.jsx)("button",{className:"".concat("properties"===s?"border-primary text-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"," w-1/4 py-4 px-1 text-center border-b-2 font-medium text-sm"),onClick:()=>t("properties"),children:"Properties"}),(0,r.jsx)("button",{className:"".concat("requests"===s?"border-primary text-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"," w-1/4 py-4 px-1 text-center border-b-2 font-medium text-sm"),onClick:()=>t("requests"),children:"Requests"})]})})}function ProfileTab(e){let{user:s,formatDate:t,updateUserRole:a,deleteUser:i}=e;return(0,r.jsx)("div",{className:"p-6",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"bg-white shadow overflow-hidden rounded-lg",children:[(0,r.jsxs)("div",{className:"px-4 py-5 sm:px-6 bg-gray-50",children:[(0,r.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Basic Information"}),(0,r.jsx)("p",{className:"mt-1 max-w-2xl text-sm text-gray-500",children:"User details and information"})]}),(0,r.jsx)("div",{className:"border-t border-gray-200 px-4 py-5 sm:p-6",children:(0,r.jsxs)("dl",{className:"grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2",children:[(0,r.jsxs)("div",{className:"sm:col-span-1",children:[(0,r.jsxs)("dt",{className:"text-sm font-medium text-gray-500 flex items-center",children:[(0,r.jsx)(d.pPV,{className:"mr-1 h-4 w-4 text-gray-400"}),"Full Name"]}),(0,r.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:s.name})]}),(0,r.jsxs)("div",{className:"sm:col-span-1",children:[(0,r.jsxs)("dt",{className:"text-sm font-medium text-gray-500 flex items-center",children:[(0,r.jsx)(d.dfI,{className:"mr-1 h-4 w-4 text-gray-400"}),"Role"]}),(0,r.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:(0,r.jsxs)("select",{value:s.role,onChange:e=>a(e.target.value),className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary focus:border-primary sm:text-sm rounded-md",children:[(0,r.jsx)("option",{value:"customer",children:"Customer"}),(0,r.jsx)("option",{value:"sales_ops",children:"Sales Operations"}),(0,r.jsx)("option",{value:"admin",children:"Administrator"})]})})]}),(0,r.jsxs)("div",{className:"sm:col-span-1",children:[(0,r.jsxs)("dt",{className:"text-sm font-medium text-gray-500 flex items-center",children:[(0,r.jsx)(d.I7T,{className:"mr-1 h-4 w-4 text-gray-400"}),"Phone"]}),(0,r.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:s.phone||"Not provided"})]}),(0,r.jsxs)("div",{className:"sm:col-span-1",children:[(0,r.jsxs)("dt",{className:"text-sm font-medium text-gray-500 flex items-center",children:[(0,r.jsx)(d.Nh4,{className:"mr-1 h-4 w-4 text-gray-400"}),"Address"]}),(0,r.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:s.address||"Not provided"})]}),(0,r.jsxs)("div",{className:"sm:col-span-1",children:[(0,r.jsxs)("dt",{className:"text-sm font-medium text-gray-500 flex items-center",children:[(0,r.jsx)(d.IiJ,{className:"mr-1 h-4 w-4 text-gray-400"}),"Account Created"]}),(0,r.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:t(s.created_at)})]}),(0,r.jsxs)("div",{className:"sm:col-span-1",children:[(0,r.jsxs)("dt",{className:"text-sm font-medium text-gray-500 flex items-center",children:[(0,r.jsx)(d.IiJ,{className:"mr-1 h-4 w-4 text-gray-400"}),"Last Login"]}),(0,r.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:s.last_login?t(s.last_login):"Never"})]}),(0,r.jsxs)("div",{className:"sm:col-span-2",children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Bio"}),(0,r.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:s.bio||"No bio information provided."})]})]})})]}),(0,r.jsxs)("div",{className:"bg-white shadow overflow-hidden rounded-lg",children:[(0,r.jsxs)("div",{className:"px-4 py-5 sm:px-6 bg-gray-50",children:[(0,r.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Account Management"}),(0,r.jsx)("p",{className:"mt-1 max-w-2xl text-sm text-gray-500",children:"Manage user account and access"})]}),(0,r.jsx)("div",{className:"border-t border-gray-200 px-4 py-5 sm:p-6",children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"rounded-lg bg-white p-6 shadow-sm border border-gray-200",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Account Status"}),(0,r.jsx)("div",{className:"mt-4 space-y-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:["Account is ",s.is_active?"Active":"Inactive"]}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:s.is_active?"User can log in and access the platform.":"User cannot log in or access the platform."})]}),(0,r.jsx)("div",{children:(0,r.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat(s.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:s.is_active?"Active":"Inactive"})})]})})]}),(0,r.jsxs)("div",{className:"rounded-lg bg-red-50 p-6 shadow-sm border border-red-200",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-red-900",children:"Danger Zone"}),(0,r.jsx)("div",{className:"mt-4 space-y-4",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-red-700",children:"Permanently delete this user and all associated data. This action cannot be undone."}),(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsx)("button",{type:"button",onClick:i,className:"inline-flex items-center justify-center px-4 py-2 border border-transparent font-medium rounded-md text-red-700 bg-red-100 hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:text-sm",children:"Delete User Account"})})]})})]})]})})]})]})})}function ActivityTab(e){let{activity:s,formatDate:t,noDataMessage:a="This user has no recorded activity"}=e,getActivityIcon=e=>{switch(e){case"view":return(0,r.jsx)(d.dSq,{className:"h-5 w-5 text-blue-500"});case"save":return(0,r.jsx)(d.xng,{className:"h-5 w-5 text-green-500"});case"favorite":return(0,r.jsx)(d.$0H,{className:"h-5 w-5 text-red-500"});case"message":return(0,r.jsx)(d.diV,{className:"h-5 w-5 text-purple-500"});case"login":return(0,r.jsx)(d.kUi,{className:"h-5 w-5 text-green-500"});default:return(0,r.jsx)(d.ceS,{className:"h-5 w-5 text-gray-500"})}},getActivityDescription=e=>{switch(e.activity_type){case"view":return"Viewed a property";case"save":return"Saved a property";case"favorite":return"Favorited a property";case"message":return"Sent a message";case"login":return"Logged in";case"request":return"Submitted a property request";case"viewing":return"Scheduled a property viewing";default:return e.description||"Performed an action"}};return(0,r.jsxs)("div",{className:"bg-white p-6",children:[(0,r.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-6",children:"Recent Activity"}),0===s.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("div",{className:"text-gray-400 text-4xl mb-4",children:"\uD83D\uDCCA"}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No activity yet"}),(0,r.jsx)("p",{className:"text-gray-500 text-sm",children:a})]}):(0,r.jsx)("div",{className:"flow-root",children:(0,r.jsx)("ul",{className:"-mb-8",children:s.map((e,a)=>(0,r.jsx)("li",{children:(0,r.jsxs)("div",{className:"relative pb-8",children:[a!==s.length-1?(0,r.jsx)("span",{className:"absolute top-5 left-5 -ml-px h-full w-0.5 bg-gray-200","aria-hidden":"true"}):null,(0,r.jsxs)("div",{className:"relative flex items-start space-x-3",children:[(0,r.jsx)("div",{className:"relative",children:(0,r.jsx)("div",{className:"h-10 w-10 rounded-full bg-gray-100 flex items-center justify-center ring-8 ring-white",children:getActivityIcon(e.activity_type)})}),(0,r.jsx)("div",{className:"min-w-0 flex-1",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm",children:(0,r.jsx)("span",{className:"font-medium text-gray-900",children:getActivityDescription(e)})}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:e.details||(e.property_id?"Property ID: ".concat(e.property_id):"")}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:t(e.created_at)})]})})]})]})},e.id))})})]})}function PropertiesTab(e){let{properties:s,formatPrice:t,noDataMessage:a="This user hasn't saved any properties yet"}=e;return(0,r.jsxs)("div",{className:"bg-white p-6",children:[(0,r.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-6",children:"Saved Properties"}),0===s.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("div",{className:"text-gray-400 text-4xl mb-4",children:"\uD83C\uDFE0"}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No saved properties"}),(0,r.jsx)("p",{className:"text-gray-500 text-sm",children:a})]}):(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:s.map(e=>{let s=e.properties;return(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-all",children:[(0,r.jsxs)("div",{className:"aspect-w-16 aspect-h-9 bg-gray-200 relative",children:[(0,r.jsx)("img",{src:s.featured_image||"https://via.placeholder.com/800x450?text=No+Image",alt:s.title,className:"w-full h-44 object-cover"}),e.is_favorite&&(0,r.jsx)("div",{className:"absolute top-2 right-2",children:(0,r.jsx)("div",{className:"p-1 bg-white rounded-full shadow-sm",children:(0,r.jsx)(d.$0H,{className:"h-4 w-4 text-red-500"})})}),(0,r.jsx)("div",{className:"absolute bottom-2 left-2",children:(0,r.jsx)("span",{className:"inline-block bg-gray-800 bg-opacity-75 text-white px-2 py-1 text-xs rounded-md",children:s.property_type})})]}),(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 line-clamp-1",children:s.title}),(0,r.jsx)("p",{className:"text-lg font-bold text-primary",children:t(s.price)})]}),(0,r.jsxs)("p",{className:"mt-1 text-sm text-gray-500 flex items-center",children:[(0,r.jsx)(d.Nh4,{className:"mr-1 text-gray-400"}),s.location]}),(0,r.jsxs)("div",{className:"mt-4 flex items-center justify-between text-sm text-gray-500",children:[s.bedrooms&&(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(d.f0S,{className:"mr-1"}),(0,r.jsxs)("span",{children:[s.bedrooms," beds"]})]}),s.bathrooms&&(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(d.MvV,{className:"mr-1"}),(0,r.jsxs)("span",{children:[s.bathrooms," baths"]})]}),s.area_size&&(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(d.BxQ,{className:"mr-1"}),(0,r.jsxs)("span",{children:[s.area_size," m\xb2"]})]})]})]}),(0,r.jsx)("div",{className:"border-t border-gray-200 bg-gray-50 px-4 py-3 sm:px-6",children:(0,r.jsxs)("a",{href:"/properties/".concat(s.id),className:"inline-flex items-center px-3 py-1 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",children:[(0,r.jsx)(d.dSq,{className:"mr-2 h-4 w-4"}),"View Property"]})})]},e.id)})})]})}function RequestsTab(e){let{requests:s,formatPrice:t,formatDate:a,noDataMessage:i="This user hasn't submitted any property requests yet"}=e,getStatusBadge=e=>{switch(e){case"pending":return(0,r.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[(0,r.jsx)(d.DdE,{className:"mr-1 h-3 w-3"}),"Pending"]});case"active":return(0,r.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[(0,r.jsx)(d.FJM,{className:"mr-1 h-3 w-3"}),"Active"]});case"completed":return(0,r.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[(0,r.jsx)(d.FJM,{className:"mr-1 h-3 w-3"}),"Completed"]});case"cancelled":return(0,r.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[(0,r.jsx)(d.G5m,{className:"mr-1 h-3 w-3"}),"Cancelled"]});default:return(0,r.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:e})}};return(0,r.jsxs)("div",{className:"bg-white p-6",children:[(0,r.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-6",children:"Property Requests"}),0===s.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("div",{className:"text-gray-400 text-4xl mb-4",children:"\uD83D\uDCCB"}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No property requests"}),(0,r.jsx)("p",{className:"text-gray-500 text-sm",children:i})]}):(0,r.jsx)("div",{className:"space-y-6",children:s.map(e=>(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden shadow-sm p-6",children:[(0,r.jsxs)("div",{className:"sm:flex sm:items-center sm:justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:e.title||"Property Request #".concat(e.id.slice(0,8))}),(0,r.jsxs)("div",{className:"mt-1 flex items-center text-sm text-gray-500",children:[(0,r.jsx)(d.Nh4,{className:"mr-1 h-4 w-4 text-gray-400"}),e.location]})]}),(0,r.jsx)("div",{className:"mt-4 sm:mt-0",children:getStatusBadge(e.status)})]}),(0,r.jsx)("div",{className:"mt-6 border-t border-gray-200 pt-4",children:(0,r.jsxs)("dl",{className:"grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-3",children:[(0,r.jsxs)("div",{className:"sm:col-span-1",children:[(0,r.jsxs)("dt",{className:"text-sm font-medium text-gray-500 flex items-center",children:[(0,r.jsx)(d.l80,{className:"mr-1 h-4 w-4 text-gray-400"}),"Price Range"]}),(0,r.jsxs)("dd",{className:"mt-1 text-sm text-gray-900",children:[t(e.min_price)," - ",t(e.max_price)]})]}),(0,r.jsxs)("div",{className:"sm:col-span-1",children:[(0,r.jsxs)("dt",{className:"text-sm font-medium text-gray-500 flex items-center",children:[(0,r.jsx)(d.f0S,{className:"mr-1 h-4 w-4 text-gray-400"}),"Bedrooms"]}),(0,r.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:e.bedrooms})]}),(0,r.jsxs)("div",{className:"sm:col-span-1",children:[(0,r.jsxs)("dt",{className:"text-sm font-medium text-gray-500 flex items-center",children:[(0,r.jsx)(d.MvV,{className:"mr-1 h-4 w-4 text-gray-400"}),"Bathrooms"]}),(0,r.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:e.bathrooms})]}),(0,r.jsxs)("div",{className:"sm:col-span-1",children:[(0,r.jsxs)("dt",{className:"text-sm font-medium text-gray-500 flex items-center",children:[(0,r.jsx)(d.BxQ,{className:"mr-1 h-4 w-4 text-gray-400"}),"Area Size"]}),(0,r.jsxs)("dd",{className:"mt-1 text-sm text-gray-900",children:[e.area_size," m\xb2"]})]}),(0,r.jsxs)("div",{className:"sm:col-span-1",children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Property Type"}),(0,r.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:e.property_type})]}),(0,r.jsxs)("div",{className:"sm:col-span-1",children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Submitted On"}),(0,r.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:a(e.created_at)})]})]})}),(0,r.jsx)("div",{className:"mt-6 flex justify-end",children:(0,r.jsx)("a",{href:"/sales-ops/requests/".concat(e.id),className:"inline-flex items-center px-3 py-1 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",children:"View Details"})})]},e.id))})]})}function UserDetail(e){let{params:s}=e,{id:t}=s,{session:m}=(0,i.a)(),o=(0,l.useRouter)(),[x,u]=(0,a.useState)(null),[h,g]=(0,a.useState)(!0),[p,f]=(0,a.useState)([]),[y,j]=(0,a.useState)([]),[N,v]=(0,a.useState)([]),[b,w]=(0,a.useState)("profile");(0,a.useEffect)(()=>{let fetchUserData=async()=>{try{if(g(!0),!m||!m.access_token){console.error("No access token available");return}let e=await (0,c.GA)(m.access_token,t);u(e.user),f(e.activity||[]),j(e.properties||[]),v(e.requests||[]),g(!1)}catch(e){console.error("Error fetching user data:",e),n.toast.error("Failed to load user data"),g(!1),o.push("/admin/users")}};fetchUserData()},[t,o,m]);let formatDate=e=>e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",formatPrice=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"EGP",maximumFractionDigits:0}).format(e),toggleUserActive=async()=>{if(x&&window.confirm("Are you sure you want to ".concat(x.is_active?"deactivate":"activate"," this user?")))try{if(!m||!m.access_token){console.error("No access token available");return}let e=await (0,c.VC)(m.access_token,x.id,!x.is_active);u(e.user),n.toast.success("User ".concat(x.is_active?"deactivated":"activated"," successfully"))}catch(e){console.error("Error updating user status:",e),n.toast.error("Failed to update user status")}},updateUserRoleHandler=async e=>{if(x&&window.confirm("Are you sure you want to change this user's role to ".concat(e,"?")))try{if(!m||!m.access_token){console.error("No access token available");return}let s=await (0,c.c7)(m.access_token,x.id,e);u(s.user),n.toast.success("User role updated to ".concat(e))}catch(e){console.error("Error updating user role:",e),n.toast.error("Failed to update user role")}},deleteUserHandler=async()=>{if(x&&window.confirm("Are you sure you want to delete this user? This action cannot be undone."))try{if(!m||!m.access_token){console.error("No access token available");return}await (0,c.h8)(m.access_token,x.id),n.toast.success("User deleted successfully"),o.push("/admin/users")}catch(e){console.error("Error deleting user:",e),n.toast.error("Failed to delete user")}};return h?(0,r.jsx)("div",{className:"flex justify-center items-center min-h-screen bg-gray-50",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):x?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:[(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsxs)("button",{onClick:()=>o.push("/admin/users"),className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700",children:[(0,r.jsx)(d.x_l,{className:"mr-2 h-4 w-4"}),"Back to Users"]})}),(0,r.jsxs)("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg mb-6",children:[(0,r.jsx)(UserHeader,{user:x,formatDate:formatDate,toggleUserActive:toggleUserActive,router:o}),(0,r.jsx)(TabBar,{activeTab:b,setActiveTab:w})]}),(0,r.jsx)("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:(()=>{switch(b){case"profile":default:return(0,r.jsx)(ProfileTab,{user:x,formatDate:formatDate,updateUserRole:updateUserRoleHandler,deleteUser:deleteUserHandler});case"activity":return(0,r.jsx)(ActivityTab,{activity:p.length>0?p:[{id:"no-data",type:"info",title:"No activity data available",description:"User has no recorded activity or the activity tracking system is not configured.",timestamp:formatDate(new Date().toISOString())}],formatDate:formatDate});case"properties":return(0,r.jsx)(PropertiesTab,{properties:y.length>0?y:[],formatPrice:formatPrice,noDataMessage:"No saved properties found."});case"requests":return(0,r.jsx)(RequestsTab,{requests:N.length>0?N:[],formatPrice:formatPrice,formatDate:formatDate,noDataMessage:"No property requests found."})}})()})]})}):(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-50",children:[(0,r.jsx)("div",{className:"text-gray-400 text-4xl mb-4",children:"\uD83D\uDC64"}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"User not found"}),(0,r.jsx)("p",{className:"text-gray-500 text-sm mb-4",children:"The user you're looking for doesn't exist or has been deleted"}),(0,r.jsxs)("button",{onClick:()=>o.push("/admin/users"),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",children:[(0,r.jsx)(d.x_l,{className:"mr-2 h-4 w-4"}),"Back to Users"]})]})}}},function(e){e.O(0,[2420,7339,9480,2971,2472,1744],function(){return e(e.s=7635)}),_N_E=e.O()}]);