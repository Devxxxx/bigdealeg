(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3455],{7422:function(e,t,s){Promise.resolve().then(s.bind(s,9982))},9982:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return Settings}});var r=s(7437),a=s(2265),n=s(8611),i=s(1393),o=s(8920),l=s(2595),c=s(4734),d=s(654),m=s(6814),x=s(2695);function ProfileTab(e){var t,s;let{profile:i,setProfile:h,setSuccessMessage:u,setErrorMessage:g}=e,[p,f]=(0,a.useState)(!1),{updateProfile:y}=(0,x.r)(),handleProfileUpdate=async e=>{e.preventDefault(),f(!0),u(""),g("");try{await y(),u("Profile updated successfully")}catch(e){console.error("Error updating profile:",e),g("Failed to update profile: "+(e.message||"Unknown error"))}finally{f(!1)}};return(0,r.jsx)(n.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:(0,r.jsxs)(l.Z,{className:"overflow-hidden",children:[(0,r.jsxs)("div",{className:"px-6 py-5 border-b border-gray-100 flex items-center",children:[(0,r.jsx)(o.fzv,{className:"h-5 w-5 text-primary-500 mr-2"}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Profile Information"})]}),(0,r.jsx)("div",{className:"p-6",children:(0,r.jsxs)("form",{onSubmit:handleProfileUpdate,children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6",children:[(0,r.jsx)(m.Z,{label:"Profile Photo",helpText:"Update your profile picture",span:"full",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"w-20 h-20 bg-gradient-to-br from-primary-400 to-primary-600 rounded-full flex items-center justify-center text-white text-2xl font-semibold",children:(null===(t=i.name)||void 0===t?void 0:t.charAt(0))||(null===(s=i.email)||void 0===s?void 0:s.charAt(0))||"U"}),(0,r.jsx)("div",{className:"absolute -bottom-1 -right-1",children:(0,r.jsx)("button",{type:"button",className:"bg-white rounded-full p-1.5 shadow-md border border-gray-200 text-primary-500 hover:text-primary-600",children:(0,r.jsx)(o.tBf,{className:"h-4 w-4"})})})]}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"JPG, PNG or GIF images up to 2MB"}),(0,r.jsx)(c.Z,{variant:"light",size:"sm",className:"mt-2",children:"Upload Photo"})]})]})}),(0,r.jsx)(m.Z,{label:"Full Name",htmlFor:"name",span:"full",required:!0,children:(0,r.jsx)(d.Z,{id:"name",type:"text",placeholder:"Your full name",value:i.name,onChange:e=>h({...i,name:e.target.value}),required:!0})}),(0,r.jsx)(m.Z,{label:"Email Address",htmlFor:"email",span:"full",helpText:"Email address cannot be changed",children:(0,r.jsx)(d.Z,{id:"email",type:"email",value:i.email,disabled:!0,className:"bg-gray-50"})}),(0,r.jsx)(m.Z,{label:"Phone Number",htmlFor:"phone",span:"full",helpText:"We'll use this number for viewing appointments and notifications",children:(0,r.jsx)(d.Z,{id:"phone",type:"tel",placeholder:"Enter your phone number",value:i.phone,onChange:e=>h({...i,phone:e.target.value})})})]}),(0,r.jsx)("div",{className:"mt-8 flex justify-end",children:(0,r.jsx)(c.Z,{type:"submit",variant:"gradient",leftIcon:(0,r.jsx)(o.mW3,{}),loading:p,children:p?"Saving...":"Save Changes"})})]})})]})},"profile")}function SecurityTab(e){let{setSuccessMessage:t,setErrorMessage:s,sessionData:i}=e,[h,u]=(0,a.useState)(!1),{updatePassword:g,terminateSession:p,terminateAllSessions:f}=(0,x.r)(),[y,b]=(0,a.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),[j,v]=(0,a.useState)(0),[w,N]=(0,a.useState)(!1),[P,S]=(0,a.useState)(!1),[k,_]=(0,a.useState)(!1),C=i||{currentSession:{device:"Current Browser",location:"Cairo, Egypt",lastActive:"Now",ip:"192.168.1.1"},otherSessions:[]};(0,a.useEffect)(()=>{if(!y.newPassword){v(0);return}let e=0;y.newPassword.length>=8&&(e+=1),/[A-Z]/.test(y.newPassword)&&(e+=1),/[a-z]/.test(y.newPassword)&&(e+=1),/[0-9]/.test(y.newPassword)&&(e+=1),/[^A-Za-z0-9]/.test(y.newPassword)&&(e+=1),v(e)},[y.newPassword]);let handlePasswordChange=async e=>{if(e.preventDefault(),u(!0),t(""),s(""),y.newPassword!==y.confirmPassword){s("New passwords do not match"),u(!1);return}if(j<3){s("Password is too weak. Please use a stronger password."),u(!1);return}try{await g(y),b({currentPassword:"",newPassword:"",confirmPassword:""}),t("Password updated successfully")}catch(e){console.error("Error updating password:",e),s("Failed to update password: "+(e.message||"Unknown error"))}finally{u(!1)}},handleTerminateSession=async e=>{try{await p(e),t("Session terminated successfully")}catch(e){console.error("Error terminating session:",e),s("Failed to terminate session: "+(e.message||"Unknown error"))}};return(0,r.jsxs)(n.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"space-y-6",children:[(0,r.jsxs)(l.Z,{className:"overflow-hidden",children:[(0,r.jsxs)("div",{className:"px-6 py-5 border-b border-gray-100 flex items-center",children:[(0,r.jsx)(o.o1l,{className:"h-5 w-5 text-primary-500 mr-2"}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Change Password"})]}),(0,r.jsx)("div",{className:"p-6",children:(0,r.jsx)("form",{onSubmit:handlePasswordChange,children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)(m.Z,{label:"Current Password",htmlFor:"currentPassword",required:!0,children:(0,r.jsx)(d.Z,{id:"currentPassword",type:w?"text":"password",placeholder:"Enter your current password",value:y.currentPassword,onChange:e=>b({...y,currentPassword:e.target.value}),required:!0,rightIcon:w?(0,r.jsx)(o.q5L,{}):(0,r.jsx)(o.o1l,{}),clickableRightIcon:!0,onRightIconClick:()=>N(!w)})}),(0,r.jsxs)(m.Z,{label:"New Password",htmlFor:"newPassword",required:!0,children:[(0,r.jsx)(d.Z,{id:"newPassword",type:P?"text":"password",placeholder:"Enter your new password",value:y.newPassword,onChange:e=>b({...y,newPassword:e.target.value}),rightIcon:P?(0,r.jsx)(o.q5L,{}):(0,r.jsx)(o.o1l,{}),clickableRightIcon:!0,onRightIconClick:()=>S(!P),required:!0}),y.newPassword&&(0,r.jsxs)("div",{className:"mt-2",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden",children:(0,r.jsx)("div",{className:"h-full rounded-full ".concat(0===j?"bg-gray-300":j<=2?"bg-red-500":j<=3?"bg-amber-500":"bg-green-500"),style:{width:"".concat(20*j,"%")}})}),(0,r.jsx)("span",{className:"ml-2 text-xs font-medium text-gray-500",children:0===j?"Very Weak":j<=2?"Weak":j<=3?"Medium":j<=4?"Strong":"Very Strong"})]}),(0,r.jsxs)("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-2 gap-1",children:[(0,r.jsxs)("div",{className:"flex items-center text-xs",children:[(0,r.jsx)("span",{className:"inline-block w-4 h-4 rounded-full mr-1 flex items-center justify-center ".concat(y.newPassword.length>=8?"bg-green-100 text-green-700":"bg-gray-100 text-gray-400"),children:y.newPassword.length>=8?(0,r.jsx)(o._rq,{className:"h-3 w-3"}):""}),(0,r.jsx)("span",{children:"At least 8 characters"})]}),(0,r.jsxs)("div",{className:"flex items-center text-xs",children:[(0,r.jsx)("span",{className:"inline-block w-4 h-4 rounded-full mr-1 flex items-center justify-center ".concat(/[A-Z]/.test(y.newPassword)?"bg-green-100 text-green-700":"bg-gray-100 text-gray-400"),children:/[A-Z]/.test(y.newPassword)?(0,r.jsx)(o._rq,{className:"h-3 w-3"}):""}),(0,r.jsx)("span",{children:"Uppercase letter"})]}),(0,r.jsxs)("div",{className:"flex items-center text-xs",children:[(0,r.jsx)("span",{className:"inline-block w-4 h-4 rounded-full mr-1 flex items-center justify-center ".concat(/[a-z]/.test(y.newPassword)?"bg-green-100 text-green-700":"bg-gray-100 text-gray-400"),children:/[a-z]/.test(y.newPassword)?(0,r.jsx)(o._rq,{className:"h-3 w-3"}):""}),(0,r.jsx)("span",{children:"Lowercase letter"})]}),(0,r.jsxs)("div",{className:"flex items-center text-xs",children:[(0,r.jsx)("span",{className:"inline-block w-4 h-4 rounded-full mr-1 flex items-center justify-center ".concat(/[0-9]/.test(y.newPassword)?"bg-green-100 text-green-700":"bg-gray-100 text-gray-400"),children:/[0-9]/.test(y.newPassword)?(0,r.jsx)(o._rq,{className:"h-3 w-3"}):""}),(0,r.jsx)("span",{children:"Number"})]}),(0,r.jsxs)("div",{className:"flex items-center text-xs",children:[(0,r.jsx)("span",{className:"inline-block w-4 h-4 rounded-full mr-1 flex items-center justify-center ".concat(/[^A-Za-z0-9]/.test(y.newPassword)?"bg-green-100 text-green-700":"bg-gray-100 text-gray-400"),children:/[^A-Za-z0-9]/.test(y.newPassword)?(0,r.jsx)(o._rq,{className:"h-3 w-3"}):""}),(0,r.jsx)("span",{children:"Special character"})]})]})]})]}),(0,r.jsx)(m.Z,{label:"Confirm New Password",htmlFor:"confirmPassword",error:y.confirmPassword&&y.newPassword!==y.confirmPassword?"Passwords do not match":"",required:!0,children:(0,r.jsx)(d.Z,{id:"confirmPassword",type:k?"text":"password",placeholder:"Confirm your new password",value:y.confirmPassword,onChange:e=>b({...y,confirmPassword:e.target.value}),rightIcon:k?(0,r.jsx)(o.q5L,{}):(0,r.jsx)(o.o1l,{}),clickableRightIcon:!0,onRightIconClick:()=>_(!k),required:!0,error:y.confirmPassword&&y.newPassword!==y.confirmPassword})}),(0,r.jsx)("div",{className:"flex justify-end mt-6",children:(0,r.jsx)(c.Z,{type:"submit",variant:"primary",leftIcon:(0,r.jsx)(o.bfl,{}),loading:h,disabled:!y.currentPassword||!y.newPassword||!y.confirmPassword||y.newPassword!==y.confirmPassword||j<3,children:h?"Updating...":"Update Password"})})]})})})]}),(0,r.jsxs)(l.Z,{className:"overflow-hidden",children:[(0,r.jsxs)("div",{className:"px-6 py-5 border-b border-gray-100 flex items-center",children:[(0,r.jsx)(o.UIZ,{className:"h-5 w-5 text-primary-500 mr-2"}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Active Sessions"})]}),(0,r.jsx)("div",{className:"p-6",children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"border border-green-100 rounded-lg p-4 bg-green-50",children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center",children:[(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("span",{className:"inline-flex items-center justify-center h-8 w-8 rounded-full bg-green-100 text-green-500 mr-3",children:(0,r.jsx)(o._rq,{className:"h-5 w-5"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:C.currentSession.device}),(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:[C.currentSession.location," • ",C.currentSession.ip]})]})]})}),(0,r.jsx)("div",{className:"mt-2 md:mt-0 flex items-center",children:(0,r.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Current Session"})})]})}),C.otherSessions.length>0?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Other Sessions"}),C.otherSessions.map(e=>(0,r.jsx)("div",{className:"border border-gray-200 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center",children:[(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("span",{className:"inline-flex items-center justify-center h-8 w-8 rounded-full bg-gray-100 text-gray-500 mr-3",children:(0,r.jsx)(o.UIZ,{className:"h-5 w-5"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:e.device}),(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:[e.location," • Last active ",e.lastActive," • ",e.ip]})]})]})}),(0,r.jsx)("div",{className:"mt-2 md:mt-0",children:(0,r.jsx)(c.Z,{variant:"light",size:"xs",onClick:()=>handleTerminateSession(e.id),className:"text-red-600 hover:text-red-800 hover:bg-red-50",children:"Terminate"})})]})},e.id))]}):(0,r.jsx)("div",{className:"text-center py-4",children:(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"No other active sessions"})}),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)(c.Z,{variant:"outline",size:"sm",onClick:async()=>{try{await f(),t("All other sessions terminated successfully")}catch(e){console.error("Error terminating all sessions:",e),s("Failed to terminate all sessions: "+(e.message||"Unknown error"))}},disabled:0===C.otherSessions.length,children:"Sign Out From All Other Devices"})})]})})]})]},"security")}function NotificationsTab(e){let{notifications:t,setNotifications:s,setSuccessMessage:i,setErrorMessage:d}=e,[m,h]=(0,a.useState)(!1),{updateNotifications:u}=(0,x.r)(),handleNotificationUpdate=async e=>{e.preventDefault(),h(!0),i(""),d("");try{await u(),i("Notification settings updated successfully")}catch(e){console.error("Error updating notification settings:",e),d("Failed to update notification settings: "+(e.message||"Unknown error"))}finally{h(!1)}},toggleSetting=e=>{s(t=>({...t,[e]:!t[e]}))};return(0,r.jsx)(n.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:(0,r.jsxs)(l.Z,{className:"overflow-hidden",children:[(0,r.jsxs)("div",{className:"px-6 py-5 border-b border-gray-100 flex items-center",children:[(0,r.jsx)(o.vWP,{className:"h-5 w-5 text-primary-500 mr-2"}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Notification Settings"})]}),(0,r.jsx)("div",{className:"p-6",children:(0,r.jsx)("form",{onSubmit:handleNotificationUpdate,children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"border-b border-gray-200 pb-5",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-4",children:"Notification Channels"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("div",{className:"flex items-center h-5",children:(0,r.jsx)("input",{id:"email_notifications",type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500",checked:t.email_notifications,onChange:()=>toggleSetting("email_notifications")})}),(0,r.jsxs)("div",{className:"ml-3",children:[(0,r.jsxs)("label",{htmlFor:"email_notifications",className:"text-sm font-medium text-gray-700 flex items-center",children:[(0,r.jsx)(o.Imn,{className:"mr-2 text-gray-400"}),"Email Notifications"]}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Receive notifications and updates via email"})]})]}),(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("div",{className:"flex items-center h-5",children:(0,r.jsx)("input",{id:"sms_notifications",type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500",checked:t.sms_notifications,onChange:()=>toggleSetting("sms_notifications")})}),(0,r.jsxs)("div",{className:"ml-3",children:[(0,r.jsxs)("label",{htmlFor:"sms_notifications",className:"text-sm font-medium text-gray-700 flex items-center",children:[(0,r.jsx)(o.IC0,{className:"mr-2 text-gray-400"}),"SMS Notifications"]}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Receive important notifications via SMS"})]})]}),(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("div",{className:"flex items-center h-5",children:(0,r.jsx)("input",{id:"push_notifications",type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500",checked:t.push_notifications,onChange:()=>toggleSetting("push_notifications")})}),(0,r.jsxs)("div",{className:"ml-3",children:[(0,r.jsxs)("label",{htmlFor:"push_notifications",className:"text-sm font-medium text-gray-700 flex items-center",children:[(0,r.jsx)(o.vWP,{className:"mr-2 text-gray-400"}),"Push Notifications"]}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Receive notifications in your browser even when you're not on our site"})]})]})]})]}),(0,r.jsxs)("div",{className:"border-b border-gray-200 pb-5",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-4",children:"Notification Types"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("div",{className:"flex items-center h-5",children:(0,r.jsx)("input",{id:"request_updates",type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500",checked:t.request_updates,onChange:()=>toggleSetting("request_updates")})}),(0,r.jsxs)("div",{className:"ml-3",children:[(0,r.jsx)("label",{htmlFor:"request_updates",className:"text-sm font-medium text-gray-700",children:"Property Request Updates"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Receive updates when your property requests status changes or when matching properties are found"})]})]}),(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("div",{className:"flex items-center h-5",children:(0,r.jsx)("input",{id:"viewing_reminders",type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500",checked:t.viewing_reminders,onChange:()=>toggleSetting("viewing_reminders")})}),(0,r.jsxs)("div",{className:"ml-3",children:[(0,r.jsx)("label",{htmlFor:"viewing_reminders",className:"text-sm font-medium text-gray-700",children:"Viewing Reminders"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Receive reminders about upcoming property viewings"})]})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-4",children:"Marketing Communications"}),(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("div",{className:"flex items-center h-5",children:(0,r.jsx)("input",{id:"marketing_emails",type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500",checked:t.marketing_emails,onChange:()=>toggleSetting("marketing_emails")})}),(0,r.jsxs)("div",{className:"ml-3",children:[(0,r.jsx)("label",{htmlFor:"marketing_emails",className:"text-sm font-medium text-gray-700",children:"Marketing Emails"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Receive promotional emails, special offers, and market updates"})]})]})]}),(0,r.jsx)("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 rounded-md",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)(o.H33,{className:"h-5 w-5 text-blue-400"})}),(0,r.jsxs)("div",{className:"ml-3",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-blue-800",children:"Important Information"}),(0,r.jsx)("div",{className:"mt-2 text-sm text-blue-700",children:(0,r.jsx)("p",{children:"We may still send you important notifications about your account and transactions, even if you've disabled certain notification preferences."})})]})]})}),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)(c.Z,{type:"submit",variant:"primary",leftIcon:(0,r.jsx)(o.mW3,{}),loading:m,children:m?"Saving...":"Save Preferences"})})]})})})]})},"notifications")}function AccountTab(e){let{user:t,supabase:s,setSuccessMessage:i,setErrorMessage:d}=e,[m,x]=(0,a.useState)(!1),[h,u]=(0,a.useState)(""),[g,p]=(0,a.useState)(!1),[f,y]=(0,a.useState)(!1),handleExportData=async()=>{try{p(!0),i("");let{data:e,error:r}=await s.from("profiles").select("*").eq("id",t.id).single();if(r)throw r;let{data:a,error:n}=await s.from("property_requests").select("*").eq("user_id",t.id);if(n)throw n;let{data:o,error:l}=await s.from("scheduled_viewings").select("*").eq("user_id",t.id);if(l)throw l;let{data:c,error:d}=await s.from("user_settings").select("*").eq("user_id",t.id).single(),m=JSON.stringify({profile:e,propertyRequests:a||[],scheduledViewings:o||[],settings:c||{}},null,2),x=new Blob([m],{type:"application/json"}),h=URL.createObjectURL(x),u=document.createElement("a");u.href=h,u.download="bigdealegy-account-data-".concat(new Date().toISOString().split("T")[0],".json"),document.body.appendChild(u),u.click(),document.body.removeChild(u),i("Account data exported successfully")}catch(e){console.error("Error exporting account data:",e),d("Failed to export account data")}finally{p(!1)}},handleDeleteAccount=async()=>{if("delete my account"!==h){d('Please type "delete my account" to confirm');return}try{y(!0),d(""),await new Promise(e=>setTimeout(e,1500)),i("Your account has been scheduled for deletion. You will be logged out shortly."),setTimeout(()=>{s.auth.signOut()},3e3)}catch(e){console.error("Error deleting account:",e),d("Failed to delete account")}finally{y(!1),x(!1)}};return(0,r.jsxs)(n.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"space-y-6",children:[(0,r.jsxs)(l.Z,{className:"overflow-hidden",children:[(0,r.jsxs)("div",{className:"px-6 py-5 border-b border-gray-100 flex items-center",children:[(0,r.jsx)(o._hL,{className:"h-5 w-5 text-primary-500 mr-2"}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Export Account Data"})]}),(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"You can export all your personal data including your profile information, property requests, scheduled viewings, and settings. The data will be exported as a JSON file."}),(0,r.jsx)(c.Z,{variant:"outline",leftIcon:(0,r.jsx)(o._hL,{}),onClick:handleExportData,loading:g,children:g?"Exporting...":"Export My Data"})]})]}),(0,r.jsxs)(l.Z,{className:"overflow-hidden",children:[(0,r.jsxs)("div",{className:"px-6 py-5 border-b border-gray-100 flex items-center",children:[(0,r.jsx)(o.Ybf,{className:"h-5 w-5 text-red-500 mr-2"}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Delete Account"})]}),(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsx)("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 rounded-md mb-4",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)(o.BJv,{className:"h-5 w-5 text-red-400"})}),(0,r.jsxs)("div",{className:"ml-3",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Warning: This action cannot be undone"}),(0,r.jsxs)("div",{className:"mt-2 text-sm text-red-700",children:[(0,r.jsx)("p",{children:"Deleting your account will permanently remove all your data including:"}),(0,r.jsxs)("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[(0,r.jsx)("li",{children:"Your profile information"}),(0,r.jsx)("li",{children:"All property requests"}),(0,r.jsx)("li",{children:"Scheduled viewings"}),(0,r.jsx)("li",{children:"Notification preferences"})]})]})]})]})}),m?(0,r.jsxs)("div",{className:"border border-red-200 rounded-lg p-4",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Confirm Account Deletion"}),(0,r.jsxs)("p",{className:"text-sm text-gray-600 mb-4",children:["Please type ",(0,r.jsx)("span",{className:"font-medium",children:"delete my account"})," to confirm deletion."]}),(0,r.jsx)("input",{type:"text",value:h,onChange:e=>u(e.target.value),placeholder:"Type 'delete my account'",className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-red-500 focus:border-red-500 sm:text-sm mb-4"}),(0,r.jsxs)("div",{className:"flex space-x-3",children:[(0,r.jsx)(c.Z,{variant:"danger",leftIcon:(0,r.jsx)(o.Ybf,{}),onClick:handleDeleteAccount,loading:f,disabled:"delete my account"!==h,children:f?"Deleting...":"Permanently Delete Account"}),(0,r.jsx)(c.Z,{variant:"light",onClick:()=>{x(!1),u("")},children:"Cancel"})]})]}):(0,r.jsx)(c.Z,{variant:"danger",leftIcon:(0,r.jsx)(o.Ybf,{}),onClick:()=>x(!0),children:"Delete My Account"})]})]}),(0,r.jsxs)(l.Z,{className:"overflow-hidden",children:[(0,r.jsxs)("div",{className:"px-6 py-5 border-b border-gray-100 flex items-center",children:[(0,r.jsx)(o.xqh,{className:"h-5 w-5 text-gray-500 mr-2"}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Sign Out"})]}),(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Sign out from your account on this device."}),(0,r.jsx)(c.Z,{variant:"light",leftIcon:(0,r.jsx)(o.xqh,{}),onClick:()=>s.auth.signOut(),children:"Sign Out"})]})]})]},"account")}function Settings(){let{loading:e,profile:t,setProfile:s,notifications:l,setNotifications:c,sessionData:d,refreshSettings:m}=(0,x.r)(),[h,u]=(0,a.useState)("profile"),[g,p]=(0,a.useState)(""),[f,y]=(0,a.useState)("");(0,a.useEffect)(()=>{p(""),y("")},[h]);let b=[{id:"profile",label:"Profile",icon:o.fzv},{id:"security",label:"Security",icon:o.bfl},{id:"notifications",label:"Notifications",icon:o.vWP},{id:"account",label:"Account",icon:o.nbt}];return(0,r.jsxs)(n.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Account Settings"}),(0,r.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage your account preferences and profile information"})]}),(0,r.jsxs)(i.M,{children:[g&&(0,r.jsx)(n.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"mb-4 bg-green-50 border-l-4 border-green-400 p-4 rounded-md",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)(o._rq,{className:"h-5 w-5 text-green-400"})}),(0,r.jsx)("div",{className:"ml-3",children:(0,r.jsx)("p",{className:"text-sm text-green-700",children:g})})]})}),f&&(0,r.jsx)(n.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"mb-4 bg-red-50 border-l-4 border-red-400 p-4 rounded-md",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)(o.bcx,{className:"h-5 w-5 text-red-400"})}),(0,r.jsx)("div",{className:"ml-3",children:(0,r.jsx)("p",{className:"text-sm text-red-700",children:f})})]})})]}),(0,r.jsx)("div",{className:"mb-6 flex border-b border-gray-200",children:b.map(e=>(0,r.jsxs)("button",{onClick:()=>u(e.id),className:"flex items-center px-4 py-3 text-sm font-medium -mb-px ".concat(h===e.id?"text-primary-600 border-b-2 border-primary-500":"text-gray-500 hover:text-gray-700 hover:border-gray-300 border-b-2 border-transparent"),children:[(0,r.jsx)(e.icon,{className:"mr-2 h-5 w-5 ".concat(h===e.id?"text-primary-500":"text-gray-400")}),e.label]},e.id))}),e?(0,r.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,r.jsxs)("div",{className:"relative h-16 w-16",children:[(0,r.jsx)("div",{className:"absolute top-0 left-0 right-0 bottom-0 border-t-4 border-primary-500 border-solid rounded-full animate-spin"}),(0,r.jsx)("div",{className:"absolute top-0 left-0 right-0 bottom-0 border-t-4 border-primary-200 border-solid rounded-full opacity-20"})]})}):(0,r.jsx)("div",{className:"min-h-[400px]",children:(0,r.jsxs)(i.M,{mode:"wait",children:["profile"===h&&(0,r.jsx)(ProfileTab,{profile:t,setProfile:s,setSuccessMessage:p,setErrorMessage:y},"profile"),"security"===h&&(0,r.jsx)(SecurityTab,{setSuccessMessage:p,setErrorMessage:y,sessionData:d},"security"),"notifications"===h&&(0,r.jsx)(NotificationsTab,{notifications:l,setNotifications:c,setSuccessMessage:p,setErrorMessage:y},"notifications"),"account"===h&&(0,r.jsx)(AccountTab,{setSuccessMessage:p,setErrorMessage:y},"account")]})})]})}},4734:function(e,t,s){"use strict";s.d(t,{Z:function(){return Button}});var r=s(7437);s(2265);var a=s(1396),n=s.n(a);function LoadingSpinner(e){let{size:t="medium",color:s="primary",className:a=""}=e;return(0,r.jsx)("div",{className:"flex justify-center items-center ".concat(a),children:(0,r.jsx)("div",{className:"\n          rounded-full\n          animate-spin\n          ".concat({small:"h-4 w-4 border-2",medium:"h-8 w-8 border-2",large:"h-12 w-12 border-3"}[t],"\n          ").concat({primary:"border-primary-300 border-t-primary",white:"border-gray-200 border-t-white",gray:"border-gray-200 border-t-gray-600"}[s],"\n        ")})})}function Button(e){let{children:t,variant:s="primary",size:a="md",fullWidth:i=!1,href:o,loading:l=!1,outline:c=!1,rounded:d=!0,glass:m=!1,animation:x="none",className:h="",leftIcon:u,rightIcon:g,...p}=e,f=p.disabled?"opacity-60 cursor-not-allowed":"transform active:scale-[0.98] transition-transform",y="\n    inline-flex items-center justify-center\n    font-medium\n    transition-all duration-200\n    focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500\n    ".concat({primary:c?"border-2 border-primary-500 text-primary-600 hover:bg-primary-50 active:bg-primary-100":"bg-primary-600 hover:bg-primary-700 text-white shadow-sm",secondary:c?"border-2 border-gray-400 text-gray-700 hover:bg-gray-50 active:bg-gray-100":"bg-gray-600 hover:bg-gray-700 text-white shadow-sm",success:c?"border-2 border-green-500 text-green-600 hover:bg-green-50 active:bg-green-100":"bg-green-600 hover:bg-green-700 text-white shadow-sm",danger:c?"border-2 border-red-500 text-red-600 hover:bg-red-50 active:bg-red-100":"bg-red-600 hover:bg-red-700 text-white shadow-sm",warning:c?"border-2 border-amber-500 text-amber-600 hover:bg-amber-50 active:bg-amber-100":"bg-amber-500 hover:bg-amber-600 text-white shadow-sm",info:c?"border-2 border-blue-400 text-blue-500 hover:bg-blue-50 active:bg-blue-100":"bg-blue-500 hover:bg-blue-600 text-white shadow-sm",light:c?"border-2 border-gray-200 text-gray-600 hover:bg-gray-50 active:bg-gray-100":"bg-gray-100 hover:bg-gray-200 text-gray-800",dark:c?"border-2 border-gray-700 text-gray-800 hover:bg-gray-800 hover:text-white":"bg-gray-800 hover:bg-gray-900 text-white shadow-sm",outline:"border-2 border-gray-300 text-gray-700 hover:border-primary-500 hover:text-primary-600 bg-white",gradient:"bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 text-white shadow-sm"}[s],"\n    ").concat({xs:"text-xs px-2.5 py-1.5 gap-1",sm:"text-sm px-3 py-2 gap-1.5",md:"text-base px-4 py-2.5 gap-2",lg:"text-lg px-5 py-3 gap-2",xl:"text-xl px-6 py-3.5 gap-2.5"}[a],"\n    ").concat(i?"w-full":"","\n    ").concat(d?"rounded-full":"rounded-lg","\n    ").concat(m?"backdrop-blur-sm bg-opacity-80 shadow-sm":"","\n    ").concat({none:"",pulse:"animate-pulse",bounce:"animate-bounce"}[x],"\n    ").concat(f,"\n    ").concat(h,"\n  ");return o?(0,r.jsxs)(n(),{href:o,className:y,children:[u&&(0,r.jsx)("span",{className:"flex items-center",children:u}),t,g&&(0,r.jsx)("span",{className:"flex items-center",children:g})]}):(0,r.jsxs)("button",{className:y,disabled:l||p.disabled,...p,children:[l?(0,r.jsx)(LoadingSpinner,{size:"small",color:c?"primary":"white"}):u?(0,r.jsx)("span",{className:"flex items-center",children:u}):null,(0,r.jsx)("span",{children:t}),g&&!l&&(0,r.jsx)("span",{className:"flex items-center",children:g})]})}},2595:function(e,t,s){"use strict";s.d(t,{Z:function(){return Card}});var r=s(7437);function Card(e){let{children:t,className:s="",padding:a="small",shadow:n="small",rounded:i="medium",border:o=!1,hover:l=!1,clickable:c=!1}=e;return(0,r.jsx)("div",{className:"\n        bg-white\n        ".concat({none:"p-0",xs:"p-2",small:"p-3",medium:"p-4",large:"p-5"}[a],"\n        ").concat({none:"",small:"shadow-sm",medium:"shadow",large:"shadow-lg"}[n],"\n        ").concat({none:"rounded-none",small:"rounded-md",medium:"rounded-lg",large:"rounded-xl"}[i],"\n        ").concat(o?"border border-gray-100":"","\n        ").concat(l?"transition-all duration-200 hover:shadow-md hover:translate-y-[-1px]":"","\n        ").concat(c?"cursor-pointer active:scale-[0.99] active:shadow-inner transition-transform":"","\n        ").concat(s,"\n      "),children:t})}s(2265)},6814:function(e,t,s){"use strict";s.d(t,{Z:function(){return FormField}});var r=s(7437),a=s(2265),n=s(8611);function FormField(e){let{children:t,label:s,htmlFor:i,error:o,hint:l,className:c="",required:d=!1,span:m="full",helpText:x,showHelpIcon:h=!1,animate:u=!1}=e,[g,p]=a.useState(!1),f={full:"col-span-12",half:"col-span-12 md:col-span-6",third:"col-span-12 md:col-span-4",quarter:"col-span-12 md:col-span-3"},FieldContent=()=>(0,r.jsxs)(r.Fragment,{children:[s&&(0,r.jsxs)("div",{className:"flex items-center justify-between mb-1.5",children:[(0,r.jsxs)("label",{htmlFor:i,className:"block text-sm font-medium text-gray-700",children:[s,d&&(0,r.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),h&&x&&(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("button",{type:"button",className:"text-gray-400 hover:text-gray-600 focus:outline-none",onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),onClick:()=>p(!g),children:(0,r.jsx)("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})})}),g&&(0,r.jsx)("div",{className:"absolute z-10 right-0 mt-2 w-64 bg-white rounded-lg shadow-lg p-3 text-xs text-gray-600 border border-gray-200",children:x})]})]}),t,l&&!o&&(0,r.jsx)("p",{className:"mt-1.5 text-xs text-gray-500",children:l}),o&&(0,r.jsxs)(n.E.p,{initial:u?{opacity:0,y:-10}:void 0,animate:u?{opacity:1,y:0}:void 0,className:"mt-1.5 text-xs text-red-600 flex items-center",children:[(0,r.jsx)("svg",{className:"h-3 w-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),o]}),x&&!h&&(0,r.jsx)("p",{className:"mt-1.5 text-xs text-gray-500",children:x})]});return u?(0,r.jsx)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"mb-4 ".concat(f[m]," ").concat(c),children:(0,r.jsx)(FieldContent,{})}):(0,r.jsx)("div",{className:"mb-4 ".concat(f[m]," ").concat(c),children:(0,r.jsx)(FieldContent,{})})}},654:function(e,t,s){"use strict";var r=s(7437),a=s(2265);let n=(0,a.forwardRef)((e,t)=>{let{error:s=!1,errorMessage:n,leftIcon:i,rightIcon:o,className:l="",containerClassName:c="",clickableRightIcon:d=!1,onRightIconClick:m,label:x,helperText:h,variant:u="default",size:g="md",isRequired:p=!1,...f}=e,[y,b]=(0,a.useState)(!1),j="underlined"===u?"py-2 ".concat(o?"pr-6":""):"".concat(i?"pl-10":"pl-4"," ").concat(o?"pr-10":"pr-4"," ").concat({xs:"py-1 text-xs",sm:"py-1.5 text-sm",md:"py-2 text-sm",lg:"py-3 text-base"}[g]);return(0,r.jsxs)("div",{className:"relative ".concat(c),children:[x&&(0,r.jsxs)("label",{htmlFor:f.id,className:"block text-sm font-medium text-gray-700 mb-1 flex items-center",children:[x,p&&(0,r.jsx)("span",{className:"ml-1 text-danger-500",children:"*"})]}),(0,r.jsxs)("div",{className:"relative rounded-md",children:[i&&(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,r.jsx)("span",{className:"".concat(s?"text-danger-500":"text-gray-500"," sm:text-sm"),children:i})}),(0,r.jsx)("input",{ref:t,className:"\n            block w-full border rounded-lg \n            transition-all duration-200\n            focus:outline-none\n            ".concat(s?"border-danger-300 text-danger-900 placeholder-danger-300 focus:ring-danger-500 focus:border-danger-500":({default:"border-gray-300 ".concat(y?"border-primary-500 ring-2 ring-primary-50":"hover:border-gray-400"," bg-white shadow-sm"),filled:"bg-gray-50 border-transparent ".concat(y?"border-primary-500 ring-2 ring-primary-50":"hover:bg-gray-100"),outline:"bg-transparent border-gray-300 ".concat(y?"border-primary-500 ring-2 ring-primary-50":"hover:border-gray-400"),underlined:"border-t-0 border-l-0 border-r-0 border-b-2 rounded-none px-0 ".concat(y?"border-primary-500":"border-gray-300 hover:border-gray-400"),glass:"backdrop-blur-sm bg-white bg-opacity-70 border-white border-opacity-20 shadow-sm ".concat(y?"ring-2 ring-white ring-opacity-50":"hover:bg-opacity-80")})[u],"\n            ").concat(j,"\n            ").concat(f.disabled?"bg-gray-100 cursor-not-allowed opacity-70":"","\n            ").concat(l,"\n          "),onFocus:e=>{b(!0),f.onFocus&&f.onFocus(e)},onBlur:e=>{b(!1),f.onBlur&&f.onBlur(e)},...f}),o&&(0,r.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center ".concat(d?"cursor-pointer":"pointer-events-none"),onClick:d&&m?m:void 0,children:(0,r.jsx)("span",{className:"".concat(s?"text-danger-500":"text-gray-500"," sm:text-sm transition-colors ").concat(d?"hover:text-primary-500 active:text-primary-600":""),children:o})})]}),(h||n)&&(0,r.jsx)("p",{className:"mt-1 text-xs ".concat(s?"text-danger-600":"text-gray-500"),children:s?n:h})]})});n.displayName="Input",t.Z=n},2695:function(e,t,s){"use strict";s.d(t,{r:function(){return useSettings}});var r=s(2265),a=s(5243),n=s(3287);function useSettings(){let[e,t]=(0,r.useState)(!0),[s,i]=(0,r.useState)(null),{user:o,session:l}=(0,a.a)(),[c,d]=(0,r.useState)({name:"",email:"",phone:""}),[m,x]=(0,r.useState)({email_notifications:!0,sms_notifications:!0,push_notifications:!0,request_updates:!0,viewing_reminders:!0,marketing_emails:!1}),[h,u]=(0,r.useState)(null),fetchSettings=async()=>{if(!o||!(null==l?void 0:l.access_token)){t(!1);return}t(!0),i(null);try{var e,s,r,a,c,m;let t=await n.ZP.getUserSettings(l.access_token);d({name:t.profile.name||"",email:t.profile.email||"",phone:t.profile.phone||""}),x({email_notifications:null===(e=t.settings.email_notifications)||void 0===e||e,sms_notifications:null===(s=t.settings.sms_notifications)||void 0===s||s,push_notifications:null===(r=t.settings.push_notifications)||void 0===r||r,request_updates:null===(a=t.settings.request_updates)||void 0===a||a,viewing_reminders:null===(c=t.settings.viewing_reminders)||void 0===c||c,marketing_emails:null!==(m=t.settings.marketing_emails)&&void 0!==m&&m})}catch(e){console.error("Error fetching settings:",e),i(e.message||"Failed to fetch settings")}finally{t(!1)}},fetchSessions=async()=>{if(o&&(null==l?void 0:l.access_token))try{let e=await n.ZP.getUserSessions(l.access_token);u(e)}catch(e){console.error("Error fetching sessions:",e)}},updateProfile=async()=>{if(!o||!(null==l?void 0:l.access_token))throw Error("User not authenticated");try{let e=await n.ZP.updateUserProfile(l.access_token,c);return d(t=>({...t,...e})),{success:!0}}catch(e){throw console.error("Error updating profile:",e),e}},updateNotifications=async()=>{if(!o||!(null==l?void 0:l.access_token))throw Error("User not authenticated");try{let e=await n.ZP.updateNotificationSettings(l.access_token,m);return x(t=>({...t,...e})),{success:!0}}catch(e){throw console.error("Error updating notifications:",e),e}},updatePassword=async e=>{if(!o||!(null==l?void 0:l.access_token))throw Error("User not authenticated");try{let t=await n.ZP.updatePassword(l.access_token,e);return t}catch(e){throw console.error("Error updating password:",e),e}},exportData=async()=>{if(!o||!(null==l?void 0:l.access_token))throw Error("User not authenticated");try{let e=await n.ZP.exportUserData(l.access_token);return e}catch(e){throw console.error("Error exporting user data:",e),e}},deleteAccount=async e=>{if(!o||!(null==l?void 0:l.access_token))throw Error("User not authenticated");try{let t=await n.ZP.deleteUserAccount(l.access_token,e);return t}catch(e){throw console.error("Error deleting account:",e),e}},terminateSession=async e=>{if(!o||!(null==l?void 0:l.access_token))throw Error("User not authenticated");try{return await n.ZP.terminateSession(l.access_token,e),u(t=>({...t,otherSessions:t.otherSessions.filter(t=>t.id!==e)})),{success:!0}}catch(e){throw console.error("Error terminating session:",e),e}},terminateAllSessions=async()=>{if(!o||!(null==l?void 0:l.access_token))throw Error("User not authenticated");try{return await n.ZP.terminateAllSessions(l.access_token),u(e=>({...e,otherSessions:[]})),{success:!0}}catch(e){throw console.error("Error terminating all sessions:",e),e}};return(0,r.useEffect)(()=>{fetchSettings(),fetchSessions()},[o,null==l?void 0:l.access_token]),{loading:e,error:s,profile:c,setProfile:d,notifications:m,setNotifications:x,sessionData:h,updateProfile,updateNotifications,updatePassword,exportData,deleteAccount,terminateSession,terminateAllSessions,refreshSettings:fetchSettings,refreshSessions:fetchSessions}}},4033:function(e,t,s){e.exports=s(94)},1393:function(e,t,s){"use strict";s.d(t,{M:function(){return AnimatePresence}});var r=s(7437),a=s(2265),n=s(781),i=s(961),o=s(538),l=s(8243),c=s(5968);let PopChildMeasure=class PopChildMeasure extends a.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,s=e instanceof HTMLElement&&e.offsetWidth||0,r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft,r.right=s-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}};function PopChild({children:e,isPresent:t,anchorX:s}){let n=(0,a.useId)(),i=(0,a.useRef)(null),o=(0,a.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=(0,a.useContext)(c._);return(0,a.useInsertionEffect)(()=>{let{width:e,height:r,top:a,left:c,right:d}=o.current;if(t||!i.current||!e||!r)return;let m="left"===s?`left: ${c}`:`right: ${d}`;i.current.dataset.motionPopId=n;let x=document.createElement("style");return l&&(x.nonce=l),document.head.appendChild(x),x.sheet&&x.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${r}px !important;
            ${m}px !important;
            top: ${a}px !important;
          }
        `),()=>{document.head.removeChild(x)}},[t]),(0,r.jsx)(PopChildMeasure,{isPresent:t,childRef:i,sizeRef:o,children:a.cloneElement(e,{ref:i})})}let PresenceChild=({children:e,initial:t,isPresent:s,onExitComplete:n,custom:o,presenceAffectsLayout:c,mode:d,anchorX:m})=>{let x=(0,i.h)(newChildrenMap),h=(0,a.useId)(),u=!0,g=(0,a.useMemo)(()=>(u=!1,{id:h,initial:t,isPresent:s,custom:o,onExitComplete:e=>{for(let t of(x.set(e,!0),x.values()))if(!t)return;n&&n()},register:e=>(x.set(e,!1),()=>x.delete(e))}),[s,x,n]);return c&&u&&(g={...g}),(0,a.useMemo)(()=>{x.forEach((e,t)=>x.set(t,!1))},[s]),a.useEffect(()=>{s||x.size||!n||n()},[s]),"popLayout"===d&&(e=(0,r.jsx)(PopChild,{isPresent:s,anchorX:m,children:e})),(0,r.jsx)(l.O.Provider,{value:g,children:e})};function newChildrenMap(){return new Map}var d=s(7196);let getChildKey=e=>e.key||"";function onlyElements(e){let t=[];return a.Children.forEach(e,e=>{(0,a.isValidElement)(e)&&t.push(e)}),t}let AnimatePresence=({children:e,custom:t,initial:s=!0,onExitComplete:l,presenceAffectsLayout:c=!0,mode:m="sync",propagate:x=!1,anchorX:h="left"})=>{let[u,g]=(0,d.oO)(x),p=(0,a.useMemo)(()=>onlyElements(e),[e]),f=x&&!u?[]:p.map(getChildKey),y=(0,a.useRef)(!0),b=(0,a.useRef)(p),j=(0,i.h)(()=>new Map),[v,w]=(0,a.useState)(p),[N,P]=(0,a.useState)(p);(0,o.L)(()=>{y.current=!1,b.current=p;for(let e=0;e<N.length;e++){let t=getChildKey(N[e]);f.includes(t)?j.delete(t):!0!==j.get(t)&&j.set(t,!1)}},[N,f.length,f.join("-")]);let S=[];if(p!==v){let e=[...p];for(let t=0;t<N.length;t++){let s=N[t],r=getChildKey(s);f.includes(r)||(e.splice(t,0,s),S.push(s))}return"wait"===m&&S.length&&(e=S),P(onlyElements(e)),w(p),null}let{forceRender:k}=(0,a.useContext)(n.p);return(0,r.jsx)(r.Fragment,{children:N.map(e=>{let a=getChildKey(e),n=(!x||!!u)&&(p===N||f.includes(a));return(0,r.jsx)(PresenceChild,{isPresent:n,initial:(!y.current||!!s)&&void 0,custom:t,presenceAffectsLayout:c,mode:m,onExitComplete:n?void 0:()=>{if(!j.has(a))return;j.set(a,!0);let e=!0;j.forEach(t=>{t||(e=!1)}),e&&(k?.(),P(b.current),x&&g?.(),l&&l())},anchorX:h,children:e},a)})})}}},function(e){e.O(0,[2438,8920,8611,35,2971,2472,1744],function(){return e(e.s=7422)}),_N_E=e.O()}]);