(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6813],{2601:function(e,r,t){"use strict";var a,s;e.exports=(null==(a=t.g.process)?void 0:a.env)&&"object"==typeof(null==(s=t.g.process)?void 0:s.env)?t.g.process:t(8960)},2703:function(e,r,t){Promise.resolve().then(t.bind(t,355))},355:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return NewProperty}});var a=t(7437),s=t(2265),o=t(4033),i=t(1396),n=t.n(i),l=t(8611),c=t(1393),d=t(5243),m=t(4732),p=t(5925),u=t(1865),h=t(2595),x=t(4734),g=t(654),y=t(6814),b=t(8920),f=t(2601);let v=f.env.NEXT_PUBLIC_GOOGLE_MAPS_API_KEY||"AIzaSyA5UgwS4ooUTXQcbCCZF-lVZQN6G7_OFRw",j=!1,w=null,N=!1,loadGoogleMapsScript=()=>j?Promise.resolve():w||(N?Promise.reject(Error("Failed to load Google Maps API")):(N=!0,w=new Promise((e,r)=>{let t="googleMapsCallback_".concat(Date.now());window[t]=()=>{j=!0,e(),delete window[t]};let a=document.createElement("script");a.src="https://maps.googleapis.com/maps/api/js?key=".concat(v,"&libraries=places&callback=").concat(t),a.async=!0,a.defer=!0,a.onerror=e=>{console.error("Error loading Google Maps API:",e),r(Error("Failed to load Google Maps API"))},document.head.appendChild(a),setTimeout(()=>{j||r(Error("Google Maps API load timeout"))},1e4)})));var properties_LocationPicker=e=>{let{onSelect:r,initialLocation:t={lat:30.0444,lng:31.2357}}=e,[o,i]=(0,s.useState)(null),[n,l]=(0,s.useState)(null),[c,d]=(0,s.useState)(""),[m,p]=(0,s.useState)([]),[u,h]=(0,s.useState)(!1),[x,g]=(0,s.useState)(!1),[y,f]=(0,s.useState)(null),v=(0,s.useRef)(null),j=(0,s.useRef)(null);(0,s.useEffect)(()=>{let initMap=async()=>{if(v.current&&!x)try{if(h(!0),await loadGoogleMapsScript(),!window.google||!window.google.maps)throw Error("Google Maps not available");let e=new window.google.maps.Map(v.current,{center:t,zoom:12,streetViewControl:!1,mapTypeControl:!1,fullscreenControl:!1});i(e),g(!0),j.current=new window.google.maps.Geocoder;let a=new window.google.maps.Marker({position:t,map:e,draggable:!0,animation:window.google.maps.Animation.DROP});l(a),a.addListener("dragend",()=>{let e=a.getPosition();r({lat:e.lat(),lng:e.lng()})}),e.addListener("click",e=>{let t={lat:e.latLng.lat(),lng:e.latLng.lng()};a.setPosition(t),r(t)})}catch(e){console.error("Error initializing map:",e),f(e.message)}finally{h(!1)}};initMap()},[t,r,x]);let searchLocation=async e=>{if(e.preventDefault(),c.trim()&&j.current){h(!0);try{j.current.geocode({address:c},(e,r)=>{"OK"===r&&e.length>0?p(e.slice(0,5)):p([]),h(!1)})}catch(e){console.error("Error searching for location:",e),h(!1)}}},goToLocation=e=>{if(!o||!n)return;let t=e.geometry.location;o.setCenter(t),o.setZoom(15),n.setPosition(t),r({lat:t.lat(),lng:t.lng()}),p([]),d("")};return(0,a.jsxs)("div",{className:"relative h-full w-full bg-gray-100",children:[(0,a.jsx)("div",{ref:v,className:"h-full w-full"}),y&&(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100 z-20",children:(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 max-w-md mx-auto text-center",children:[(0,a.jsx)(b.bcx,{className:"h-8 w-8 text-red-500 mx-auto mb-2"}),(0,a.jsx)("h3",{className:"text-sm font-medium text-red-800 mb-1",children:"Google Maps Error"}),(0,a.jsx)("p",{className:"text-xs text-red-600",children:y}),(0,a.jsx)("p",{className:"text-xs text-gray-600 mt-2",children:"You can still continue with the property creation process. The location will need to be set later."})]})}),!y&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"absolute top-3 left-3 right-3 z-10",children:[(0,a.jsxs)("form",{onSubmit:searchLocation,className:"relative",children:[(0,a.jsx)("input",{type:"text",value:c,onChange:e=>d(e.target.value),placeholder:"Search for a location...",className:"w-full px-3 py-2 pl-10 pr-14 text-sm rounded-md shadow-sm border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"}),(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsx)(b.jRj,{className:"h-4 w-4 text-gray-400"})}),(0,a.jsx)("button",{type:"submit",className:"absolute inset-y-0 right-0 px-3 py-1 flex items-center text-xs font-medium text-white bg-primary-600 rounded-r-md hover:bg-primary-700 focus:outline-none",children:"Search"})]}),m.length>0&&(0,a.jsx)("div",{className:"mt-1 bg-white rounded-md shadow-lg border border-gray-200 max-h-72 overflow-y-auto",children:(0,a.jsx)("ul",{className:"py-1",children:m.map((e,r)=>(0,a.jsx)("li",{children:(0,a.jsxs)("button",{type:"button",onClick:()=>goToLocation(e),className:"flex items-start px-4 py-2 w-full text-left hover:bg-gray-50",children:[(0,a.jsx)(b.i63,{className:"h-5 w-5 text-primary-500 mt-0.5 mr-2 flex-shrink-0"}),(0,a.jsx)("div",{children:(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900 line-clamp-1",children:e.formatted_address})})]})},r))})})]}),(0,a.jsx)("button",{type:"button",onClick:()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(e=>{let t={lat:e.coords.latitude,lng:e.coords.longitude};o&&(o.setCenter(t),o.setZoom(15)),n&&n.setPosition(t),r(t)},e=>{console.error("Error getting current location:",e),alert("Unable to get your current location. Please try again or search for a location.")}):alert("Geolocation is not supported by your browser.")},className:"absolute bottom-4 right-4 z-10 flex items-center justify-center p-2 bg-white rounded-full shadow-md border border-gray-300 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500","aria-label":"Use current location",children:(0,a.jsx)(b.xUG,{className:"h-5 w-5 text-primary-600"})}),u&&(0,a.jsx)("div",{className:"absolute top-14 left-1/2 transform -translate-x-1/2 z-10",children:(0,a.jsx)("div",{className:"px-3 py-1 bg-white rounded-full shadow-md text-xs font-medium text-gray-700",children:"Searching..."})})]}),!x&&!y&&(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100",children:(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-primary-600 mb-2"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Loading map..."})]})})]})};function NewProperty(){var e,r,t,i,f,v,j,w;let{user:N,session:S}=(0,d.a)(),C=(0,o.useRouter)(),{register:k,handleSubmit:P,watch:_,setValue:T,formState:{errors:E,isValid:I}}=(0,u.cI)({defaultValues:{title:"",description:"",property_type:"",location:"",city:"",project_name:"",compound_name:"",developer_name:"",price:"",bedrooms:"",bathrooms:"",area_size:"",features:{},available:!0,geo_location:null},mode:"onChange"}),[F,A]=(0,s.useState)(!1),[L,U]=(0,s.useState)(""),[z,O]=(0,s.useState)(!1),[G,Z]=(0,s.useState)("basic"),[M,D]=(0,s.useState)([]),[B,R]=(0,s.useState)([]),[q,J]=(0,s.useState)([]),[V,H]=(0,s.useState)(0),[Q,Y]=(0,s.useState)(!1),K=(0,s.useRef)(null),W=(0,s.useRef)(null),X=(0,s.useRef)(null),$=[{id:"garden",label:"Garden",icon:(0,a.jsx)(b.aCJ,{className:"w-3 h-3"})},{id:"pool",label:"Swimming Pool",icon:(0,a.jsx)(b.aCJ,{className:"w-3 h-3"})},{id:"garage",label:"Garage",icon:(0,a.jsx)(b.aCJ,{className:"w-3 h-3"})},{id:"balcony",label:"Balcony",icon:(0,a.jsx)(b.aCJ,{className:"w-3 h-3"})},{id:"elevator",label:"Elevator",icon:(0,a.jsx)(b.aCJ,{className:"w-3 h-3"})},{id:"security",label:"Security System",icon:(0,a.jsx)(b.bfl,{className:"w-3 h-3"})},{id:"gym",label:"Gym",icon:(0,a.jsx)(b.aCJ,{className:"w-3 h-3"})},{id:"ac",label:"Air Conditioning",icon:(0,a.jsx)(b.aCJ,{className:"w-3 h-3"})},{id:"furnished",label:"Furnished",icon:(0,a.jsx)(b.aCJ,{className:"w-3 h-3"})},{id:"parking",label:"Parking",icon:(0,a.jsx)(b.aCJ,{className:"w-3 h-3"})},{id:"garden_view",label:"Garden View",icon:(0,a.jsx)(b.aCJ,{className:"w-3 h-3"})},{id:"sea_view",label:"Sea View",icon:(0,a.jsx)(b.aCJ,{className:"w-3 h-3"})},{id:"private_entrance",label:"Private Entrance",icon:(0,a.jsx)(b.aCJ,{className:"w-3 h-3"})},{id:"storage",label:"Storage Room",icon:(0,a.jsx)(b.aCJ,{className:"w-3 h-3"})},{id:"pets_allowed",label:"Pets Allowed",icon:(0,a.jsx)(b.aCJ,{className:"w-3 h-3"})},{id:"central_heating",label:"Central Heating",icon:(0,a.jsx)(b.aCJ,{className:"w-3 h-3"})},{id:"concierge",label:"Concierge Service",icon:(0,a.jsx)(b.fzv,{className:"w-3 h-3"})},{id:"fiber_internet",label:"Fiber Internet",icon:(0,a.jsx)(b.aCJ,{className:"w-3 h-3"})},{id:"smart_home",label:"Smart Home Features",icon:(0,a.jsx)(b.Par,{className:"w-3 h-3"})},{id:"kids_area",label:"Kids Play Area",icon:(0,a.jsx)(b.aCJ,{className:"w-3 h-3"})}],handleImageChange=(e,r)=>{let t=Array.from(e.target.files),a=t.map(e=>({file:e,preview:URL.createObjectURL(e),name:e.name,type:r}));"property"===r?D(e=>[...e,...a]):"master_plan"===r?R(e=>[...e,...a]):"compound"===r&&J(e=>[...e,...a])},removeImage=(e,r)=>{"property"===r?(URL.revokeObjectURL(M[e].preview),D(r=>r.filter((r,t)=>t!==e))):"master_plan"===r?(URL.revokeObjectURL(B[e].preview),R(r=>r.filter((r,t)=>t!==e))):"compound"===r&&(URL.revokeObjectURL(q[e].preview),J(r=>r.filter((r,t)=>t!==e)))},handleFeatureChange=(e,r)=>{T("features",{..._("features"),[e]:r})},handleProgressUpdate=e=>{H(e)},onSubmit=async e=>{if("images"===G){A(!0),U("");try{if(!(null==S?void 0:S.access_token))throw Error("You must be logged in to create a property");let r={...e,price:parseFloat(e.price),area_size:parseFloat(e.area_size),features:e.features,created_by:null==N?void 0:N.id},{property:t}=await (0,m.G3)(S.access_token,r),a=[];if(M.forEach((e,r)=>{a.push({file:e.file,type:"property",order:r})}),B.forEach((e,r)=>{a.push({file:e.file,type:"master_plan",order:r})}),q.forEach((e,r)=>{a.push({file:e.file,type:"compound",order:r})}),a.length>0){let e=new FormData;a.forEach((r,t)=>{e.append("images",r.file),e.append("types[".concat(t,"]"),r.type),e.append("orders[".concat(t,"]"),r.order)}),await fetch("/api/properties/".concat(t.id,"/images"),{method:"POST",headers:{Authorization:"Bearer ".concat(S.access_token)},body:e,onUploadProgress:e=>{let r=Math.round(100*e.loaded/e.total);handleProgressUpdate(r)}})}O(!0),p.toast.success("Property created successfully!"),setTimeout(()=>{C.push("/sales-ops/properties")},2e3)}catch(e){console.error("Error creating property:",e),U(e.message||"An error occurred while creating the property"),p.toast.error("Failed to create property")}finally{A(!1)}}},goToNextSection=e=>{e&&e.preventDefault(),"basic"===G?Z("project"):"project"===G?Z("details"):"details"===G?Z("features"):"features"===G&&Z("images")},goToPrevSection=e=>{e&&e.preventDefault(),"images"===G?Z("features"):"features"===G?Z("details"):"details"===G?Z("project"):"project"===G&&Z("basic")},ee=[{id:"basic",label:"Basic Info",icon:(0,a.jsx)(b.m6D,{className:"h-3 w-3 mr-1"})},{id:"project",label:"Project & Location",icon:(0,a.jsx)(b.MIl,{className:"h-3 w-3 mr-1"})},{id:"details",label:"Details",icon:(0,a.jsx)(b.H33,{className:"h-3 w-3 mr-1"})},{id:"features",label:"Features",icon:(0,a.jsx)(b.SnF,{className:"h-3 w-3 mr-1"})},{id:"images",label:"Images",icon:(0,a.jsx)(b.LFN,{className:"h-3 w-3 mr-1"})}];return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,a.jsxs)(n(),{href:"/sales-ops/properties",className:"inline-flex items-center text-xs text-gray-500 hover:text-gray-700",children:[(0,a.jsx)(b.Ao2,{className:"mr-1 h-3 w-3"}),"Back to Properties"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"h-1.5 bg-gray-200 rounded-full w-24 sm:w-32",children:(0,a.jsx)("div",{className:"h-1.5 bg-primary-500 rounded-full transition-all duration-300",style:{width:"".concat("basic"===G?20:"project"===G?40:"details"===G?60:"features"===G?80:"images"===G?100:void 0,"%")}})}),(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:["Step ","basic"===G?"1":"project"===G?"2":"details"===G?"3":"features"===G?"4":"5"," of 5"]})]})]}),(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"Add New Property"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Create a new property listing with all details for potential buyers"})]}),L&&(0,a.jsx)(l.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-3 bg-red-50 border-l-3 border-red-500 p-2 rounded-md",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(b.bcx,{className:"h-4 w-4 text-red-500 mr-2 flex-shrink-0"}),(0,a.jsx)("p",{className:"text-xs text-red-700",children:L})]})}),z&&(0,a.jsx)(l.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-3 bg-green-50 border-l-3 border-green-500 p-2 rounded-md",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(b.UgA,{className:"h-4 w-4 text-green-500 mr-2 flex-shrink-0"}),(0,a.jsx)("p",{className:"text-xs text-green-700",children:"Property created successfully! Redirecting..."})]})}),(0,a.jsx)(h.Z,{className:"overflow-hidden",children:(0,a.jsxs)("form",{onSubmit:P(onSubmit),children:[(0,a.jsx)("div",{className:"border-b border-gray-100 px-4 py-2",children:(0,a.jsx)("div",{className:"flex overflow-x-auto hide-scrollbar",children:ee.map(e=>(0,a.jsxs)("button",{type:"button",className:"text-xs whitespace-nowrap font-medium py-1 px-2 mr-2 rounded flex items-center transition-colors ".concat(G===e.id?"bg-primary-50 text-primary-600":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"),onClick:r=>{r.preventDefault(),Z(e.id)},children:[e.icon,e.label,G===e.id&&(0,a.jsxs)("span",{className:"ml-1.5 flex h-2 w-2",children:[(0,a.jsx)("span",{className:"animate-ping absolute h-2 w-2 rounded-full bg-primary-400 opacity-75"}),(0,a.jsx)("span",{className:"rounded-full h-2 w-2 bg-primary-500"})]})]},e.id))})}),(0,a.jsx)("div",{className:"p-4",children:(0,a.jsxs)(c.M,{mode:"wait",children:["basic"===G&&(0,a.jsxs)(l.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"space-y-3",children:[(0,a.jsxs)("div",{className:"mb-2 pb-2 border-b border-gray-100",children:[(0,a.jsxs)("h2",{className:"text-sm font-semibold text-gray-800 flex items-center",children:[(0,a.jsx)(b.m6D,{className:"mr-2 h-4 w-4 text-primary-500"}),"Basic Property Information"]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Enter the essential details about this property"})]}),(0,a.jsx)(y.Z,{label:"Property Title",htmlFor:"title",required:!0,error:null===(e=E.title)||void 0===e?void 0:e.message,children:(0,a.jsx)(g.Z,{id:"title",type:"text",placeholder:"Enter a descriptive title",leftIcon:(0,a.jsx)(b.l1M,{}),...k("title",{required:"Property title is required"}),error:!!E.title})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,a.jsx)(y.Z,{label:"Property Type",htmlFor:"property_type",required:!0,error:null===(r=E.property_type)||void 0===r?void 0:r.message,children:(0,a.jsxs)("select",{id:"property_type",className:"block w-full rounded-lg border ".concat(E.property_type?"border-red-300":"border-gray-300"," py-2 px-3 text-sm bg-white focus:outline-none focus:ring-primary-500 focus:border-primary-500"),...k("property_type",{required:"Property type is required"}),children:[(0,a.jsx)("option",{value:"",children:"Select Property Type"}),(0,a.jsx)("option",{value:"Apartment",children:"Apartment"}),(0,a.jsx)("option",{value:"Villa",children:"Villa"}),(0,a.jsx)("option",{value:"Townhouse",children:"Townhouse"}),(0,a.jsx)("option",{value:"Penthouse",children:"Penthouse"}),(0,a.jsx)("option",{value:"Chalet",children:"Chalet"}),(0,a.jsx)("option",{value:"Duplex",children:"Duplex"}),(0,a.jsx)("option",{value:"Office",children:"Office"}),(0,a.jsx)("option",{value:"Shop",children:"Shop"}),(0,a.jsx)("option",{value:"Land",children:"Land"})]})}),(0,a.jsx)(y.Z,{label:"Price (EGP)",htmlFor:"price",required:!0,error:null===(t=E.price)||void 0===t?void 0:t.message,children:(0,a.jsx)(g.Z,{id:"price",type:"number",placeholder:"Enter property price",leftIcon:(0,a.jsx)(b.oQC,{}),...k("price",{required:"Price is required",min:{value:0,message:"Price must be positive"}}),error:!!E.price})})]}),(0,a.jsx)(y.Z,{label:"Description",htmlFor:"description",children:(0,a.jsx)("textarea",{id:"description",rows:5,placeholder:"Describe the property in detail",className:"block w-full rounded-lg border border-gray-300 py-2 px-3 text-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500",...k("description")})}),(0,a.jsx)("div",{className:"bg-blue-50 p-3 rounded-lg mt-4",children:(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)(b.H33,{className:"h-4 w-4 text-blue-500 mt-0.5 mr-2 flex-shrink-0"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-blue-700 font-medium",children:"Pro Tip"}),(0,a.jsx)("p",{className:"text-xs text-blue-600",children:"Create a compelling title that highlights the property's best features. Add a detailed description including unique selling points, nearby amenities, and transportation options."})]})]})})]},"basic"),"project"===G&&(0,a.jsxs)(l.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"space-y-3",children:[(0,a.jsxs)("div",{className:"mb-2 pb-2 border-b border-gray-100",children:[(0,a.jsxs)("h2",{className:"text-sm font-semibold text-gray-800 flex items-center",children:[(0,a.jsx)(b.MIl,{className:"mr-2 h-4 w-4 text-primary-500"}),"Project & Location Details"]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Enter information about the project and its location"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,a.jsx)(y.Z,{label:"Project Name",htmlFor:"project_name",helper:"The name of the development project",children:(0,a.jsx)(g.Z,{id:"project_name",type:"text",placeholder:"e.g. Mountain View iCity",leftIcon:(0,a.jsx)(b.wBW,{}),...k("project_name")})}),(0,a.jsx)(y.Z,{label:"Compound Name",htmlFor:"compound_name",helper:"The specific compound within the project",children:(0,a.jsx)(g.Z,{id:"compound_name",type:"text",placeholder:"e.g. iVilla",leftIcon:(0,a.jsx)(b.aCJ,{}),...k("compound_name")})})]}),(0,a.jsx)(y.Z,{label:"Developer Name",htmlFor:"developer_name",helper:"The company that developed the property",children:(0,a.jsx)(g.Z,{id:"developer_name",type:"text",placeholder:"e.g. SODIC, Emaar, etc.",leftIcon:(0,a.jsx)(b.vPQ,{}),...k("developer_name")})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,a.jsx)(y.Z,{label:"City",htmlFor:"city",required:!0,error:null===(i=E.city)||void 0===i?void 0:i.message,children:(0,a.jsxs)("select",{id:"city",className:"block w-full rounded-lg border ".concat(E.city?"border-red-300":"border-gray-300"," py-2 px-3 text-sm bg-white focus:outline-none focus:ring-primary-500 focus:border-primary-500"),...k("city",{required:"City is required"}),children:[(0,a.jsx)("option",{value:"",children:"Select City"}),(0,a.jsx)("option",{value:"Cairo",children:"Cairo"}),(0,a.jsx)("option",{value:"Alexandria",children:"Alexandria"}),(0,a.jsx)("option",{value:"Giza",children:"Giza"}),(0,a.jsx)("option",{value:"Sharm El Sheikh",children:"Sharm El Sheikh"}),(0,a.jsx)("option",{value:"Hurghada",children:"Hurghada"}),(0,a.jsx)("option",{value:"Luxor",children:"Luxor"}),(0,a.jsx)("option",{value:"Aswan",children:"Aswan"}),(0,a.jsx)("option",{value:"Port Said",children:"Port Said"}),(0,a.jsx)("option",{value:"Suez",children:"Suez"}),(0,a.jsx)("option",{value:"El Alamein",children:"El Alamein"}),(0,a.jsx)("option",{value:"Dahab",children:"Dahab"}),(0,a.jsx)("option",{value:"North Coast",children:"North Coast"}),(0,a.jsx)("option",{value:"New Cairo",children:"New Cairo"}),(0,a.jsx)("option",{value:"6th of October",children:"6th of October"}),(0,a.jsx)("option",{value:"Sheikh Zayed",children:"Sheikh Zayed"}),(0,a.jsx)("option",{value:"New Capital",children:"New Capital"})]})}),(0,a.jsx)(y.Z,{label:"Location",htmlFor:"location",required:!0,error:null===(f=E.location)||void 0===f?void 0:f.message,children:(0,a.jsx)(g.Z,{id:"location",type:"text",placeholder:"e.g. Fifth Settlement, Maadi",leftIcon:(0,a.jsx)(b.i63,{}),...k("location",{required:"Location is required"}),error:!!E.location})})]}),(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Geo Location"}),(0,a.jsx)("button",{type:"button",className:"text-xs text-primary-600 hover:text-primary-500 font-medium",onClick:()=>Y(!Q),children:Q?"Close Map":"Open Map"})]}),_("geo_location")&&(0,a.jsx)("div",{className:"bg-gray-50 p-2 rounded-md mb-2",children:(0,a.jsxs)("div",{className:"text-xs text-gray-700",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(b.i63,{className:"mr-1 h-3 w-3 text-primary-500"}),(0,a.jsxs)("span",{children:["Latitude: ",null===(v=_("geo_location"))||void 0===v?void 0:v.lat.toFixed(6)]})]}),(0,a.jsxs)("div",{className:"flex items-center mt-1",children:[(0,a.jsx)(b.i63,{className:"mr-1 h-3 w-3 text-primary-500"}),(0,a.jsxs)("span",{children:["Longitude: ",null===(j=_("geo_location"))||void 0===j?void 0:j.lng.toFixed(6)]})]})]})}),Q&&(0,a.jsx)("div",{className:"mt-2 border border-gray-200 rounded-lg overflow-hidden h-96",children:(0,a.jsx)(properties_LocationPicker,{onSelect:e=>{T("geo_location",e),Y(!1)}})}),!_("geo_location")&&!Q&&(0,a.jsxs)("button",{type:"button",onClick:()=>Y(!0),className:"flex items-center justify-center w-full p-3 border-2 border-dashed border-gray-300 rounded-lg text-sm text-gray-600 hover:text-primary-600 hover:border-primary-300",children:[(0,a.jsx)(b.i63,{className:"mr-2 h-4 w-4"}),"Select Location on Map"]})]})]},"project"),"details"===G&&(0,a.jsxs)(l.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"space-y-3",children:[(0,a.jsxs)("div",{className:"mb-2 pb-2 border-b border-gray-100",children:[(0,a.jsxs)("h2",{className:"text-sm font-semibold text-gray-800 flex items-center",children:[(0,a.jsx)(b.H33,{className:"mr-2 h-4 w-4 text-primary-500"}),"Property Details"]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Enter the specific details of this property"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[(0,a.jsx)(y.Z,{label:"Bedrooms",htmlFor:"bedrooms",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"mr-2 text-gray-400",children:(0,a.jsx)(b.m6D,{className:"h-4 w-4"})}),(0,a.jsxs)("select",{id:"bedrooms",className:"block w-full rounded-lg border border-gray-300 py-2 px-3 text-sm bg-white focus:outline-none focus:ring-primary-500 focus:border-primary-500",...k("bedrooms"),children:[(0,a.jsx)("option",{value:"",children:"Select"}),(0,a.jsx)("option",{value:"Studio",children:"Studio"}),(0,a.jsx)("option",{value:"1",children:"1"}),(0,a.jsx)("option",{value:"2",children:"2"}),(0,a.jsx)("option",{value:"3",children:"3"}),(0,a.jsx)("option",{value:"4",children:"4"}),(0,a.jsx)("option",{value:"5",children:"5"}),(0,a.jsx)("option",{value:"6+",children:"6+"})]})]})}),(0,a.jsx)(y.Z,{label:"Bathrooms",htmlFor:"bathrooms",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"mr-2 text-gray-400",children:(0,a.jsx)(b.m6D,{className:"h-4 w-4"})}),(0,a.jsxs)("select",{id:"bathrooms",className:"block w-full rounded-lg border border-gray-300 py-2 px-3 text-sm bg-white focus:outline-none focus:ring-primary-500 focus:border-primary-500",...k("bathrooms"),children:[(0,a.jsx)("option",{value:"",children:"Select"}),(0,a.jsx)("option",{value:"1",children:"1"}),(0,a.jsx)("option",{value:"2",children:"2"}),(0,a.jsx)("option",{value:"3",children:"3"}),(0,a.jsx)("option",{value:"4",children:"4"}),(0,a.jsx)("option",{value:"5+",children:"5+"})]})]})}),(0,a.jsx)(y.Z,{label:"Area Size (m\xb2)",htmlFor:"area_size",error:null===(w=E.area_size)||void 0===w?void 0:w.message,children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"mr-2 text-gray-400",children:(0,a.jsx)(b.D7o,{className:"h-4 w-4"})}),(0,a.jsx)(g.Z,{id:"area_size",type:"number",placeholder:"e.g. 150",...k("area_size",{min:{value:0,message:"Area must be positive"}}),error:!!E.area_size})]})})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg mt-2",children:[(0,a.jsx)(y.Z,{label:"Availability",htmlFor:"available",children:(0,a.jsxs)("div",{className:"flex items-center mt-1",children:[(0,a.jsx)("input",{id:"available",type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500",...k("available")}),(0,a.jsx)("label",{htmlFor:"available",className:"ml-2 block text-sm text-gray-700",children:"Available for viewing/purchase"})]})}),_("available")&&(0,a.jsx)("div",{className:"mt-2 pl-6",children:(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"This property will be shown in search results and available for scheduling viewings."})}),!_("available")&&(0,a.jsx)("div",{className:"mt-2 pl-6",children:(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"This property will be hidden from search results and not available for scheduling viewings."})})]}),(0,a.jsx)("div",{className:"bg-blue-50 p-3 rounded-lg mt-4",children:(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)(b.H33,{className:"h-4 w-4 text-blue-500 mt-0.5 mr-2 flex-shrink-0"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-blue-700 font-medium",children:"Pro Tip"}),(0,a.jsx)("p",{className:"text-xs text-blue-600",children:"Adding detailed information about the property helps potential buyers make informed decisions. Be accurate with measurements and include all relevant specifications."})]})]})})]},"details"),"features"===G&&(0,a.jsxs)(l.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:[(0,a.jsxs)("div",{className:"mb-2 pb-2 border-b border-gray-100",children:[(0,a.jsxs)("h2",{className:"text-sm font-semibold text-gray-800 flex items-center",children:[(0,a.jsx)(b.SnF,{className:"mr-2 h-4 w-4 text-primary-500"}),"Property Features"]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Select all the features and amenities this property offers"})]}),(0,a.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-x-4 gap-y-3",children:$.map(e=>(0,a.jsxs)("div",{className:"relative flex items-start",children:[(0,a.jsx)("div",{className:"flex items-center h-5",children:(0,a.jsx)("input",{id:e.id,type:"checkbox",onChange:r=>handleFeatureChange(e.id,r.target.checked),className:"focus:ring-primary-500 h-4 w-4 text-primary-600 border-gray-300 rounded"})}),(0,a.jsxs)("div",{className:"ml-2 flex items-center",children:[e.icon,(0,a.jsx)("label",{htmlFor:e.id,className:"ml-1 text-xs text-gray-700",children:e.label})]})]},e.id))}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg mt-6",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Selected Features"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[Object.entries(_("features")||{}).filter(e=>{let[r,t]=e;return t}).map(e=>{let[r]=e,t=$.find(e=>e.id===r);return t?(0,a.jsxs)("div",{className:"px-2 py-1 bg-primary-50 text-primary-700 rounded-full text-xs flex items-center",children:[t.icon,(0,a.jsx)("span",{className:"ml-1",children:t.label})]},r):null}),0===Object.entries(_("features")||{}).filter(e=>{let[r,t]=e;return t}).length&&(0,a.jsx)("p",{className:"text-xs text-gray-500 italic",children:"No features selected"})]})]})]},"features"),"images"===G&&(0,a.jsxs)(l.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:[(0,a.jsxs)("div",{className:"mb-2 pb-2 border-b border-gray-100",children:[(0,a.jsxs)("h2",{className:"text-sm font-semibold text-gray-800 flex items-center",children:[(0,a.jsx)(b.LFN,{className:"mr-2 h-4 w-4 text-primary-500"}),"Property Images"]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Upload high-quality images to showcase the property"})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsxs)("h3",{className:"text-sm font-medium text-gray-700 mb-2 flex items-center",children:[(0,a.jsx)(b.tBf,{className:"mr-2 h-4 w-4 text-primary-500"}),"Property Images"]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:"Upload high-quality images of the property interior and exterior"}),(0,a.jsx)("input",{ref:K,type:"file",accept:"image/*",multiple:!0,onChange:e=>handleImageChange(e,"property"),className:"hidden"}),(0,a.jsxs)("button",{type:"button",onClick:()=>{var e;return null===(e=K.current)||void 0===e?void 0:e.click()},className:"flex items-center justify-center w-full p-3 border-2 border-dashed border-gray-300 rounded-lg text-sm text-gray-600 hover:text-primary-600 hover:border-primary-300",children:[(0,a.jsx)(b.Yjd,{className:"mr-2 h-4 w-4"}),"Upload Property Images"]}),M.length>0&&(0,a.jsx)("div",{className:"mt-4 grid grid-cols-2 gap-4 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5",children:M.map((e,r)=>(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)("img",{src:e.preview,alt:"Property preview ".concat(r+1),className:"h-24 w-full object-cover rounded-md"}),(0,a.jsx)("button",{type:"button",onClick:()=>removeImage(r,"property"),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 shadow-sm hover:bg-red-600 focus:outline-none",children:(0,a.jsx)(b.q5L,{className:"h-3 w-3"})}),0===r&&(0,a.jsx)("div",{className:"absolute bottom-0 left-0 right-0 bg-primary-500 text-white text-xs text-center py-0.5",children:"Featured"})]},r))})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsxs)("h3",{className:"text-sm font-medium text-gray-700 mb-2 flex items-center",children:[(0,a.jsx)(b.NOg,{className:"mr-2 h-4 w-4 text-primary-500"}),"Master Plan Images"]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:"Upload project master plan images and layouts"}),(0,a.jsx)("input",{ref:W,type:"file",accept:"image/*",multiple:!0,onChange:e=>handleImageChange(e,"master_plan"),className:"hidden"}),(0,a.jsxs)("button",{type:"button",onClick:()=>{var e;return null===(e=W.current)||void 0===e?void 0:e.click()},className:"flex items-center justify-center w-full p-3 border-2 border-dashed border-gray-300 rounded-lg text-sm text-gray-600 hover:text-primary-600 hover:border-primary-300",children:[(0,a.jsx)(b.Yjd,{className:"mr-2 h-4 w-4"}),"Upload Master Plan Images"]}),B.length>0&&(0,a.jsx)("div",{className:"mt-4 grid grid-cols-2 gap-4 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5",children:B.map((e,r)=>(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)("img",{src:e.preview,alt:"Master Plan preview ".concat(r+1),className:"h-24 w-full object-cover rounded-md"}),(0,a.jsx)("button",{type:"button",onClick:()=>removeImage(r,"master_plan"),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 shadow-sm hover:bg-red-600 focus:outline-none",children:(0,a.jsx)(b.q5L,{className:"h-3 w-3"})})]},r))})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsxs)("h3",{className:"text-sm font-medium text-gray-700 mb-2 flex items-center",children:[(0,a.jsx)(b.yG,{className:"mr-2 h-4 w-4 text-primary-500"}),"Compound Images"]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:"Upload images of the compound and amenities"}),(0,a.jsx)("input",{ref:X,type:"file",accept:"image/*",multiple:!0,onChange:e=>handleImageChange(e,"compound"),className:"hidden"}),(0,a.jsxs)("button",{type:"button",onClick:()=>{var e;return null===(e=X.current)||void 0===e?void 0:e.click()},className:"flex items-center justify-center w-full p-3 border-2 border-dashed border-gray-300 rounded-lg text-sm text-gray-600 hover:text-primary-600 hover:border-primary-300",children:[(0,a.jsx)(b.Yjd,{className:"mr-2 h-4 w-4"}),"Upload Compound Images"]}),q.length>0&&(0,a.jsx)("div",{className:"mt-4 grid grid-cols-2 gap-4 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5",children:q.map((e,r)=>(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)("img",{src:e.preview,alt:"Compound preview ".concat(r+1),className:"h-24 w-full object-cover rounded-md"}),(0,a.jsx)("button",{type:"button",onClick:()=>removeImage(r,"compound"),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 shadow-sm hover:bg-red-600 focus:outline-none",children:(0,a.jsx)(b.q5L,{className:"h-3 w-3"})})]},r))})]})]}),(0,a.jsxs)("div",{className:"mt-6 bg-white p-4 rounded-lg border border-gray-200",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Upload Summary"}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"bg-gray-50 p-2 rounded-md text-center",children:[(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"Property Images"}),(0,a.jsx)("p",{className:"text-lg font-semibold text-primary-600",children:M.length})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-2 rounded-md text-center",children:[(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"Master Plan"}),(0,a.jsx)("p",{className:"text-lg font-semibold text-primary-600",children:B.length})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-2 rounded-md text-center",children:[(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"Compound"}),(0,a.jsx)("p",{className:"text-lg font-semibold text-primary-600",children:q.length})]})]})]}),F&&(M.length>0||B.length>0||q.length>0)&&(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsxs)("div",{className:"relative pt-1",children:[(0,a.jsxs)("div",{className:"flex mb-2 items-center justify-between",children:[(0,a.jsx)("div",{children:(0,a.jsx)("span",{className:"text-xs font-medium inline-block py-1 px-2 uppercase rounded-full text-primary-600 bg-primary-50",children:"Uploading images"})}),(0,a.jsx)("div",{className:"text-right",children:(0,a.jsxs)("span",{className:"text-xs font-medium inline-block text-primary-600",children:[V,"%"]})})]}),(0,a.jsx)("div",{className:"overflow-hidden h-2 mb-4 text-xs flex rounded bg-primary-50",children:(0,a.jsx)("div",{style:{width:"".concat(V,"%")},className:"shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-primary-500"})})]})})]},"images")]})}),(0,a.jsxs)("div",{className:"px-4 py-3 bg-gray-50 flex justify-between",children:[(0,a.jsx)(x.Z,{type:"button",variant:"light",size:"sm",onClick:e=>{e.preventDefault(),"basic"===G?C.back():goToPrevSection()},children:"basic"===G?"Cancel":"Previous"}),"images"===G?(0,a.jsx)(x.Z,{type:"submit",variant:"gradient",size:"sm",leftIcon:(0,a.jsx)(b.mW3,{}),loading:F,disabled:F,children:"Create Property"}):(0,a.jsx)(x.Z,{type:"button",variant:"primary",size:"sm",onClick:e=>{e.preventDefault(),goToNextSection()},disabled:!("basic"===G?!!_("title")&&!!_("property_type")&&!!_("price"):"project"!==G||!!_("location")&&!!_("city")),children:"Continue"})]})]})})]})}},4734:function(e,r,t){"use strict";t.d(r,{Z:function(){return Button}});var a=t(7437);t(2265);var s=t(1396),o=t.n(s);function LoadingSpinner(e){let{size:r="medium",color:t="primary",className:s=""}=e;return(0,a.jsx)("div",{className:"flex justify-center items-center ".concat(s),children:(0,a.jsx)("div",{className:"\n          rounded-full\n          animate-spin\n          ".concat({small:"h-4 w-4 border-2",medium:"h-8 w-8 border-2",large:"h-12 w-12 border-3"}[r],"\n          ").concat({primary:"border-primary-300 border-t-primary",white:"border-gray-200 border-t-white",gray:"border-gray-200 border-t-gray-600"}[t],"\n        ")})})}function Button(e){let{children:r,variant:t="primary",size:s="md",fullWidth:i=!1,href:n,loading:l=!1,outline:c=!1,rounded:d=!0,glass:m=!1,animation:p="none",className:u="",leftIcon:h,rightIcon:x,...g}=e,y=g.disabled?"opacity-60 cursor-not-allowed":"transform active:scale-[0.98] transition-transform",b="\n    inline-flex items-center justify-center\n    font-medium\n    transition-all duration-200\n    focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500\n    ".concat({primary:c?"border-2 border-primary-500 text-primary-600 hover:bg-primary-50 active:bg-primary-100":"bg-primary-600 hover:bg-primary-700 text-white shadow-sm",secondary:c?"border-2 border-gray-400 text-gray-700 hover:bg-gray-50 active:bg-gray-100":"bg-gray-600 hover:bg-gray-700 text-white shadow-sm",success:c?"border-2 border-green-500 text-green-600 hover:bg-green-50 active:bg-green-100":"bg-green-600 hover:bg-green-700 text-white shadow-sm",danger:c?"border-2 border-red-500 text-red-600 hover:bg-red-50 active:bg-red-100":"bg-red-600 hover:bg-red-700 text-white shadow-sm",warning:c?"border-2 border-amber-500 text-amber-600 hover:bg-amber-50 active:bg-amber-100":"bg-amber-500 hover:bg-amber-600 text-white shadow-sm",info:c?"border-2 border-blue-400 text-blue-500 hover:bg-blue-50 active:bg-blue-100":"bg-blue-500 hover:bg-blue-600 text-white shadow-sm",light:c?"border-2 border-gray-200 text-gray-600 hover:bg-gray-50 active:bg-gray-100":"bg-gray-100 hover:bg-gray-200 text-gray-800",dark:c?"border-2 border-gray-700 text-gray-800 hover:bg-gray-800 hover:text-white":"bg-gray-800 hover:bg-gray-900 text-white shadow-sm",outline:"border-2 border-gray-300 text-gray-700 hover:border-primary-500 hover:text-primary-600 bg-white",gradient:"bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 text-white shadow-sm"}[t],"\n    ").concat({xs:"text-xs px-2.5 py-1.5 gap-1",sm:"text-sm px-3 py-2 gap-1.5",md:"text-base px-4 py-2.5 gap-2",lg:"text-lg px-5 py-3 gap-2",xl:"text-xl px-6 py-3.5 gap-2.5"}[s],"\n    ").concat(i?"w-full":"","\n    ").concat(d?"rounded-full":"rounded-lg","\n    ").concat(m?"backdrop-blur-sm bg-opacity-80 shadow-sm":"","\n    ").concat({none:"",pulse:"animate-pulse",bounce:"animate-bounce"}[p],"\n    ").concat(y,"\n    ").concat(u,"\n  ");return n?(0,a.jsxs)(o(),{href:n,className:b,children:[h&&(0,a.jsx)("span",{className:"flex items-center",children:h}),r,x&&(0,a.jsx)("span",{className:"flex items-center",children:x})]}):(0,a.jsxs)("button",{className:b,disabled:l||g.disabled,...g,children:[l?(0,a.jsx)(LoadingSpinner,{size:"small",color:c?"primary":"white"}):h?(0,a.jsx)("span",{className:"flex items-center",children:h}):null,(0,a.jsx)("span",{children:r}),x&&!l&&(0,a.jsx)("span",{className:"flex items-center",children:x})]})}},2595:function(e,r,t){"use strict";t.d(r,{Z:function(){return Card}});var a=t(7437);function Card(e){let{children:r,className:t="",padding:s="small",shadow:o="small",rounded:i="medium",border:n=!1,hover:l=!1,clickable:c=!1}=e;return(0,a.jsx)("div",{className:"\n        bg-white\n        ".concat({none:"p-0",xs:"p-2",small:"p-3",medium:"p-4",large:"p-5"}[s],"\n        ").concat({none:"",small:"shadow-sm",medium:"shadow",large:"shadow-lg"}[o],"\n        ").concat({none:"rounded-none",small:"rounded-md",medium:"rounded-lg",large:"rounded-xl"}[i],"\n        ").concat(n?"border border-gray-100":"","\n        ").concat(l?"transition-all duration-200 hover:shadow-md hover:translate-y-[-1px]":"","\n        ").concat(c?"cursor-pointer active:scale-[0.99] active:shadow-inner transition-transform":"","\n        ").concat(t,"\n      "),children:r})}t(2265)},6814:function(e,r,t){"use strict";t.d(r,{Z:function(){return FormField}});var a=t(7437),s=t(2265),o=t(8611);function FormField(e){let{children:r,label:t,htmlFor:i,error:n,hint:l,className:c="",required:d=!1,span:m="full",helpText:p,showHelpIcon:u=!1,animate:h=!1}=e,[x,g]=s.useState(!1),y={full:"col-span-12",half:"col-span-12 md:col-span-6",third:"col-span-12 md:col-span-4",quarter:"col-span-12 md:col-span-3"},FieldContent=()=>(0,a.jsxs)(a.Fragment,{children:[t&&(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1.5",children:[(0,a.jsxs)("label",{htmlFor:i,className:"block text-sm font-medium text-gray-700",children:[t,d&&(0,a.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),u&&p&&(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("button",{type:"button",className:"text-gray-400 hover:text-gray-600 focus:outline-none",onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),onClick:()=>g(!x),children:(0,a.jsx)("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})})}),x&&(0,a.jsx)("div",{className:"absolute z-10 right-0 mt-2 w-64 bg-white rounded-lg shadow-lg p-3 text-xs text-gray-600 border border-gray-200",children:p})]})]}),r,l&&!n&&(0,a.jsx)("p",{className:"mt-1.5 text-xs text-gray-500",children:l}),n&&(0,a.jsxs)(o.E.p,{initial:h?{opacity:0,y:-10}:void 0,animate:h?{opacity:1,y:0}:void 0,className:"mt-1.5 text-xs text-red-600 flex items-center",children:[(0,a.jsx)("svg",{className:"h-3 w-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),n]}),p&&!u&&(0,a.jsx)("p",{className:"mt-1.5 text-xs text-gray-500",children:p})]});return h?(0,a.jsx)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"mb-4 ".concat(y[m]," ").concat(c),children:(0,a.jsx)(FieldContent,{})}):(0,a.jsx)("div",{className:"mb-4 ".concat(y[m]," ").concat(c),children:(0,a.jsx)(FieldContent,{})})}},654:function(e,r,t){"use strict";var a=t(7437),s=t(2265);let o=(0,s.forwardRef)((e,r)=>{let{error:t=!1,errorMessage:o,leftIcon:i,rightIcon:n,className:l="",containerClassName:c="",clickableRightIcon:d=!1,onRightIconClick:m,label:p,helperText:u,variant:h="default",size:x="md",isRequired:g=!1,...y}=e,[b,f]=(0,s.useState)(!1),v="underlined"===h?"py-2 ".concat(n?"pr-6":""):"".concat(i?"pl-10":"pl-4"," ").concat(n?"pr-10":"pr-4"," ").concat({xs:"py-1 text-xs",sm:"py-1.5 text-sm",md:"py-2 text-sm",lg:"py-3 text-base"}[x]);return(0,a.jsxs)("div",{className:"relative ".concat(c),children:[p&&(0,a.jsxs)("label",{htmlFor:y.id,className:"block text-sm font-medium text-gray-700 mb-1 flex items-center",children:[p,g&&(0,a.jsx)("span",{className:"ml-1 text-danger-500",children:"*"})]}),(0,a.jsxs)("div",{className:"relative rounded-md",children:[i&&(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsx)("span",{className:"".concat(t?"text-danger-500":"text-gray-500"," sm:text-sm"),children:i})}),(0,a.jsx)("input",{ref:r,className:"\n            block w-full border rounded-lg \n            transition-all duration-200\n            focus:outline-none\n            ".concat(t?"border-danger-300 text-danger-900 placeholder-danger-300 focus:ring-danger-500 focus:border-danger-500":({default:"border-gray-300 ".concat(b?"border-primary-500 ring-2 ring-primary-50":"hover:border-gray-400"," bg-white shadow-sm"),filled:"bg-gray-50 border-transparent ".concat(b?"border-primary-500 ring-2 ring-primary-50":"hover:bg-gray-100"),outline:"bg-transparent border-gray-300 ".concat(b?"border-primary-500 ring-2 ring-primary-50":"hover:border-gray-400"),underlined:"border-t-0 border-l-0 border-r-0 border-b-2 rounded-none px-0 ".concat(b?"border-primary-500":"border-gray-300 hover:border-gray-400"),glass:"backdrop-blur-sm bg-white bg-opacity-70 border-white border-opacity-20 shadow-sm ".concat(b?"ring-2 ring-white ring-opacity-50":"hover:bg-opacity-80")})[h],"\n            ").concat(v,"\n            ").concat(y.disabled?"bg-gray-100 cursor-not-allowed opacity-70":"","\n            ").concat(l,"\n          "),onFocus:e=>{f(!0),y.onFocus&&y.onFocus(e)},onBlur:e=>{f(!1),y.onBlur&&y.onBlur(e)},...y}),n&&(0,a.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center ".concat(d?"cursor-pointer":"pointer-events-none"),onClick:d&&m?m:void 0,children:(0,a.jsx)("span",{className:"".concat(t?"text-danger-500":"text-gray-500"," sm:text-sm transition-colors ").concat(d?"hover:text-primary-500 active:text-primary-600":""),children:n})})]}),(u||o)&&(0,a.jsx)("p",{className:"mt-1 text-xs ".concat(t?"text-danger-600":"text-gray-500"),children:t?o:u})]})});o.displayName="Input",r.Z=o},5243:function(e,r,t){"use strict";t.d(r,{a:function(){return useAuth}});var a=t(4523);function useAuth(){var e;let r=(0,a.useAuth)(),t=(null===(e=r.user)||void 0===e?void 0:e.role)||"customer",signIn=async(e,t)=>{try{return await r.signIn(e,t),{error:null}}catch(e){return{error:e}}},signUp=async(e,t,a)=>{try{return await r.signUp(e,t,a),{error:null}}catch(e){return{error:e}}};return{...r,role:t,signIn,signUp}}},4732:function(e,r,t){"use strict";t.d(r,{G3:function(){return createProperty}});let a="bigdealegypt.up.railway.app/api",getAllProperties=async()=>{try{let r=await fetch("".concat(a,"/properties"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!r.ok){var e;let t=await r.json();throw Error((null===(e=t.error)||void 0===e?void 0:e.message)||"Failed to fetch properties")}let t=await r.json();return t.properties||[]}catch(e){throw console.error("Get properties error:",e),e}},getPropertyById=async e=>{try{let t=await fetch("".concat(a,"/properties/").concat(e),{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok){var r;let e=await t.json();throw Error((null===(r=e.error)||void 0===r?void 0:r.message)||"Failed to fetch property")}let s=await t.json();return s.property}catch(e){throw console.error("Get property error:",e),e}},getSimilarProperties=async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;try{let s=await fetch("".concat(a,"/properties/").concat(e,"/similar?limit=").concat(r),{method:"GET",headers:{"Content-Type":"application/json"}});if(!s.ok){var t;let e=await s.json();throw Error((null===(t=e.error)||void 0===t?void 0:t.message)||"Failed to fetch similar properties")}let o=await s.json();return o.properties||[]}catch(e){throw console.error("Get similar properties error:",e),e}},incrementPropertyViews=async(e,r)=>{try{let s=await fetch("".concat(a,"/properties/").concat(e,"/increment-views"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}});if(!s.ok){var t;let e=await s.json();throw Error((null===(t=e.error)||void 0===t?void 0:t.message)||"Failed to increment property views")}}catch(e){throw console.error("Increment property views error:",e),e}},getPropertyImages=async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{let s="".concat(a,"/properties/").concat(e,"/images");r&&(s+="?type=".concat(r));let o=await fetch(s,{method:"GET",headers:{"Content-Type":"application/json"}});if(!o.ok){var t;let e=await o.json();throw Error((null===(t=e.error)||void 0===t?void 0:t.message)||"Failed to fetch property images")}let i=await o.json();return i.images||[]}catch(e){throw console.error("Get property images error:",e),e}},createProperty=async(e,r)=>{try{console.log("Creating property with data:",r);let s=await fetch("".concat(a,"/properties"),{method:"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(r)});if(!s.ok){let e;let r=await s.text();try{var t;let a=JSON.parse(r);e=(null===(t=a.error)||void 0===t?void 0:t.message)||"Failed to create property"}catch(t){e=r||"Failed with status ".concat(s.status)}throw Error(e)}return await s.json()}catch(e){throw console.error("Create property error:",e),e}},uploadPropertyImages=async(e,r,t)=>{try{let o=await fetch("".concat(a,"/properties/").concat(r,"/images"),{method:"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify({images:t})});if(!o.ok){var s;let e=await o.json();throw Error((null===(s=e.error)||void 0===s?void 0:s.message)||"Failed to upload property images")}return await o.json()}catch(e){throw console.error("Upload property images error:",e),e}},deletePropertyImage=async(e,r)=>{try{let s=await fetch("".concat(a,"/properties/images/").concat(r),{method:"DELETE",headers:{Authorization:"Bearer ".concat(e)}});if(!s.ok){var t;let e=await s.json();throw Error((null===(t=e.error)||void 0===t?void 0:t.message)||"Failed to delete property image")}return await s.json()}catch(e){throw console.error("Delete property image error:",e),e}},updateProperty=async(e,r,t)=>{try{let o=await fetch("".concat(a,"/properties/").concat(r),{method:"PUT",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(t)});if(!o.ok){var s;let e=await o.json();throw Error((null===(s=e.error)||void 0===s?void 0:s.message)||"Failed to update property")}return await o.json()}catch(e){throw console.error("Update property error:",e),e}},uploadImage=async function(e,r){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};try{let o=new FormData;o.append("image",r);let i=await fetch("".concat(a,"/upload/image"),{method:"POST",headers:{Authorization:"Bearer ".concat(e)},body:o,onUploadProgress:e=>{let r=Math.round(100*e.loaded/e.total);t(r)}});if(!i.ok){var s;let e=await i.json();throw Error((null===(s=e.error)||void 0===s?void 0:s.message)||"Failed to upload image")}let n=await i.json();return n.url}catch(e){throw console.error("Upload image error:",e),e}};r.ZP={getAllProperties,getPropertyById,getSimilarProperties,incrementPropertyViews,getPropertyImages,createProperty,uploadPropertyImages,deletePropertyImage,updateProperty,uploadImage}},4523:function(e,r,t){"use strict";t.r(r),t.d(r,{AuthProvider:function(){return AuthProvider},default:function(){return c},useAuth:function(){return useAuth}});var a=t(7437),s=t(2265);let o="bigdealegypt.up.railway.app/api",signIn=async(e,r)=>{try{let a=await fetch("".concat(o,"/auth/signin"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:r}),credentials:"include"});if(!a.ok){var t;let e=await a.json();throw Error((null===(t=e.error)||void 0===t?void 0:t.message)||"Authentication failed")}return await a.json()}catch(e){throw console.error("Sign in error:",e),e}},signUp=async(e,r,t)=>{try{let s=await fetch("".concat(o,"/auth/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:r,name:t})});if(!s.ok){var a;let e=await s.json();throw Error((null===(a=e.error)||void 0===a?void 0:a.message)||"Registration failed")}return await s.json()}catch(e){throw console.error("Sign up error:",e),e}},signOut=async()=>{try{let r=await fetch("".concat(o,"/auth/signout"),{method:"POST",credentials:"include"});if(!r.ok){var e;let t=await r.json();throw Error((null===(e=t.error)||void 0===e?void 0:e.message)||"Sign out failed")}return await r.json()}catch(e){throw console.error("Sign out error:",e),e}},getSession=async e=>{try{let t=await fetch("".concat(o,"/auth/session"),{method:"GET",headers:{Authorization:"Bearer ".concat(e)},credentials:"include"});if(!t.ok){var r;let e=await t.json();throw Error((null===(r=e.error)||void 0===r?void 0:r.message)||"Failed to retrieve session")}return await t.json()}catch(e){throw console.error("Get session error:",e),e}},refreshToken=async()=>{try{let r=await fetch("".concat(o,"/auth/refresh-token"),{method:"POST",credentials:"include"});if(!r.ok){var e;let t=await r.json();throw Error((null===(e=t.error)||void 0===e?void 0:e.message)||"Failed to refresh token")}return await r.json()}catch(e){throw console.error("Refresh token error:",e),e}},getUserProfile=async(e,r)=>{try{let a=await fetch("".concat(o,"/auth/profile/").concat(e),{method:"GET",headers:{Authorization:"Bearer ".concat(r)}});if(!a.ok){var t;let e=await a.json();throw Error((null===(t=e.error)||void 0===t?void 0:t.message)||"Failed to get user profile")}return await a.json()}catch(e){throw console.error("Get user profile error:",e),e}};var i={signIn,signUp,signOut,getSession,refreshToken,getUserProfile},n=t(4033);let l=(0,s.createContext)(void 0),AuthProvider=e=>{let{children:r}=e,[t,o]=(0,s.useState)(null),[c,d]=(0,s.useState)(null),[m,p]=(0,s.useState)(!0),[u,h]=(0,s.useState)(null),x=(0,n.useRouter)();(0,s.useEffect)(()=>{if(c){let e=new Date(c.expires_at).getTime(),r=Date.now(),t=e-r;if(t<3e5){refreshSession();return}let a=setTimeout(()=>{refreshSession()},t-3e5);return()=>clearTimeout(a)}},[c]),(0,s.useEffect)(()=>{let initAuth=async()=>{p(!0),h(null);try{let e=localStorage.getItem("access_token");if(!e){p(!1);return}let r=await i.getSession(e);(null==r?void 0:r.user)&&(null==r?void 0:r.session)?(o(r.user),d(r.session),localStorage.setItem("access_token",r.session.access_token)):localStorage.removeItem("access_token")}catch(e){console.error("Auth initialization error:",e),localStorage.removeItem("access_token"),h("Authentication error. Please login again.")}finally{p(!1)}};initAuth()},[]);let signIn=async(e,r)=>{p(!0),h(null);try{let t=await i.signIn(e,r);(null==t?void 0:t.user)&&(null==t?void 0:t.session)&&(o(t.user),d(t.session),localStorage.setItem("access_token",t.session.access_token),x.push("/dashboard"))}catch(e){throw console.error("Sign in error:",e),h(e instanceof Error?e.message:"Authentication failed"),e}finally{p(!1)}},signUp=async(e,r,t)=>{p(!0),h(null);try{let a=await i.signUp(e,r,t);(null==a?void 0:a.user)&&x.push("/login?registered=true")}catch(e){throw console.error("Sign up error:",e),h(e instanceof Error?e.message:"Registration failed"),e}finally{p(!1)}},signOut=async()=>{p(!0);try{await i.signOut(),o(null),d(null),localStorage.removeItem("access_token"),x.push("/")}catch(e){console.error("Sign out error:",e),o(null),d(null),localStorage.removeItem("access_token"),x.push("/")}finally{p(!1)}},refreshSession=async()=>{if(!m)try{let e=await i.refreshToken();(null==e?void 0:e.user)&&(null==e?void 0:e.session)?(o(e.user),d(e.session),localStorage.setItem("access_token",e.session.access_token)):(o(null),d(null),localStorage.removeItem("access_token"),x.push("/login"))}catch(e){console.error("Session refresh error:",e),o(null),d(null),localStorage.removeItem("access_token"),x.push("/login")}};return(0,a.jsx)(l.Provider,{value:{user:t,session:c,loading:m,error:u,isAuthenticated:!!t,signIn,signUp,signOut,refreshSession},children:r})},useAuth=()=>{let e=(0,s.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e};var c=l},8960:function(e){!function(){var r={229:function(e){var r,t,a,s=e.exports={};function defaultSetTimout(){throw Error("setTimeout has not been defined")}function defaultClearTimeout(){throw Error("clearTimeout has not been defined")}function runTimeout(e){if(r===setTimeout)return setTimeout(e,0);if((r===defaultSetTimout||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}function runClearTimeout(e){if(t===clearTimeout)return clearTimeout(e);if((t===defaultClearTimeout||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(e);try{return t(e)}catch(r){try{return t.call(null,e)}catch(r){return t.call(this,e)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){r=defaultSetTimout}try{t="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){t=defaultClearTimeout}}();var o=[],i=!1,n=-1;function cleanUpNextTick(){i&&a&&(i=!1,a.length?o=a.concat(o):n=-1,o.length&&drainQueue())}function drainQueue(){if(!i){var e=runTimeout(cleanUpNextTick);i=!0;for(var r=o.length;r;){for(a=o,o=[];++n<r;)a&&a[n].run();n=-1,r=o.length}a=null,i=!1,runClearTimeout(e)}}function Item(e,r){this.fun=e,this.array=r}function noop(){}s.nextTick=function(e){var r=Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)r[t-1]=arguments[t];o.push(new Item(e,r)),1!==o.length||i||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=noop,s.addListener=noop,s.once=noop,s.off=noop,s.removeListener=noop,s.removeAllListeners=noop,s.emit=noop,s.prependListener=noop,s.prependOnceListener=noop,s.listeners=function(e){return[]},s.binding=function(e){throw Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw Error("process.chdir is not supported")},s.umask=function(){return 0}}},t={};function __nccwpck_require__(e){var a=t[e];if(void 0!==a)return a.exports;var s=t[e]={exports:{}},o=!0;try{r[e](s,s.exports,__nccwpck_require__),o=!1}finally{o&&delete t[e]}return s.exports}__nccwpck_require__.ab="//";var a=__nccwpck_require__(229);e.exports=a}()}},function(e){e.O(0,[2438,8920,8611,9540,5242,2971,2472,1744],function(){return e(e.s=2703)}),_N_E=e.O()}]);