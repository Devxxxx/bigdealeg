(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2626],{3673:function(e,r,s){Promise.resolve().then(s.bind(s,7355))},7355:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return LoginPage}});var t=s(7437),a=s(2265),i=s(1396),n=s.n(i),l=s(4033),o=s(8611),c=s(8920),d=s(1865),m=s(5243);function LoginPage(){(0,l.useRouter)();let{signIn:e}=(0,m.a)(),[r,s]=(0,a.useState)(!1),[i,u]=(0,a.useState)(!1),[h,x]=(0,a.useState)(""),{register:f,handleSubmit:g,formState:{errors:p}}=(0,d.cI)({defaultValues:{email:"",password:"",rememberMe:!1}}),onSubmit=async r=>{u(!0),x("");try{let{error:s}=await e(r.email,r.password);if(s){let e=s instanceof Error?s.message:"Invalid email or password. Please try again.";x(e)}}catch(e){x("An unexpected error occurred. Please try again later."),console.error("Login error:",e)}finally{u(!1)}};return(0,t.jsxs)("div",{className:"min-h-screen bg-white flex flex-col lg:flex-row overflow-hidden",children:[(0,t.jsxs)("div",{className:"w-full lg:w-1/2 flex flex-col justify-center py-12 px-4 sm:px-6 lg:px-12 xl:px-24 relative",children:[(0,t.jsx)("div",{className:"absolute inset-0 z-0 opacity-5",children:(0,t.jsx)("div",{className:"absolute inset-0 bg-dot-pattern text-primary-600"})}),(0,t.jsxs)("div",{className:"z-10 relative",children:[(0,t.jsx)("div",{className:"text-center mb-10",children:(0,t.jsxs)(n(),{href:"/",className:"inline-flex items-center",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-primary-500 to-primary-700 rounded-xl flex items-center justify-center mr-3 shadow-sm",children:(0,t.jsx)("span",{className:"text-white font-bold text-base",children:"BD"})}),(0,t.jsx)("span",{className:"text-xl font-display font-semibold text-gradient-primary",children:"BigDealEgypt"})]})}),(0,t.jsxs)(o.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[(0,t.jsxs)("div",{className:"mb-8 text-center",children:[(0,t.jsx)("h2",{className:"text-3xl font-display font-bold text-gray-900 mb-2",children:"Welcome back!"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Sign in to your account to continue your property journey"})]}),h&&(0,t.jsxs)(o.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-6 p-3 bg-danger-50 border border-danger-200 rounded-lg flex items-start",children:[(0,t.jsx)(c.bcx,{className:"mt-0.5 mr-2 text-danger-500 flex-shrink-0"}),(0,t.jsx)("p",{className:"text-sm text-danger-800",children:h})]}),(0,t.jsxs)("form",{className:"space-y-6",onSubmit:g(onSubmit),children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,t.jsx)(c.Imn,{className:"h-5 w-5 text-gray-400"})}),(0,t.jsx)("input",{id:"email",type:"email",placeholder:"you@example.com",className:"block w-full pl-10 pr-3 py-3 border ".concat(p.email?"border-danger-300":"border-gray-300"," rounded-lg shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"),...f("email",{required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}})})]}),p.email&&(0,t.jsx)("p",{className:"mt-2 text-sm text-danger-600",children:p.email.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),(0,t.jsx)(n(),{href:"/forgot-password",className:"text-sm text-primary-600 hover:text-primary-500",children:"Forgot password?"})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,t.jsx)(c.UIZ,{className:"h-5 w-5 text-gray-400"})}),(0,t.jsx)("input",{id:"password",type:r?"text":"password",placeholder:"••••••••",className:"block w-full pl-10 pr-10 py-3 border ".concat(p.password?"border-danger-300":"border-gray-300"," rounded-lg shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"),...f("password",{required:"Password is required"})}),(0,t.jsx)("button",{type:"button",onClick:()=>s(!r),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:r?(0,t.jsx)(c.rzC,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):(0,t.jsx)(c.rDJ,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]}),p.password&&(0,t.jsx)("p",{className:"mt-2 text-sm text-danger-600",children:p.password.message})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("input",{id:"remember_me",type:"checkbox",className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded",...f("rememberMe")}),(0,t.jsx)("label",{htmlFor:"remember_me",className:"ml-2 block text-sm text-gray-700",children:"Remember me"})]}),(0,t.jsx)("div",{children:(0,t.jsx)("button",{type:"submit",className:"w-full flex justify-center items-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors",disabled:i,children:i?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Signing in..."]}):(0,t.jsx)(t.Fragment,{children:"Sign in"})})})]}),(0,t.jsxs)("div",{className:"mt-10",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,t.jsx)("div",{className:"w-full border-t border-gray-200"})}),(0,t.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,t.jsx)("span",{className:"px-2 bg-white text-gray-500",children:"Or continue with"})})]}),(0,t.jsxs)("div",{className:"mt-6 grid grid-cols-2 gap-3",children:[(0,t.jsxs)("button",{type:"button",className:"w-full flex justify-center items-center px-4 py-2.5 border border-gray-300 shadow-sm text-sm font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:[(0,t.jsx)("svg",{className:"h-5 w-5 mr-2",viewBox:"0 0 24 24",children:(0,t.jsxs)("g",{transform:"matrix(1, 0, 0, 1, 27.009001, -39.238998)",children:[(0,t.jsx)("path",{fill:"#4285F4",d:"M -3.264 51.509 C -3.264 50.719 -3.334 49.969 -3.454 49.239 L -14.754 49.239 L -14.754 53.749 L -8.284 53.749 C -8.574 55.229 -9.424 56.479 -10.684 57.329 L -10.684 60.329 L -6.824 60.329 C -4.564 58.239 -3.264 55.159 -3.264 51.509 Z"}),(0,t.jsx)("path",{fill:"#34A853",d:"M -14.754 63.239 C -11.514 63.239 -8.804 62.159 -6.824 60.329 L -10.684 57.329 C -11.764 58.049 -13.134 58.489 -14.754 58.489 C -17.884 58.489 -20.534 56.379 -21.484 53.529 L -25.464 53.529 L -25.464 56.619 C -23.494 60.539 -19.444 63.239 -14.754 63.239 Z"}),(0,t.jsx)("path",{fill:"#FBBC05",d:"M -21.484 53.529 C -21.734 52.809 -21.864 52.039 -21.864 51.239 C -21.864 50.439 -21.724 49.669 -21.484 48.949 L -21.484 45.859 L -25.464 45.859 C -26.284 47.479 -26.754 49.299 -26.754 51.239 C -26.754 53.179 -26.284 54.999 -25.464 56.619 L -21.484 53.529 Z"}),(0,t.jsx)("path",{fill:"#EA4335",d:"M -14.754 43.989 C -12.984 43.989 -11.404 44.599 -10.154 45.789 L -6.734 42.369 C -8.804 40.429 -11.514 39.239 -14.754 39.239 C -19.444 39.239 -23.494 41.939 -25.464 45.859 L -21.484 48.949 C -20.534 46.099 -17.884 43.989 -14.754 43.989 Z"})]})}),"Google"]}),(0,t.jsxs)("button",{type:"button",className:"w-full flex justify-center items-center px-4 py-2.5 border border-gray-300 shadow-sm text-sm font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:[(0,t.jsx)("svg",{className:"h-5 w-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{d:"M6.29 18.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0020 3.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.073 4.073 0 01.8 7.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 010 16.407a11.615 11.615 0 006.29 1.84"})}),"Twitter"]})]})]}),(0,t.jsxs)("p",{className:"mt-8 text-center text-sm text-gray-600",children:["Don't have an account?"," ",(0,t.jsx)(n(),{href:"/register",className:"font-medium text-primary-600 hover:text-primary-500",children:"Sign up now"})]})]})]})]}),(0,t.jsxs)("div",{className:"hidden lg:block lg:w-1/2 relative bg-primary-600",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-primary-600 to-primary-900 opacity-90 z-10"}),(0,t.jsx)("img",{alt:"Modern property interior",src:"https://images.unsplash.com/photo-1600607687939-ce8a6c25118c?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2053&q=80",className:"absolute inset-0 h-full w-full object-cover"}),(0,t.jsx)("div",{className:"absolute inset-0 z-20 flex flex-col justify-center p-12",children:(0,t.jsxs)(o.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.7,delay:.3},className:"text-white",children:[(0,t.jsx)("h2",{className:"text-4xl font-display font-bold mb-6",children:"Find Your Perfect Property in Egypt"}),(0,t.jsx)("p",{className:"text-xl mb-8 text-white/90",children:"Connect directly with property owners, no middlemen involved"}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-start",children:[(0,t.jsx)("div",{className:"flex-shrink-0 flex items-center justify-center h-8 w-8 rounded-full bg-primary-400 bg-opacity-30",children:(0,t.jsx)(c.UgA,{className:"h-5 w-5 text-white"})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"Save on Broker Fees"}),(0,t.jsx)("p",{className:"mt-1 text-white/80",children:"Skip the broker fees and save up to 2.5% on your property purchase"})]})]}),(0,t.jsxs)("div",{className:"flex items-start",children:[(0,t.jsx)("div",{className:"flex-shrink-0 flex items-center justify-center h-8 w-8 rounded-full bg-primary-400 bg-opacity-30",children:(0,t.jsx)(c.UgA,{className:"h-5 w-5 text-white"})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"Exclusive Cashback"}),(0,t.jsx)("p",{className:"mt-1 text-white/80",children:"Receive cashback rewards on successful property purchases"})]})]}),(0,t.jsxs)("div",{className:"flex items-start",children:[(0,t.jsx)("div",{className:"flex-shrink-0 flex items-center justify-center h-8 w-8 rounded-full bg-primary-400 bg-opacity-30",children:(0,t.jsx)(c.UgA,{className:"h-5 w-5 text-white"})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"AI-Powered Matching"}),(0,t.jsx)("p",{className:"mt-1 text-white/80",children:"Our AI technology finds properties that perfectly match your requirements"})]})]})]}),(0,t.jsxs)("div",{className:"mt-10 rounded-xl bg-white bg-opacity-10 backdrop-blur-sm p-5 border border-white border-opacity-20",children:[(0,t.jsx)("p",{className:"italic text-white/90",children:'"BigDealEgypt helped me find the perfect apartment in New Cairo and saved me over 15,000 EGP in broker fees! The process was easy and transparent."'}),(0,t.jsxs)("div",{className:"mt-4 flex items-center",children:[(0,t.jsx)("div",{className:"h-10 w-10 rounded-full bg-white/25 flex items-center justify-center text-white font-medium",children:"AM"}),(0,t.jsxs)("div",{className:"ml-3",children:[(0,t.jsx)("p",{className:"text-white font-medium",children:"Ahmed Mohamed"}),(0,t.jsx)("p",{className:"text-sm text-white/70",children:"New Cairo"})]})]})]})]})})]})]})}},5243:function(e,r,s){"use strict";s.d(r,{a:function(){return useAuth}});var t=s(4523);function useAuth(){var e;let r=(0,t.useAuth)(),s=(null===(e=r.user)||void 0===e?void 0:e.role)||"customer",signIn=async(e,s)=>{try{return await r.signIn(e,s),{error:null}}catch(e){return{error:e}}},signUp=async(e,s,t)=>{try{return await r.signUp(e,s,t),{error:null}}catch(e){return{error:e}}};return{...r,role:s,signIn,signUp}}},4523:function(e,r,s){"use strict";s.r(r),s.d(r,{AuthProvider:function(){return AuthProvider},default:function(){return c},useAuth:function(){return useAuth}});var t=s(7437),a=s(2265);let i="bigdealegypt.up.railway.app/api",signIn=async(e,r)=>{try{let t=await fetch("".concat(i,"/auth/signin"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:r}),credentials:"include"});if(!t.ok){var s;let e=await t.json();throw Error((null===(s=e.error)||void 0===s?void 0:s.message)||"Authentication failed")}return await t.json()}catch(e){throw console.error("Sign in error:",e),e}},signUp=async(e,r,s)=>{try{let a=await fetch("".concat(i,"/auth/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:r,name:s})});if(!a.ok){var t;let e=await a.json();throw Error((null===(t=e.error)||void 0===t?void 0:t.message)||"Registration failed")}return await a.json()}catch(e){throw console.error("Sign up error:",e),e}},signOut=async()=>{try{let r=await fetch("".concat(i,"/auth/signout"),{method:"POST",credentials:"include"});if(!r.ok){var e;let s=await r.json();throw Error((null===(e=s.error)||void 0===e?void 0:e.message)||"Sign out failed")}return await r.json()}catch(e){throw console.error("Sign out error:",e),e}},getSession=async e=>{try{let s=await fetch("".concat(i,"/auth/session"),{method:"GET",headers:{Authorization:"Bearer ".concat(e)},credentials:"include"});if(!s.ok){var r;let e=await s.json();throw Error((null===(r=e.error)||void 0===r?void 0:r.message)||"Failed to retrieve session")}return await s.json()}catch(e){throw console.error("Get session error:",e),e}},refreshToken=async()=>{try{let r=await fetch("".concat(i,"/auth/refresh-token"),{method:"POST",credentials:"include"});if(!r.ok){var e;let s=await r.json();throw Error((null===(e=s.error)||void 0===e?void 0:e.message)||"Failed to refresh token")}return await r.json()}catch(e){throw console.error("Refresh token error:",e),e}},getUserProfile=async(e,r)=>{try{let t=await fetch("".concat(i,"/auth/profile/").concat(e),{method:"GET",headers:{Authorization:"Bearer ".concat(r)}});if(!t.ok){var s;let e=await t.json();throw Error((null===(s=e.error)||void 0===s?void 0:s.message)||"Failed to get user profile")}return await t.json()}catch(e){throw console.error("Get user profile error:",e),e}};var n={signIn,signUp,signOut,getSession,refreshToken,getUserProfile},l=s(4033);let o=(0,a.createContext)(void 0),AuthProvider=e=>{let{children:r}=e,[s,i]=(0,a.useState)(null),[c,d]=(0,a.useState)(null),[m,u]=(0,a.useState)(!0),[h,x]=(0,a.useState)(null),f=(0,l.useRouter)();(0,a.useEffect)(()=>{if(c){let e=new Date(c.expires_at).getTime(),r=Date.now(),s=e-r;if(s<3e5){refreshSession();return}let t=setTimeout(()=>{refreshSession()},s-3e5);return()=>clearTimeout(t)}},[c]),(0,a.useEffect)(()=>{let initAuth=async()=>{u(!0),x(null);try{let e=localStorage.getItem("access_token");if(!e){u(!1);return}let r=await n.getSession(e);(null==r?void 0:r.user)&&(null==r?void 0:r.session)?(i(r.user),d(r.session),localStorage.setItem("access_token",r.session.access_token)):localStorage.removeItem("access_token")}catch(e){console.error("Auth initialization error:",e),localStorage.removeItem("access_token"),x("Authentication error. Please login again.")}finally{u(!1)}};initAuth()},[]);let signIn=async(e,r)=>{u(!0),x(null);try{let s=await n.signIn(e,r);(null==s?void 0:s.user)&&(null==s?void 0:s.session)&&(i(s.user),d(s.session),localStorage.setItem("access_token",s.session.access_token),f.push("/dashboard"))}catch(e){throw console.error("Sign in error:",e),x(e instanceof Error?e.message:"Authentication failed"),e}finally{u(!1)}},signUp=async(e,r,s)=>{u(!0),x(null);try{let t=await n.signUp(e,r,s);(null==t?void 0:t.user)&&f.push("/login?registered=true")}catch(e){throw console.error("Sign up error:",e),x(e instanceof Error?e.message:"Registration failed"),e}finally{u(!1)}},signOut=async()=>{u(!0);try{await n.signOut(),i(null),d(null),localStorage.removeItem("access_token"),f.push("/")}catch(e){console.error("Sign out error:",e),i(null),d(null),localStorage.removeItem("access_token"),f.push("/")}finally{u(!1)}},refreshSession=async()=>{if(!m)try{let e=await n.refreshToken();(null==e?void 0:e.user)&&(null==e?void 0:e.session)?(i(e.user),d(e.session),localStorage.setItem("access_token",e.session.access_token)):(i(null),d(null),localStorage.removeItem("access_token"),f.push("/login"))}catch(e){console.error("Session refresh error:",e),i(null),d(null),localStorage.removeItem("access_token"),f.push("/login")}};return(0,t.jsx)(o.Provider,{value:{user:s,session:c,loading:m,error:h,isAuthenticated:!!s,signIn,signUp,signOut,refreshSession},children:r})},useAuth=()=>{let e=(0,a.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e};var c=o}},function(e){e.O(0,[2438,8920,8611,9540,2971,2472,1744],function(){return e(e.s=3673)}),_N_E=e.O()}]);