"use strict";exports.id=7686,exports.ids=[7686],exports.modules={7686:(e,t,n)=>{n.d(t,{M:()=>AnimatePresence});var r=n(784),s=n(9885),i=n(6903),l=n(4349),o=n(381),h=n(9386),u=n(5248);let PopChildMeasure=class PopChildMeasure extends s.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,n=e instanceof HTMLElement&&e.offsetWidth||0,r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft,r.right=n-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}};function PopChild({children:e,isPresent:t,anchorX:n}){let i=(0,s.useId)(),l=(0,s.useRef)(null),o=(0,s.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:h}=(0,s.useContext)(u._);return(0,s.useInsertionEffect)(()=>{let{width:e,height:r,top:s,left:u,right:d}=o.current;if(t||!l.current||!e||!r)return;let p="left"===n?`left: ${u}`:`right: ${d}`;l.current.dataset.motionPopId=i;let f=document.createElement("style");return h&&(f.nonce=h),document.head.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${r}px !important;
            ${p}px !important;
            top: ${s}px !important;
          }
        `),()=>{document.head.removeChild(f)}},[t]),(0,r.jsx)(PopChildMeasure,{isPresent:t,childRef:l,sizeRef:o,children:s.cloneElement(e,{ref:l})})}let PresenceChild=({children:e,initial:t,isPresent:n,onExitComplete:i,custom:o,presenceAffectsLayout:u,mode:d,anchorX:p})=>{let f=(0,l.h)(newChildrenMap),c=(0,s.useId)(),a=!0,m=(0,s.useMemo)(()=>(a=!1,{id:c,initial:t,isPresent:n,custom:o,onExitComplete:e=>{for(let t of(f.set(e,!0),f.values()))if(!t)return;i&&i()},register:e=>(f.set(e,!1),()=>f.delete(e))}),[n,f,i]);return u&&a&&(m={...m}),(0,s.useMemo)(()=>{f.forEach((e,t)=>f.set(t,!1))},[n]),s.useEffect(()=>{n||f.size||!i||i()},[n]),"popLayout"===d&&(e=(0,r.jsx)(PopChild,{isPresent:n,anchorX:p,children:e})),(0,r.jsx)(h.O.Provider,{value:m,children:e})};function newChildrenMap(){return new Map}var d=n(1886);let getChildKey=e=>e.key||"";function onlyElements(e){let t=[];return s.Children.forEach(e,e=>{(0,s.isValidElement)(e)&&t.push(e)}),t}let AnimatePresence=({children:e,custom:t,initial:n=!0,onExitComplete:h,presenceAffectsLayout:u=!0,mode:p="sync",propagate:f=!1,anchorX:c="left"})=>{let[a,m]=(0,d.oO)(f),C=(0,s.useMemo)(()=>onlyElements(e),[e]),g=f&&!a?[]:C.map(getChildKey),x=(0,s.useRef)(!0),P=(0,s.useRef)(C),E=(0,l.h)(()=>new Map),[y,M]=(0,s.useState)(C),[w,R]=(0,s.useState)(C);(0,o.L)(()=>{x.current=!1,P.current=C;for(let e=0;e<w.length;e++){let t=getChildKey(w[e]);g.includes(t)?E.delete(t):!0!==E.get(t)&&E.set(t,!1)}},[w,g.length,g.join("-")]);let v=[];if(C!==y){let e=[...C];for(let t=0;t<w.length;t++){let n=w[t],r=getChildKey(n);g.includes(r)||(e.splice(t,0,n),v.push(n))}return"wait"===p&&v.length&&(e=v),R(onlyElements(e)),M(C),null}let{forceRender:$}=(0,s.useContext)(i.p);return(0,r.jsx)(r.Fragment,{children:w.map(e=>{let s=getChildKey(e),i=(!f||!!a)&&(C===w||g.includes(s));return(0,r.jsx)(PresenceChild,{isPresent:i,initial:(!x.current||!!n)&&void 0,custom:t,presenceAffectsLayout:u,mode:p,onExitComplete:i?void 0:()=>{if(!E.has(s))return;E.set(s,!0);let e=!0;E.forEach(t=>{t||(e=!1)}),e&&($?.(),R(P.current),f&&m?.(),h&&h())},anchorX:c,children:e},s)})})}}};