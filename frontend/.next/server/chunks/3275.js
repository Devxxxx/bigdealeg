"use strict";exports.id=3275,exports.ids=[3275],exports.modules={3275:(e,s,a)=>{a.d(s,{Z:()=>CancelViewingModal});var n=a(784),t=a(9885),l=a(5105),i=a(2522),r=a(647),c=a(2308);function CancelViewingModal({isOpen:e,onClose:s,viewingId:a,onSuccess:o}){let[d,m]=(0,t.useState)(!1),[x,h]=(0,t.useState)(null),[u,g]=(0,t.useState)(""),[y,p]=(0,t.useState)(!1),{session:w}=(0,r.a)(),handleCancel=async()=>{if(a&&w?.access_token){m(!0),h(null);try{await c.ZP.cancelScheduledViewing(w.access_token,a,{cancellation_reason:u}),p(!0),setTimeout(()=>{o&&o()},2e3)}catch(e){console.error("Error cancelling viewing:",e),h("Failed to cancel viewing. Please try again.")}finally{m(!1)}}};return e?n.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,n.jsxs)("div",{className:"flex min-h-screen items-center justify-center p-4 text-center sm:p-0",children:[n.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:s}),(0,n.jsxs)("div",{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg",children:[(0,n.jsxs)("div",{className:"bg-red-50 px-4 py-3 sm:px-6 flex justify-between items-center",children:[(0,n.jsxs)("h3",{className:"text-lg font-medium text-red-900 flex items-center",children:[n.jsx(l.bcx,{className:"mr-2 h-5 w-5 text-red-600"}),"Cancel Viewing Appointment"]}),n.jsx("button",{type:"button",className:"text-gray-400 hover:text-gray-500",onClick:s,children:n.jsx(l.q5L,{className:"h-6 w-6"})})]}),n.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:y?(0,n.jsxs)("div",{className:"text-center py-6",children:[n.jsx("div",{className:"mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-green-100",children:n.jsx(l.UgA,{className:"h-6 w-6 text-green-600"})}),n.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"Viewing Cancelled"}),n.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Your viewing appointment has been successfully cancelled. If you change your mind, you can always request a new viewing."})]}):(0,n.jsxs)("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Are you sure you want to cancel this viewing appointment? This action cannot be undone."}),(0,n.jsxs)("div",{className:"mt-4",children:[n.jsx("label",{htmlFor:"reason",className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason for cancellation (optional)"}),n.jsx("textarea",{id:"reason",className:"shadow-sm focus:ring-primary-500 focus:border-primary-500 block w-full sm:text-sm border-gray-300 rounded-md",placeholder:"Please let us know why you're cancelling...",rows:3,value:u,onChange:e=>g(e.target.value)})]}),x&&n.jsx("div",{className:"mt-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md",children:x})]})}),n.jsx("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:y?n.jsx(i.Z,{variant:"primary",onClick:s,children:"Done"}):(0,n.jsxs)(n.Fragment,{children:[n.jsx(i.Z,{variant:"danger",onClick:handleCancel,loading:d,children:d?"Cancelling...":"Confirm Cancellation"}),n.jsx(i.Z,{variant:"light",onClick:s,className:"mr-2",children:"Back"})]})})]})]})}):null}}};