(()=>{var e={};e.id=981,e.ids=[981],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},1636:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>o,routeModule:()=>u,tree:()=>c});var a=t(7096),r=t(6132),i=t(7284),l=t.n(i),n=t(2564),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);t.d(s,d);let c=["",{children:["dashboard",{children:["scheduled-viewings",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,9723)),"E:\\bigdealegy\\bigdealegy\\frontend\\src\\app\\dashboard\\scheduled-viewings\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,8182)),"E:\\bigdealegy\\bigdealegy\\frontend\\src\\app\\dashboard\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,9851)),"E:\\bigdealegy\\bigdealegy\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9291,23)),"next/dist/client/components/not-found-error"]}],o=["E:\\bigdealegy\\bigdealegy\\frontend\\src\\app\\dashboard\\scheduled-viewings\\page.tsx"],m="/dashboard/scheduled-viewings/page",x={require:t,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/dashboard/scheduled-viewings/page",pathname:"/dashboard/scheduled-viewings",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},7724:(e,s,t)=>{Promise.resolve().then(t.bind(t,6821))},6821:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>ScheduledViewings});var a=t(784),r=t(9885),i=t(1440),l=t.n(i),n=t(647),d=t(2308);function useScheduledViewings(e={}){let{filter:s="all",additionalFilters:t={}}=e,[a,i]=(0,r.useState)([]),[l,c]=(0,r.useState)(!0),[o,m]=(0,r.useState)(null),[x,u]=(0,r.useState)(!1),{user:p,session:g}=(0,n.a)(),h=JSON.stringify(t),y=(0,r.useCallback)(async()=>{if(!p||!g?.access_token){c(!1);return}c(!0),m(null);try{let e={...JSON.parse(h),role:p?.role},{viewings:s}=await d.ZP.getScheduledViewings(g.access_token,e);console.log("Scheduled viewings data received:",s),i(s||[]),u(!0),s?console.log(`Received ${s.length} viewings from API`):console.log("No viewings data received or data is empty")}catch(e){console.error("Error fetching scheduled viewings:",e),m("Failed to load scheduled viewings")}finally{c(!1)}},[p?.id,g?.access_token,h]);(0,r.useEffect)(()=>{y()},[y]);let f=a.filter(e=>{if("all"===s||"pending"===e.status&&"upcoming"===s)return!0;if(!e.viewing_date)return"upcoming"===s;let t=new Date(e.viewing_date),a=new Date;return(a.setHours(0,0,0,0),"upcoming"===s)?t>=a:"past"!==s||t<a}),j=f.reduce((e,s)=>{if("pending"===s.status&&!s.viewing_date){let t="Pending Confirmation";return e[t]||(e[t]=[]),e[t].push(s),e}let t=formatDateForGrouping(s.viewing_date);return e[t]||(e[t]=[]),e[t].push(s),e},{}),cancelViewing=async(e,s)=>{if(!g?.access_token)throw Error("You must be logged in to cancel a viewing");try{let t=await d.ZP.cancelScheduledViewing(g.access_token,e,{cancellation_reason:s});return i(s=>s.map(s=>s.id===e?{...s,status:"cancelled"}:s)),t}catch(e){throw console.error("Error cancelling viewing:",e),e}},createViewing=async e=>{if(!g?.access_token)throw Error("You must be logged in to schedule a viewing");try{let s=await d.ZP.createScheduledViewing(g.access_token,e);return i(e=>[s,...e]),s}catch(e){throw console.error("Error creating viewing:",e),e}};function formatDateForGrouping(e){if(!e)return"Pending Confirmation";let s=new Date(e),t=new Date,a=new Date(t);return(a.setDate(a.getDate()+1),t.setHours(0,0,0,0),a.setHours(0,0,0,0),s.setHours(0,0,0,0),s.getTime()===t.getTime())?"Today":s.getTime()===a.getTime()?"Tomorrow":s.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})}return{viewings:f,groupedViewings:j,loading:l,error:o,hasData:a.length>0,hasInitiallyLoaded:x,refreshViewings:y,cancelViewing,createViewing}}var c=t(5105),o=t(3431),m=t(2522),x=t(7686),u=t(1332);function SelectViewingSlotModal({isOpen:e,onClose:s,viewingId:t,propertyTitle:i,proposedDates:l,proposedTimes:o}){let{user:p,session:g}=(0,n.a)(),[h,y]=(0,r.useState)(!1),[f,j]=(0,r.useState)(!1),[v,b]=(0,r.useState)(null),[N,w]=(0,r.useState)(""),[_,S]=(0,r.useState)(""),[k,C]=(0,r.useState)(""),P=l.map(e=>({value:e,label:new Date(e).toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"})})),A=o.map(e=>{let[s,t]=e.split(":"),a=parseInt(s,10),r=`${a%12||12}:${t} ${a>=12?"PM":"AM"}`;return{value:e,label:r}}),resetForm=()=>{w(""),S(""),C(""),j(!1),b(null)},validateForm=()=>N?!!_||(b("Please select a time"),!1):(b("Please select a date"),!1),handleSubmit=async()=>{if(!g?.access_token){b("Authentication error. Please try logging in again.");return}if(validateForm())try{y(!0),b(null),await d.ZP.selectViewingSlot(g.access_token,t,{selected_date:N,selected_time:_,notes:k}),j(!0)}catch(e){console.error("Error selecting viewing slot:",e),b("Failed to select viewing slot. Please try again.")}finally{y(!1)}};return a.jsx(x.M,{children:e&&a.jsx(u.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 overflow-y-auto",children:(0,a.jsxs)("div",{className:"flex min-h-screen items-center justify-center p-4 text-center sm:p-0",children:[a.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:s}),(0,a.jsxs)(u.E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg",children:[(0,a.jsxs)("div",{className:"bg-primary-50 px-4 py-3 sm:px-6 flex justify-between items-center",children:[a.jsx("h3",{className:"text-lg font-medium text-primary-900",children:"Select Viewing Time"}),a.jsx("button",{type:"button",className:"text-gray-400 hover:text-gray-500",onClick:()=>{s(),setTimeout(resetForm,300)},children:a.jsx(c.q5L,{className:"h-6 w-6"})})]}),a.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:f?(0,a.jsxs)("div",{className:"text-center py-6",children:[a.jsx("div",{className:"mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-green-100",children:a.jsx(c.UgA,{className:"h-6 w-6 text-green-600"})}),a.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"Viewing Time Selected"}),(0,a.jsxs)("p",{className:"mt-2 text-sm text-gray-500",children:["You have successfully selected a viewing time for ",i,". Our sales team will confirm your appointment shortly."]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:["Select your preferred viewing time for ",i]}),a.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Please choose from the available slots below. Our sales team will confirm your selected time."}),(0,a.jsxs)("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Available Dates"}),a.jsx("div",{className:"space-y-2",children:P.map(e=>(0,a.jsxs)("div",{className:`flex items-center p-3 rounded-lg border cursor-pointer transition-colors ${N===e.value?"bg-primary-50 border-primary-200":"bg-white border-gray-200 hover:bg-gray-50"}`,onClick:()=>w(e.value),children:[a.jsx("div",{className:`flex-shrink-0 h-5 w-5 rounded-full border flex items-center justify-center ${N===e.value?"bg-primary-600 border-primary-600":"border-gray-300"}`,children:N===e.value&&a.jsx(c.UgA,{className:"h-3 w-3 text-white"})}),(0,a.jsxs)("div",{className:"ml-3 flex items-center",children:[a.jsx(c.vlc,{className:"mr-2 text-gray-400"}),a.jsx("span",{className:"text-gray-700",children:e.label})]})]},e.value))})]}),(0,a.jsxs)("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Available Times"}),a.jsx("div",{className:"space-y-2",children:A.map(e=>(0,a.jsxs)("div",{className:`flex items-center p-3 rounded-lg border cursor-pointer transition-colors ${_===e.value?"bg-primary-50 border-primary-200":"bg-white border-gray-200 hover:bg-gray-50"}`,onClick:()=>S(e.value),children:[a.jsx("div",{className:`flex-shrink-0 h-5 w-5 rounded-full border flex items-center justify-center ${_===e.value?"bg-primary-600 border-primary-600":"border-gray-300"}`,children:_===e.value&&a.jsx(c.UgA,{className:"h-3 w-3 text-white"})}),(0,a.jsxs)("div",{className:"ml-3 flex items-center",children:[a.jsx(c.TCC,{className:"mr-2 text-gray-400"}),a.jsx("span",{className:"text-gray-700",children:e.label})]})]},e.value))})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes (optional)"}),(0,a.jsxs)("div",{className:"relative rounded-md shadow-sm",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(c.IC0,{className:"text-gray-400"})}),a.jsx("textarea",{rows:3,className:"block w-full pl-10 sm:text-sm border-gray-300 rounded-md focus:ring-primary-500 focus:border-primary-500",placeholder:"Any additional information or questions...",value:k,onChange:e=>C(e.target.value)})]})]})]}),v&&a.jsx("div",{className:"mt-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md",children:v})]})}),a.jsx("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:f?a.jsx(m.Z,{variant:"primary",onClick:()=>{s(),setTimeout(resetForm,300)},children:"Done"}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(m.Z,{variant:"primary",onClick:handleSubmit,loading:h,children:"Confirm Selection"}),a.jsx(m.Z,{variant:"light",onClick:s,className:"mr-2",children:"Cancel"})]})})]})]})})})}var p=t(3275);function ScheduledViewings(){let[e,s]=(0,r.useState)("all"),[t,i]=(0,r.useState)([]),[d,x]=(0,r.useState)(!1),[u,g]=(0,r.useState)(null),[h,y]=(0,r.useState)(!1),[f,j]=(0,r.useState)(null),{isAuthenticated:v,loading:b}=(0,n.a)(),{groupedViewings:N,loading:w,error:_,cancelViewing:S,hasInitiallyLoaded:k}=useScheduledViewings({filter:e}),toggleExpanded=e=>{i(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},openSelectSlotModal=e=>{g(e),x(!0)},openCancelModal=e=>{j(e),y(!0)},formatDate=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),getStatusBadge=e=>{switch(e){case"confirmed":return(0,a.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[a.jsx(c._rq,{className:"mr-1 h-3 w-3"}),"Confirmed"]});case"cancelled":return(0,a.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[a.jsx(c.$Rx,{className:"mr-1 h-3 w-3"}),"Cancelled"]});case"requested":return(0,a.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:[a.jsx(c.bcx,{className:"mr-1 h-3 w-3"}),"Requested"]});case"options_sent":return(0,a.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[a.jsx(c.H33,{className:"mr-1 h-3 w-3"}),"Select Time"]});case"slot_selected":return(0,a.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:[a.jsx(c.TCC,{className:"mr-1 h-3 w-3"}),"Time Selected"]});case"completed":return(0,a.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[a.jsx(c._rq,{className:"mr-1 h-3 w-3"}),"Completed"]});default:return(0,a.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:[a.jsx(c.H33,{className:"mr-1 h-3 w-3"}),e||"Unknown"]})}},isPastDate=e=>{if(!e)return!1;let s=new Date(e),t=new Date;return t.setHours(0,0,0,0),s<t};return b?a.jsx("div",{className:"flex justify-center items-center h-64",children:(0,a.jsxs)("div",{className:"relative h-16 w-16 flex items-center justify-center",children:[a.jsx(c.dAq,{className:"animate-spin text-primary-500 h-10 w-10"}),a.jsx("p",{className:"mt-16 text-sm text-gray-500",children:"Loading authentication..."})]})}):!v&&k?a.jsx("div",{className:"opacity-100 transition-opacity duration-500",children:(0,a.jsxs)(o.Z,{className:"py-12 text-center",children:[a.jsx("div",{className:"mx-auto h-20 w-20 rounded-full bg-primary-50 flex items-center justify-center mb-4",children:a.jsx(c.fzv,{className:"h-10 w-10 text-primary-500"})}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"Authentication Required"}),a.jsx("p",{className:"text-gray-500 max-w-md mx-auto mb-6",children:"You need to be logged in to view your scheduled property viewings."}),a.jsx(m.Z,{variant:"gradient",href:"/login",children:"Log In"})]})}):(0,a.jsxs)("div",{className:"opacity-100 transition-opacity duration-500",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Scheduled Viewings"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your property viewing appointments"})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[a.jsx(m.Z,{variant:"all"===e?"primary":"light",size:"sm",onClick:()=>s("all"),disabled:w,children:"All"}),a.jsx(m.Z,{variant:"upcoming"===e?"primary":"light",size:"sm",onClick:()=>s("upcoming"),disabled:w,children:"Upcoming"}),a.jsx(m.Z,{variant:"past"===e?"primary":"light",size:"sm",onClick:()=>s("past"),disabled:w,children:"Past"})]})]}),w&&!k?a.jsx("div",{className:"flex justify-center items-center h-64",children:(0,a.jsxs)("div",{className:"relative h-16 w-16 flex items-center justify-center",children:[a.jsx(c.dAq,{className:"animate-spin text-primary-500 h-10 w-10"}),a.jsx("p",{className:"mt-16 text-sm text-gray-500",children:"Loading your scheduled viewings..."})]})}):_?(0,a.jsxs)(o.Z,{className:"py-8 text-center",children:[a.jsx("div",{className:"mx-auto h-16 w-16 rounded-full bg-red-50 flex items-center justify-center mb-4",children:a.jsx(c.bcx,{className:"h-8 w-8 text-red-500"})}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"Unable to load viewings"}),a.jsx("p",{className:"text-gray-500 max-w-md mx-auto mb-6",children:_}),a.jsx(m.Z,{variant:"primary",onClick:()=>window.location.reload(),children:"Retry"})]}):Object.entries(N).length>0?a.jsx("div",{className:"space-y-6",children:Object.entries(N).map(([e,s])=>(0,a.jsxs)("div",{className:"opacity-100 transform translate-y-0 transition-all duration-300",children:[(0,a.jsxs)("h2",{className:"text-lg font-medium text-gray-900 mb-3 flex items-center",children:[a.jsx(c.vlc,{className:"mr-2 text-primary-500"}),e,"Today"===e&&a.jsx("span",{className:"ml-2 text-xs font-medium py-0.5 px-2 rounded-full bg-blue-100 text-blue-700",children:"Today"}),"Tomorrow"===e&&a.jsx("span",{className:"ml-2 text-xs font-medium py-0.5 px-2 rounded-full bg-purple-100 text-purple-700",children:"Tomorrow"}),"Pending Confirmation"===e&&a.jsx("span",{className:"ml-2 text-xs font-medium py-0.5 px-2 rounded-full bg-yellow-100 text-yellow-700",children:"Awaiting Confirmation"})]}),a.jsx("div",{className:"grid grid-cols-1 gap-4",children:s.map(e=>(0,a.jsxs)(o.Z,{className:`overflow-hidden transition-all duration-300 
                      ${isPastDate(e.viewing_date)?"bg-gray-50":"bg-white"} 
                      ${"cancelled"===e.status?"border-red-200":""}`,padding:"none",hover:!0,children:[(0,a.jsxs)("div",{className:"p-5",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center mb-2",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mr-3",children:e.property?.title||"Property Viewing"}),getStatusBadge(e.status)]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-1 mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center text-gray-600",children:[a.jsx(c.i63,{className:"text-primary-500 mr-2 flex-shrink-0"}),a.jsx("span",{children:e.property?.location||"Location unavailable"})]}),(0,a.jsxs)("div",{className:"flex items-center text-gray-600",children:[a.jsx(c.TCC,{className:"text-primary-500 mr-2 flex-shrink-0"}),a.jsx("span",{children:e.viewing_time||"Time not set"})]}),(0,a.jsxs)("div",{className:"flex items-center text-gray-600",children:[a.jsx(c.m6D,{className:"text-primary-500 mr-2 flex-shrink-0"}),a.jsx("span",{children:e.property?.property_type||"Property type unavailable"})]}),(0,a.jsxs)("div",{className:"flex items-center text-gray-600",children:[a.jsx(c.fzv,{className:"text-primary-500 mr-2 flex-shrink-0"}),a.jsx("span",{children:"Sales Agent Assigned"})]})]}),"cancelled"===e.status&&a.jsx("div",{className:"bg-red-50 text-red-800 p-2 rounded-md text-sm mt-2",children:"This viewing has been cancelled. Please contact our team for assistance."}),"confirmed"===e.status&&!isPastDate(e.viewing_date)&&a.jsx("div",{className:"bg-green-50 text-green-800 p-2 rounded-md text-sm mt-2",children:"Your viewing is confirmed. We look forward to meeting you!"}),"requested"===e.status&&a.jsx("div",{className:"bg-gray-50 text-gray-800 p-2 rounded-md text-sm mt-2",children:"Thank you for requesting this viewing. Our sales team will propose available time slots soon."}),"options_sent"===e.status&&(0,a.jsxs)("div",{className:"bg-blue-50 text-blue-800 p-2 rounded-md text-sm mt-2",children:[a.jsx("p",{children:"Our sales team has proposed available time slots. Please select your preferred time."}),a.jsx("button",{onClick:()=>openSelectSlotModal(e),className:"mt-1 text-blue-700 hover:text-blue-900 font-medium text-sm",children:"Select a time slot"})]}),"slot_selected"===e.status&&a.jsx("div",{className:"bg-purple-50 text-purple-800 p-2 rounded-md text-sm mt-2",children:a.jsx("p",{children:"Thank you for selecting your preferred time slot. Our sales team will confirm your appointment shortly."})})]}),(0,a.jsxs)("div",{className:"mt-4 sm:mt-0 flex sm:flex-col items-center sm:items-end justify-between sm:justify-start",children:[(0,a.jsxs)("div",{className:"flex items-center bg-primary-50 text-primary-700 px-2 py-1 rounded-full text-sm font-medium",children:[a.jsx(c.vlc,{className:"mr-1"}),e.viewing_date?formatDate(e.viewing_date):"Date pending"]}),a.jsx("button",{onClick:()=>toggleExpanded(e.id),className:"ml-4 sm:ml-0 sm:mt-3 text-primary-600 hover:text-primary-800 text-sm flex items-center",children:t.includes(e.id)?(0,a.jsxs)(a.Fragment,{children:[a.jsx(c.rH8,{className:"mr-1"}),"Hide Details"]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(c.bTu,{className:"mr-1"}),"Show Details"]})})]})]}),t.includes(e.id)&&a.jsx("div",{className:"mt-4 overflow-hidden",children:(0,a.jsxs)("div",{className:"border-t border-gray-100 pt-4",children:[e.notes&&(0,a.jsxs)("div",{className:"mb-4",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-1",children:"Notes"}),a.jsx("p",{className:"text-sm text-gray-600",children:e.notes})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-1",children:"Property Details"}),(0,a.jsxs)("div",{className:"bg-gray-50 p-3 rounded-md",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[a.jsx("div",{className:"text-gray-600",children:"Type:"}),a.jsx("div",{className:"font-medium",children:e.property?.property_type||"N/A"}),a.jsx("div",{className:"text-gray-600",children:"Bedrooms:"}),a.jsx("div",{className:"font-medium",children:e.property?.bedrooms||"N/A"}),a.jsx("div",{className:"text-gray-600",children:"Bathrooms:"}),a.jsx("div",{className:"font-medium",children:e.property?.bathrooms||"N/A"}),a.jsx("div",{className:"text-gray-600",children:"Area:"}),a.jsx("div",{className:"font-medium",children:e.property?.area_size?`${e.property.area_size} m\xb2`:"N/A"}),a.jsx("div",{className:"text-gray-600",children:"Price:"}),a.jsx("div",{className:"font-medium",children:e.property?.price?`${e.property.price.toLocaleString()} EGP`:"N/A"})]}),a.jsx("div",{className:"mt-3",children:(0,a.jsxs)(l(),{href:`/properties/${e.property?.id}`,className:"inline-flex items-center text-primary-600 hover:text-primary-800 text-sm",children:["View Property Listing",a.jsx(c.AlO,{className:"ml-1 h-3 w-3"})]})})]})]}),(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-1",children:"Contact Information"}),(0,a.jsxs)("div",{className:"bg-gray-50 p-3 rounded-md",children:[(0,a.jsxs)("div",{className:"flex flex-col space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center text-gray-600",children:[a.jsx(c.tUt,{className:"h-4 w-4 mr-2"}),a.jsx("span",{children:"Sales Team: +20 123 456 7890"})]}),(0,a.jsxs)("div",{className:"flex items-center text-gray-600",children:[a.jsx(c.Imn,{className:"h-4 w-4 mr-2"}),a.jsx("span",{children:"viewings@bigdealegy.com"})]})]}),(0,a.jsxs)("div",{className:"mt-3 grid grid-cols-2 gap-2",children:[a.jsx(m.Z,{variant:"outline",size:"sm",leftIcon:a.jsx(c.tUt,{}),disabled:"cancelled"===e.status,className:"w-full",children:"Call"}),a.jsx(m.Z,{variant:"outline",size:"sm",leftIcon:a.jsx(c.vlc,{}),disabled:"cancelled"===e.status,className:"w-full",children:"Reschedule"})]})]})]})]}),"options_sent"===e.status&&e.proposed_dates&&e.proposed_times&&(0,a.jsxs)("div",{className:"mt-4 bg-blue-50 p-3 rounded-md",children:[a.jsx("h4",{className:"text-sm font-medium text-blue-800 mb-1",children:"Available Time Slots"}),(0,a.jsxs)("div",{className:"text-sm text-blue-700",children:[(0,a.jsxs)("p",{className:"mb-1",children:[a.jsx("span",{className:"font-medium",children:"Available dates:"})," ",Array.isArray(e.proposed_dates)&&e.proposed_dates.map(e=>new Date(e).toLocaleDateString()).join(", ")]}),(0,a.jsxs)("p",{className:"mb-3",children:[a.jsx("span",{className:"font-medium",children:"Available times:"})," ",Array.isArray(e.proposed_times)&&e.proposed_times.join(", ")]}),a.jsx("button",{onClick:()=>openSelectSlotModal(e),className:"inline-flex items-center px-3 py-1 text-xs font-medium rounded-md text-blue-700 bg-blue-100 hover:bg-blue-200 transition-colors",children:"Select Time Slot"})]})]}),"slot_selected"===e.status&&e.selected_date&&e.selected_time&&(0,a.jsxs)("div",{className:"mt-4 bg-purple-50 p-3 rounded-md",children:[a.jsx("h4",{className:"text-sm font-medium text-purple-800 mb-1",children:"Your Selected Time"}),(0,a.jsxs)("div",{className:"text-sm text-purple-700",children:[(0,a.jsxs)("p",{className:"mb-1",children:[a.jsx("span",{className:"font-medium",children:"Selected date:"})," ",new Date(e.selected_date).toLocaleDateString()]}),(0,a.jsxs)("p",{children:[a.jsx("span",{className:"font-medium",children:"Selected time:"})," ",e.selected_time]})]})]})]})})]}),(0,a.jsxs)("div",{className:"px-5 py-3 bg-gray-50 border-t border-gray-100 flex justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:`h-2 w-2 rounded-full mr-2 ${"confirmed"===e.status?"bg-green-500":"pending"===e.status?"bg-amber-500":"cancelled"===e.status?"bg-red-500":"bg-gray-500"}`}),a.jsx("span",{className:"text-sm text-gray-600",children:"confirmed"===e.status?"Confirmed":"requested"===e.status?"Request Submitted":"options_sent"===e.status?"Select Available Time":"slot_selected"===e.status?"Awaiting Confirmation":"cancelled"===e.status?"Cancelled":"completed"===e.status?"Completed":"Unknown Status"})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[a.jsx(l(),{href:`/dashboard/scheduled-viewings/${e.id}`,className:"inline-flex items-center px-3 py-1 text-xs font-medium rounded-md text-primary-700 bg-primary-50 hover:bg-primary-100 transition-colors",children:"View Details"}),"options_sent"===e.status&&a.jsx("button",{onClick:()=>openSelectSlotModal(e),className:"inline-flex items-center px-3 py-1 text-xs font-medium rounded-md text-blue-700 bg-blue-50 hover:bg-blue-100 transition-colors",children:"Select Time"}),("requested"===e.status||"options_sent"===e.status)&&a.jsx("button",{onClick:()=>openCancelModal(e),className:"inline-flex items-center px-3 py-1 text-xs font-medium rounded-md text-red-700 bg-red-50 hover:bg-red-100 transition-colors",children:"Cancel"})]})]})]},e.id))})]},e))}):a.jsx("div",{className:"opacity-100 scale-100 transition-all duration-300",children:(0,a.jsxs)(o.Z,{className:"py-12 text-center",children:[a.jsx("div",{className:"mx-auto h-20 w-20 rounded-full bg-primary-50 flex items-center justify-center mb-4",children:a.jsx(c.vlc,{className:"h-10 w-10 text-primary-500"})}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No viewings scheduled"}),(0,a.jsxs)("p",{className:"text-gray-500 max-w-md mx-auto mb-6",children:["You don't have any ","all"!==e?e:""," property viewings scheduled."]}),a.jsx(m.Z,{variant:"gradient",href:"/dashboard/property-requests",leftIcon:a.jsx(c.m6D,{}),children:"Browse Property Requests"})]})}),a.jsx(p.Z,{isOpen:h,onClose:()=>y(!1),viewingId:f?.id,onSuccess:()=>{y(!1),j(null)}}),u&&a.jsx(SelectViewingSlotModal,{isOpen:d,onClose:()=>x(!1),viewingId:u.id,propertyTitle:u.property?.title||"Property",proposedDates:u.proposed_dates||[],proposedTimes:u.proposed_times||[]})]})}},9723:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>l,__esModule:()=>i,default:()=>d});var a=t(5153);let r=(0,a.createProxy)(String.raw`E:\bigdealegy\bigdealegy\frontend\src\app\dashboard\scheduled-viewings\page.tsx`),{__esModule:i,$$typeof:l}=r,n=r.default,d=n}};var s=require("../../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),t=s.X(0,[657,4043,2076,1332,7686,1407,2070,549,5846,2522,3431,9494,2308,3275],()=>__webpack_exec__(1636));module.exports=t})();