(()=>{var e={};e.id=6102,e.ids=[6102],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},7354:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>o,pages:()=>m,routeModule:()=>h,tree:()=>c});var a=t(7096),r=t(6132),i=t(7284),l=t.n(i),n=t(2564),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);t.d(s,d);let c=["",{children:["dashboard",{children:["scheduled-viewings",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,5335)),"E:\\bigdealegy\\bigdealegy\\frontend\\src\\app\\dashboard\\scheduled-viewings\\[id]\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,1540)),"E:\\bigdealegy\\bigdealegy\\frontend\\src\\app\\dashboard\\scheduled-viewings\\[id]\\layout.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,8182)),"E:\\bigdealegy\\bigdealegy\\frontend\\src\\app\\dashboard\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,9851)),"E:\\bigdealegy\\bigdealegy\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9291,23)),"next/dist/client/components/not-found-error"]}],m=["E:\\bigdealegy\\bigdealegy\\frontend\\src\\app\\dashboard\\scheduled-viewings\\[id]\\page.tsx"],o="/dashboard/scheduled-viewings/[id]/page",x={require:t,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/dashboard/scheduled-viewings/[id]/page",pathname:"/dashboard/scheduled-viewings/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},4036:(e,s,t)=>{Promise.resolve().then(t.bind(t,1127))},5303:()=>{},1127:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>ViewingDetails});var a=t(784),r=t(9885),i=t(7114),l=t(1440),n=t.n(l),d=t(647),c=t(2308),m=t(5105),o=t(3431),x=t(2522),h=t(3275);function ViewingDetails(){var e;let{id:s}=(0,i.useParams)(),t=(0,i.useRouter)(),{user:l,session:g}=(0,d.a)(),[p,u]=(0,r.useState)(null),[j,v]=(0,r.useState)(!0),[y,f]=(0,r.useState)(null),[N,w]=(0,r.useState)(!1);if((0,r.useEffect)(()=>{let fetchViewing=async()=>{if(l&&g?.access_token)try{v(!0);let e=await c.ZP.getScheduledViewingById(g.access_token,s);console.log("Raw API response:",e);let t={...e};!t.property&&t.property_id&&(t.property=t.property_id),console.log("Processed data:",t),u(t)}catch(e){console.error("Error fetching viewing details:",e),f("Failed to load viewing details")}finally{v(!1)}};fetchViewing()},[s,l,g]),j)return a.jsx("div",{className:"flex justify-center items-center h-64",children:(0,a.jsxs)("div",{className:"relative h-16 w-16",children:[a.jsx("div",{className:"absolute top-0 left-0 right-0 bottom-0 border-t-4 border-primary-500 border-solid rounded-full animate-spin"}),a.jsx("div",{className:"absolute top-0 left-0 right-0 bottom-0 border-t-4 border-primary-200 border-solid rounded-full opacity-20"})]})});if(y||!p)return(0,a.jsxs)(o.Z,{className:"p-6 text-center",children:[a.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100",children:a.jsx(m.bcx,{className:"h-6 w-6 text-red-600"})}),a.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900",children:"Viewing Not Found"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"The viewing appointment you're looking for doesn't exist or you don't have access to it."}),a.jsx("div",{className:"mt-6",children:a.jsx(x.Z,{variant:"primary",onClick:()=>t.push("/dashboard/scheduled-viewings"),leftIcon:a.jsx(m.Ao2,{}),children:"Back to Viewings"})})]});console.log("Viewing object structure:",p),console.log("Property info:",p.property);let isPastDate=e=>{if(!e)return!1;let s=new Date(e),t=new Date;return t.setHours(0,0,0,0),s<t},b="pending"===p.status||"confirmed"===p.status&&!isPastDate(p.viewing_date);return(0,a.jsxs)("div",{className:"opacity-100 transition-opacity duration-500",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)(n(),{href:"/dashboard/scheduled-viewings",className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700",children:[a.jsx(m.Ao2,{className:"mr-2 h-4 w-4"}),"Back to Scheduled Viewings"]}),a.jsx("h1",{className:"mt-2 text-2xl font-bold text-gray-900",children:"Viewing Details"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[a.jsx("div",{className:"lg:col-span-2",children:a.jsx(o.Z,{children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mr-3",children:p.property?p.property.title:"Property Viewing"}),(e=>{switch(e){case"confirmed":return(0,a.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-sm font-medium bg-green-100 text-green-800",children:[a.jsx(m.UgA,{className:"mr-1 h-4 w-4"}),"Confirmed"]});case"pending":return(0,a.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-sm font-medium bg-yellow-100 text-yellow-800",children:[a.jsx(m.H33,{className:"mr-1 h-4 w-4"}),"Pending"]});case"cancelled":return(0,a.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-sm font-medium bg-red-100 text-red-800",children:[a.jsx(m.q5L,{className:"mr-1 h-4 w-4"}),"Cancelled"]});case"completed":return(0,a.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-sm font-medium bg-blue-100 text-blue-800",children:[a.jsx(m._rq,{className:"mr-1 h-4 w-4"}),"Completed"]});default:return a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-sm font-medium bg-gray-100 text-gray-800",children:e})}})(p.status)]}),b&&a.jsx(x.Z,{variant:"danger",size:"sm",className:"mt-2 sm:mt-0",leftIcon:a.jsx(m.q5L,{}),onClick:()=>w(!0),children:"Cancel Viewing"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6 mb-6",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Viewing Details"}),a.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-start",children:[a.jsx(m.vlc,{className:"h-5 w-5 text-primary-500 mt-0.5 mr-2"}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"font-medium",children:"Date"}),a.jsx("div",{className:"text-gray-700",children:(e=p.viewing_date)?new Date(e).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"Date pending"})]})]}),(0,a.jsxs)("div",{className:"flex items-start",children:[a.jsx(m.TCC,{className:"h-5 w-5 text-primary-500 mt-0.5 mr-2"}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"font-medium",children:"Time"}),a.jsx("div",{className:"text-gray-700",children:p.viewing_time?(e=>{if(!e)return"Time pending";let[s,t]=e.split(":"),a=parseInt(s);return`${a%12||12}:${t} ${a>=12?"PM":"AM"}`})(p.viewing_time):"Time pending"})]})]}),(0,a.jsxs)("div",{className:"flex items-start",children:[a.jsx(m.H33,{className:"h-5 w-5 text-primary-500 mt-0.5 mr-2"}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"font-medium",children:"Status"}),a.jsx("div",{className:"text-gray-700",children:p.status.charAt(0).toUpperCase()+p.status.slice(1)})]})]})]})})]}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Property Information"}),a.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-start",children:[a.jsx(m.m6D,{className:"h-5 w-5 text-primary-500 mt-0.5 mr-2"}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"font-medium",children:"Type"}),a.jsx("div",{className:"text-gray-700",children:p.property?p.property.property_type:"Not specified"})]})]}),(0,a.jsxs)("div",{className:"flex items-start",children:[a.jsx(m.i63,{className:"h-5 w-5 text-primary-500 mt-0.5 mr-2"}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"font-medium",children:"Location"}),a.jsx("div",{className:"text-gray-700",children:p.property?p.property.location:"Not specified"})]})]}),a.jsx("div",{children:(0,a.jsxs)(n(),{href:`/properties/${p.property_id}`,className:"text-primary-600 hover:text-primary-800 flex items-center",children:["View Property",a.jsx(m.AlO,{className:"ml-1 h-4 w-4"})]})})]})})]})]}),"pending"===p.status&&!p.viewing_date&&p.preferred_dates&&p.preferred_times&&(0,a.jsxs)("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Your Preferences"}),a.jsx("div",{className:"bg-yellow-50 p-4 rounded-lg",children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-start",children:[a.jsx(m.vlc,{className:"h-5 w-5 text-yellow-600 mt-0.5 mr-2"}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"font-medium",children:"Preferred Dates"}),a.jsx("div",{className:"text-gray-700",children:Array.isArray(p.preferred_dates)&&p.preferred_dates.map(e=>new Date(e).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})).join(", ")})]})]}),(0,a.jsxs)("div",{className:"flex items-start",children:[a.jsx(m.TCC,{className:"h-5 w-5 text-yellow-600 mt-0.5 mr-2"}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"font-medium",children:"Preferred Times"}),a.jsx("div",{className:"text-gray-700",children:Array.isArray(p.preferred_times)&&p.preferred_times.map(e=>{let[s,t]=e.split(":"),a=parseInt(s);return`${a%12||12}:${t||"00"} ${a>=12?"PM":"AM"}`}).join(", ")})]})]}),(0,a.jsxs)("div",{className:"text-yellow-700 text-sm",children:[a.jsx(m.H33,{className:"inline-block mr-1"}),"Our sales team will review your preferred dates and times and confirm your appointment soon."]})]})})]}),"confirmed"===p.status&&!isPastDate(p.viewing_date)&&a.jsx("div",{className:"bg-green-50 p-4 rounded-lg mb-6",children:(0,a.jsxs)("div",{className:"flex",children:[a.jsx(m._rq,{className:"h-5 w-5 text-green-500 mt-0.5 mr-2"}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"font-medium text-green-800",children:"Your viewing is confirmed"}),a.jsx("div",{className:"text-green-700 text-sm",children:"Please arrive on time. If you need to cancel or reschedule, please do so at least 24 hours in advance."})]})]})}),"cancelled"===p.status&&a.jsx("div",{className:"bg-red-50 p-4 rounded-lg mb-6",children:(0,a.jsxs)("div",{className:"flex",children:[a.jsx(m.q5L,{className:"h-5 w-5 text-red-500 mt-0.5 mr-2"}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"font-medium text-red-800",children:"This viewing has been cancelled"}),a.jsx("div",{className:"text-red-700 text-sm",children:"If you'd like to schedule a new viewing, please visit the property page and request a new appointment."})]})]})}),p.notes&&(0,a.jsxs)("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Notes"}),a.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:a.jsx("p",{className:"text-gray-700",children:p.notes})})]})]})})}),(0,a.jsxs)("div",{children:[a.jsx(o.Z,{children:(0,a.jsxs)("div",{className:"p-6",children:[a.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-4",children:"Contact Information"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-start",children:[a.jsx(m.tUt,{className:"h-5 w-5 text-gray-400 mt-0.5 mr-3"}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"font-medium",children:"Sales Team"}),a.jsx("div",{className:"text-gray-600",children:"+20 123 456 7890"})]})]}),(0,a.jsxs)("div",{className:"flex items-start",children:[a.jsx(m.Imn,{className:"h-5 w-5 text-gray-400 mt-0.5 mr-3"}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"font-medium",children:"Email"}),a.jsx("div",{className:"text-gray-600",children:"viewings@bigdealegy.com"})]})]}),a.jsx("div",{className:"border-t border-gray-100 pt-4 mt-4",children:a.jsx(x.Z,{variant:"primary",fullWidth:!0,leftIcon:a.jsx(m.tUt,{}),children:"Call Sales Team"})})]})]})}),"confirmed"===p.status&&!isPastDate(p.viewing_date)&&a.jsx(o.Z,{className:"mt-6",children:(0,a.jsxs)("div",{className:"p-6",children:[a.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-4",children:"What to Bring"}),(0,a.jsxs)("ul",{className:"space-y-2 text-gray-700",children:[(0,a.jsxs)("li",{className:"flex items-start",children:[a.jsx(m.UgA,{className:"text-green-500 mr-2 mt-1"}),a.jsx("span",{children:"Photo ID (National ID or Passport)"})]}),(0,a.jsxs)("li",{className:"flex items-start",children:[a.jsx(m.UgA,{className:"text-green-500 mr-2 mt-1"}),a.jsx("span",{children:"List of questions you want to ask"})]}),(0,a.jsxs)("li",{className:"flex items-start",children:[a.jsx(m.UgA,{className:"text-green-500 mr-2 mt-1"}),a.jsx("span",{children:"Measuring tape if needed"})]}),(0,a.jsxs)("li",{className:"flex items-start",children:[a.jsx(m.UgA,{className:"text-green-500 mr-2 mt-1"}),a.jsx("span",{children:"Smartphone for taking photos/videos"})]})]})]})})]})]}),a.jsx(h.Z,{isOpen:N,onClose:()=>w(!1),viewingId:p?.id,onSuccess:()=>{u({...p,status:"cancelled"}),w(!1)}})]})}},1540:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>ViewingDetailsLayout});var a=t(4656);function ViewingDetailsLayout({children:e}){return a.jsx(a.Fragment,{children:e})}},5335:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>l,__esModule:()=>i,default:()=>d});var a=t(5153);let r=(0,a.createProxy)(String.raw`E:\bigdealegy\bigdealegy\frontend\src\app\dashboard\scheduled-viewings\[id]\page.tsx`),{__esModule:i,$$typeof:l}=r,n=r.default,d=n}};var s=require("../../../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),t=s.X(0,[657,4043,2076,1407,2070,549,5846,2522,3431,9494,2308,3275],()=>__webpack_exec__(7354));module.exports=t})();