(()=>{var e={};e.id=7702,e.ids=[7702],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},5804:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>o,routeModule:()=>h,tree:()=>c});var t=r(7096),a=r(6132),i=r(7284),n=r.n(i),d=r(2564),l={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>d[e]);r.d(s,l);let c=["",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,2918)),"E:\\bigdealegy\\bigdealegy\\frontend\\src\\app\\dashboard\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,8182)),"E:\\bigdealegy\\bigdealegy\\frontend\\src\\app\\dashboard\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,9851)),"E:\\bigdealegy\\bigdealegy\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9291,23)),"next/dist/client/components/not-found-error"]}],o=["E:\\bigdealegy\\bigdealegy\\frontend\\src\\app\\dashboard\\page.tsx"],m="/dashboard/page",x={require:r,loadChunk:()=>Promise.resolve()},h=new t.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},2204:(e,s,r)=>{Promise.resolve().then(r.bind(r,7420))},7420:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>DashboardHome});var t=r(784),a=r(9885),i=r.n(a),n=r(1440),d=r.n(n),l=r(5105),c=r(647);let getDashboardData=async e=>{try{let s=await fetch("bigdealegypt.up.railway.app/api/customer/dashboard",{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!s.ok){let e=await s.json();throw Error(e.error?.message||"Failed to fetch dashboard data")}return await s.json()}catch(e){throw console.error("Get dashboard data error:",e),e}},o={getDashboardData};function useDashboardData(){let[e,s]=(0,a.useState)({propertyRequests:{total:0,newCount:0,inProgressCount:0,matchedCount:0,statusText:"Loading..."},scheduledViewings:{total:0,upcomingCount:0,statusText:"Loading..."},availableProperties:{total:0,matchingCount:0,statusText:"Loading..."},recentPropertyRequests:[],upcomingViewings:[],savedProperties:[]}),[r,t]=(0,a.useState)(!0),[i,n]=(0,a.useState)(null),{user:d,session:l}=(0,c.a)();return(0,a.useEffect)(()=>{let fetchDashboardData=async()=>{if(!d||!l?.access_token){t(!1);return}t(!0);try{let e=await o.getDashboardData(l.access_token);s(e)}catch(e){console.error("Error fetching dashboard data:",e),n(e.message||"Failed to load dashboard data")}finally{t(!1)}};fetchDashboardData()},[d,l?.access_token]),{stats:e,loading:r,error:i}}let ActionCard=({icon:e,title:s,href:r})=>(0,t.jsxs)(d(),{href:r,className:"flex items-center justify-center flex-col bg-white hover:bg-gray-50 rounded-xl border border-gray-200 p-4 sm:p-6 transition-colors shadow-sm hover:shadow-md",children:[t.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-primary-100 rounded-full flex items-center justify-center text-primary-600 mb-2 sm:mb-3",children:e}),t.jsx("span",{className:"text-gray-900 font-medium text-center text-sm sm:text-base",children:s})]}),QuickLinkCard=({title:e,count:s,icon:r,href:a,linkText:i,bgColor:n="bg-gray-50"})=>(0,t.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden shadow-sm hover:shadow-md transition-all",children:[t.jsx("div",{className:"p-4 sm:p-5",children:(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{children:[t.jsx("h3",{className:"text-base sm:text-lg font-medium text-gray-900",children:e}),t.jsx("div",{className:"mt-1 text-sm text-gray-500",children:s})]}),t.jsx("div",{className:`h-10 w-10 rounded-lg flex items-center justify-center ${n}`,children:r})]})}),t.jsx("div",{className:"border-t border-gray-200 px-4 sm:px-5 py-3 bg-gray-50",children:(0,t.jsxs)(d(),{href:a,className:"text-sm text-primary-600 hover:text-primary-700 font-medium flex items-center",children:[i,t.jsx("svg",{className:"ml-1 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})]}),TabButton=({active:e,children:s,onClick:r})=>t.jsx("button",{className:`px-3 py-2 text-sm font-medium rounded-md ${e?"bg-primary-50 text-primary-700":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,onClick:r,children:s});function DashboardHome(){let{stats:e,loading:s,error:r}=useDashboardData(),{user:a}=(0,c.a)(),[n,o]=i().useState("all");return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"mb-6 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,t.jsxs)("div",{children:[t.jsx("h1",{className:"text-heading-2",children:"Dashboard"}),(0,t.jsxs)("p",{className:"text-subtitle mt-1",children:["Welcome back, ",a?.name||"User"]})]}),(0,t.jsxs)(d(),{href:"/dashboard/property-requests/new",className:"btn-primary flex items-center",children:[t.jsx(l.OvN,{className:"mr-1.5"}),"New Request"]})]}),(0,t.jsxs)("div",{className:"grid-responsive-3 mb-8",children:[t.jsx(QuickLinkCard,{title:"Property Requests",count:e.propertyRequests.statusText,icon:t.jsx(l.tHe,{className:"h-5 w-5 text-primary-600"}),href:"/dashboard/property-requests",linkText:"Manage requests",bgColor:"bg-primary-100"}),t.jsx(QuickLinkCard,{title:"Upcoming Viewings",count:e.scheduledViewings.statusText,icon:t.jsx(l.vlc,{className:"h-5 w-5 text-secondary-600"}),href:"/dashboard/scheduled-viewings",linkText:"View all viewings",bgColor:"bg-secondary-100"}),t.jsx(QuickLinkCard,{title:"Available Properties",count:e.availableProperties.statusText,icon:t.jsx(l.m6D,{className:"h-5 w-5 text-accent-600"}),href:"/properties",linkText:"Browse properties",bgColor:"bg-accent-100"})]}),t.jsx("h2",{className:"text-heading-3 mb-4",children:"Quick Actions"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 md:gap-4 mb-8",children:[t.jsx(ActionCard,{icon:t.jsx(l.OvN,{className:"h-5 w-5"}),title:"New Request",href:"/dashboard/property-requests/new"}),t.jsx(ActionCard,{icon:t.jsx(l.jRj,{className:"h-5 w-5"}),title:"Find Property",href:"/properties"}),t.jsx(ActionCard,{icon:t.jsx(l.TCC,{className:"h-5 w-5"}),title:"My Viewings",href:"/dashboard/scheduled-viewings"}),t.jsx(ActionCard,{icon:t.jsx(l.vWP,{className:"h-5 w-5"}),title:"Notifications",href:"/dashboard/notifications"})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h2",{className:"text-heading-3",children:"Activity"}),(0,t.jsxs)("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-lg",children:[t.jsx(TabButton,{active:"all"===n,onClick:()=>o("all"),children:"All"}),t.jsx(TabButton,{active:"requests"===n,onClick:()=>o("requests"),children:"Requests"}),t.jsx(TabButton,{active:"viewings"===n,onClick:()=>o("viewings"),children:"Viewings"})]})]}),("all"===n||"requests"===n)&&(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Property Requests"}),t.jsx(d(),{href:"/dashboard/property-requests",className:"text-sm text-primary-600 hover:text-primary-700",children:"View all"})]}),s?t.jsx("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:t.jsx("div",{className:"animate-pulse flex space-x-4",children:(0,t.jsxs)("div",{className:"flex-1 space-y-4 py-1",children:[t.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx("div",{className:"h-4 bg-gray-200 rounded"}),t.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]})]})})}):e.recentPropertyRequests.length>0?t.jsx("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden shadow-sm",children:t.jsx("div",{className:"divide-y divide-gray-200",children:e.recentPropertyRequests.map(e=>t.jsx("div",{className:"p-4 hover:bg-gray-50",children:(0,t.jsxs)(d(),{href:`/dashboard/property-requests/${e.id}`,className:"block",children:[(0,t.jsxs)("h3",{className:"font-medium text-gray-900",children:[e.property_type," in ",e.location]}),(0,t.jsxs)("div",{className:"mt-1 flex flex-wrap items-center text-sm text-gray-500 gap-2",children:[(0,t.jsxs)("span",{children:["Budget: ",new Intl.NumberFormat("en-US",{style:"currency",currency:"EGP",maximumFractionDigits:0}).format(e.max_price||0)]}),t.jsx("span",{className:"hidden sm:inline-block",children:"|"}),(0,t.jsxs)("span",{children:["Size: ",e.min_area||0," - ",e.max_area||"Any"," m\xb2"]})]}),t.jsx("div",{className:"mt-2",children:t.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${"new"===e.status||"pending"===e.status?"bg-blue-100 text-blue-800":"in_progress"===e.status||"active"===e.status?"bg-yellow-100 text-yellow-800":"matched"===e.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:"new"===e.status||"pending"===e.status?"New":"in_progress"===e.status||"active"===e.status?"In Progress":"matched"===e.status?"Properties Found":e.status.charAt(0).toUpperCase()+e.status.slice(1)})})]})},e.id))})}):t.jsx("div",{className:"bg-gray-100 rounded-xl h-48 flex items-center justify-center border border-dashed border-gray-300",children:(0,t.jsxs)("div",{className:"text-center p-6",children:[t.jsx("div",{className:"mb-2 text-gray-500",children:"Your recent property requests will appear here"}),(0,t.jsxs)(d(),{href:"/dashboard/property-requests/new",className:"inline-flex items-center bg-primary-600 hover:bg-primary-700 text-white font-medium py-2 px-4 rounded-lg transition-colors text-sm",children:[t.jsx(l.OvN,{className:"mr-1.5"}),"Create New Request"]})]})})]}),("all"===n||"viewings"===n)&&(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Upcoming Viewings"}),t.jsx(d(),{href:"/dashboard/scheduled-viewings",className:"text-sm text-primary-600 hover:text-primary-700",children:"View all"})]}),s?t.jsx("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:t.jsx("div",{className:"animate-pulse flex space-x-4",children:(0,t.jsxs)("div",{className:"flex-1 space-y-4 py-1",children:[t.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx("div",{className:"h-4 bg-gray-200 rounded"}),t.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]})]})})}):e.upcomingViewings.length>0?t.jsx("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden shadow-sm",children:t.jsx("div",{className:"divide-y divide-gray-200",children:e.upcomingViewings.map(e=>t.jsx("div",{className:"p-4 hover:bg-gray-50",children:(0,t.jsxs)(d(),{href:`/dashboard/scheduled-viewings/${e.id}`,className:"block",children:[t.jsx("h3",{className:"font-medium text-gray-900",children:e.property_title||"Property Viewing"}),(0,t.jsxs)("div",{className:"mt-1 flex flex-wrap items-center text-sm text-gray-500 gap-2",children:[t.jsx("span",{children:new Date(e.viewing_date).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"})}),t.jsx("span",{className:"hidden sm:inline-block",children:"|"}),t.jsx("span",{children:new Date(e.viewing_date).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})})]}),t.jsx("div",{className:"mt-2",children:t.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${"scheduled"===e.status||"pending"===e.status?"bg-blue-100 text-blue-800":"confirmed"===e.status?"bg-green-100 text-green-800":"cancelled"===e.status?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:"scheduled"===e.status||"pending"===e.status?"Scheduled":"confirmed"===e.status?"Confirmed":"cancelled"===e.status?"Canceled":e.status.charAt(0).toUpperCase()+e.status.slice(1)})})]})},e.id))})}):t.jsx("div",{className:"bg-gray-100 rounded-xl h-48 flex items-center justify-center border border-dashed border-gray-300",children:(0,t.jsxs)("div",{className:"text-center p-6",children:[t.jsx("div",{className:"mb-2 text-gray-500",children:"No upcoming viewings scheduled"}),(0,t.jsxs)(d(),{href:"/properties",className:"inline-flex items-center bg-primary-600 hover:bg-primary-700 text-white font-medium py-2 px-4 rounded-lg transition-colors text-sm",children:[t.jsx(l.jRj,{className:"mr-1.5"}),"Find Properties"]})]})})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h2",{className:"text-heading-3",children:"Insights"}),t.jsx("div",{className:"text-xs text-gray-500",children:new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 p-4 sm:p-6 shadow-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx("div",{className:"w-8 h-8 bg-secondary-100 rounded-full flex items-center justify-center text-secondary-600",children:t.jsx(l.orK,{className:"h-4 w-4"})}),t.jsx("h3",{className:"text-base font-medium text-gray-900",children:"Current Market Trends"})]}),s?(0,t.jsxs)("div",{className:"animate-pulse space-y-3",children:[t.jsx("div",{className:"h-4 bg-gray-200 rounded w-full"}),t.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"}),t.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"})]}):(0,t.jsxs)("div",{className:"space-y-3 text-sm text-gray-600",children:[(0,t.jsxs)("p",{children:["Based on your location preferences, property prices in ",e.recentPropertyRequests?.[0]?.location||"New Cairo"," have",Math.random()>.5?"increased":"stabilized"," recently. The average price per square meter is now",new Intl.NumberFormat("en-US",{style:"currency",currency:"EGP",maximumFractionDigits:0}).format(18500+Math.floor(2e3*Math.random())),"."]}),(0,t.jsxs)("p",{children:[e.availableProperties.matchingCount," properties match your latest search criteria. This represents",Math.round(e.availableProperties.matchingCount/e.availableProperties.total*100)||5,"% of the current market inventory."]}),(0,t.jsxs)("p",{children:["Properties like ",e.recentPropertyRequests?.[0]?.property_type||"Apartments"," in your preferred locations typically receive ",3+Math.floor(5*Math.random())," viewing requests per week, so we recommend scheduling viewings promptly."]})]})]})]})]})}},2918:(e,s,r)=>{"use strict";r.r(s),r.d(s,{$$typeof:()=>n,__esModule:()=>i,default:()=>l});var t=r(5153);let a=(0,t.createProxy)(String.raw`E:\bigdealegy\bigdealegy\frontend\src\app\dashboard\page.tsx`),{__esModule:i,$$typeof:n}=a,d=a.default,l=d}};var s=require("../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),r=s.X(0,[657,4043,2076,1407,2070,549,5846,9494],()=>__webpack_exec__(5804));module.exports=r})();