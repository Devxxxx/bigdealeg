(()=>{var e={};e.id=9105,e.ids=[9105],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},7418:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>d,routeModule:()=>m,tree:()=>c});var s=r(7096),a=r(6132),i=r(7284),l=r.n(i),n=r(2564),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);r.d(t,o);let c=["",{children:["dashboard",{children:["activity",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,6862)),"E:\\bigdealegy\\bigdealegy\\frontend\\src\\app\\dashboard\\activity\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,8182)),"E:\\bigdealegy\\bigdealegy\\frontend\\src\\app\\dashboard\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,9851)),"E:\\bigdealegy\\bigdealegy\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9291,23)),"next/dist/client/components/not-found-error"]}],d=["E:\\bigdealegy\\bigdealegy\\frontend\\src\\app\\dashboard\\activity\\page.tsx"],p="/dashboard/activity/page",u={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/activity/page",pathname:"/dashboard/activity",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},5940:(e,t,r)=>{Promise.resolve().then(r.bind(r,2374))},2374:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>ActivityHistory});var s=r(784),a=r(9885),i=r(6405),l=r(3500),n=r(5105);function ActivityHistory(){let{supabase:e}=(0,i.$)(),[t,r]=(0,a.useState)(!0),[o,c]=(0,a.useState)([]),[d,p]=(0,a.useState)("all"),[u,m]=(0,a.useState)("");(0,a.useEffect)(()=>{let fetchActivities=async()=>{try{r(!0);let{data:{user:t}}=await e.auth.getUser();if(!t)throw Error("User not authenticated");let{data:s,error:a}=await e.from("user_activity").select(`
            id,
            user_id,
            activity_type,
            property_id,
            details,
            created_at,
            properties:property_id (
              title,
              location
            )
          `).eq("user_id",t.id).order("created_at",{ascending:!1}).limit(100);if(a)throw a;let i=s.map(e=>({id:e.id,user_id:e.user_id,activity_type:e.activity_type,property_id:e.property_id,property_title:e.properties?.title,property_location:e.properties?.location,details:e.details,created_at:e.created_at}));c(i)}catch(e){console.error("Error fetching activity history:",e)}finally{r(!1)}};fetchActivities()},[e]);let x=o.filter(e=>{let t="all"===d||e.activity_type===d,r=""===u||e.property_title&&e.property_title.toLowerCase().includes(u.toLowerCase())||e.property_location&&e.property_location.toLowerCase().includes(u.toLowerCase())||e.details&&e.details.toLowerCase().includes(u.toLowerCase());return t&&r}),formatDate=e=>{let t=new Date(e);return t.toLocaleDateString("en-US",{day:"numeric",month:"short",year:"numeric"})},formatTime=e=>{let t=new Date(e);return t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})},getActivityIcon=e=>{switch(e){case"view":return s.jsx(l.dSq,{className:"h-5 w-5 text-blue-500"});case"save":return s.jsx(l.W95,{className:"h-5 w-5 text-green-500"});case"favorite":return s.jsx(l.$0H,{className:"h-5 w-5 text-red-500"});case"message":return s.jsx(l.DCG,{className:"h-5 w-5 text-purple-500"});case"request":return s.jsx(l.W95,{className:"h-5 w-5 text-orange-500"});case"viewing":return s.jsx(l.IiJ,{className:"h-5 w-5 text-teal-500"});default:return s.jsx(l.ceS,{className:"h-5 w-5 text-gray-500"})}},getActivityDescription=e=>{switch(e.activity_type){case"view":return`You viewed a property: ${e.property_title}`;case"save":return`You saved a property: ${e.property_title}`;case"favorite":return`You favorited a property: ${e.property_title}`;case"message":return`You sent a message regarding: ${e.property_title}`;case"request":return`You submitted a property request ${e.details?": "+e.details:""}`;case"viewing":return`You scheduled a viewing for: ${e.property_title}`;default:return`Activity on property: ${e.property_title}`}};return(0,s.jsxs)("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[s.jsx(n.vlc,{className:"h-10 w-10 text-primary-500"}),"Activity History"]}),s.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Track your recent activities and interactions"})]})}),(0,s.jsxs)("div",{className:"flex flex-col md:flex-row space-y-2 md:space-y-0 md:space-x-4",children:[(0,s.jsxs)("div",{className:"relative flex-grow",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(l.U41,{className:"h-4 w-4 text-gray-400"})}),s.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-primary focus:border-primary sm:text-sm",placeholder:"Search activities...",value:u,onChange:e=>m(e.target.value)})]}),(0,s.jsxs)("div",{className:"relative w-full md:w-56",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(l.ulB,{className:"h-4 w-4 text-gray-400"})}),(0,s.jsxs)("select",{className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white focus:outline-none focus:ring-primary focus:border-primary sm:text-sm",value:d,onChange:e=>p(e.target.value),children:[s.jsx("option",{value:"all",children:"All Activities"}),s.jsx("option",{value:"view",children:"Property Views"}),s.jsx("option",{value:"save",children:"Saved Properties"}),s.jsx("option",{value:"favorite",children:"Favorited Properties"}),s.jsx("option",{value:"message",children:"Messages"}),s.jsx("option",{value:"request",children:"Property Requests"}),s.jsx("option",{value:"viewing",children:"Scheduled Viewings"})]})]})]}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:(0,s.jsxs)("div",{className:"p-6",children:[s.jsx("div",{className:"flex justify-between items-center",children:(0,s.jsxs)("h2",{className:"text-lg font-medium text-gray-900",children:["Your Recent Activities",s.jsx("span",{className:"ml-2 bg-gray-100 text-gray-700 text-xs px-2 py-1 rounded-full",children:x.length})]})}),t?(0,s.jsxs)("div",{className:"flex justify-center items-center p-12",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"}),s.jsx("span",{className:"ml-3 text-sm text-gray-500",children:"Loading activities..."})]}):0===x.length?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center p-12 text-center",children:[s.jsx(n.vlc,{className:"h-10 w-10 text-primary-500"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No activities found"}),s.jsx("p",{className:"text-gray-500 text-sm mb-4",children:u||"all"!==d?"Try adjusting your search or filter":"Your activity history will appear here as you interact with properties"}),(0,s.jsxs)("a",{href:"/properties",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",children:[s.jsx(l.U41,{className:"mr-2 h-4 w-4"}),"Browse Properties"]})]}):s.jsx("div",{className:"mt-6 flow-root",children:s.jsx("ul",{className:"-mb-8",children:x.map((e,t)=>s.jsx("li",{children:(0,s.jsxs)("div",{className:"relative pb-8",children:[t!==x.length-1?s.jsx("span",{className:"absolute top-5 left-5 -ml-px h-full w-0.5 bg-gray-200","aria-hidden":"true"}):null,(0,s.jsxs)("div",{className:"relative flex items-start space-x-3",children:[s.jsx("div",{className:"relative",children:s.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-100 flex items-center justify-center ring-8 ring-white",children:getActivityIcon(e.activity_type)})}),(0,s.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,s.jsxs)("div",{children:[s.jsx("div",{className:"text-sm",children:s.jsx("p",{className:"font-medium text-gray-900",children:getActivityDescription(e)})}),s.jsx("div",{className:"mt-1 text-sm text-gray-500",children:s.jsx("div",{className:"flex items-center",children:(0,s.jsxs)("time",{dateTime:e.created_at,children:[formatDate(e.created_at)," at ",formatTime(e.created_at)]})})}),e.property_location&&s.jsx("div",{className:"mt-1 text-sm text-gray-500",children:(0,s.jsxs)("span",{children:["Location: ",e.property_location]})})]}),e.property_id&&s.jsx("div",{className:"mt-2",children:(0,s.jsxs)("a",{href:`/properties/${e.property_id}`,className:"inline-flex items-center px-3 py-1 border border-gray-300 text-xs font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",children:[s.jsx(l.dSq,{className:"mr-1 h-3 w-3"}),"View Property"]})})]})]})]})},e.id))})})]})})]})}},6405:(e,t,r)=>{"use strict";r.d(t,{$:()=>useSupabase}),r(784);let useSupabase=()=>{throw Error("useSupabase has been deprecated. Use the backend API endpoints instead.")}},6862:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>l,__esModule:()=>i,default:()=>o});var s=r(5153);let a=(0,s.createProxy)(String.raw`E:\bigdealegy\bigdealegy\frontend\src\app\dashboard\activity\page.tsx`),{__esModule:i,$$typeof:l}=a,n=a.default,o=n}};var t=require("../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),r=t.X(0,[657,4043,2076,3500,1407,2070,549,5846,9494],()=>__webpack_exec__(7418));module.exports=r})();