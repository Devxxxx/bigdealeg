(()=>{var e={};e.id=3867,e.ids=[3867],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},2429:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>o,originalPathname:()=>x,pages:()=>m,routeModule:()=>h,tree:()=>d});var r=t(7096),a=t(6132),i=t(7284),n=t.n(i),l=t(2564),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);t.d(s,c);let d=["",{children:["dashboard",{children:["property-requests",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,908)),"E:\\bigdealegy\\bigdealegy\\frontend\\src\\app\\dashboard\\property-requests\\[id]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,8182)),"E:\\bigdealegy\\bigdealegy\\frontend\\src\\app\\dashboard\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,9851)),"E:\\bigdealegy\\bigdealegy\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9291,23)),"next/dist/client/components/not-found-error"]}],m=["E:\\bigdealegy\\bigdealegy\\frontend\\src\\app\\dashboard\\property-requests\\[id]\\page.tsx"],x="/dashboard/property-requests/[id]/page",o={require:t,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/property-requests/[id]/page",pathname:"/dashboard/property-requests/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},8745:(e,s,t)=>{Promise.resolve().then(t.bind(t,7974))},7974:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>PropertyRequestDetail});var r=t(784),a=t(9885),i=t(7114),n=t(1440),l=t.n(n),c=t(1332),d=t(7686),m=t(647),x=t(4252),o=t(5105),h=t(3431),p=t(2522);function PropertyRequestDetail({params:e}){let{id:s}=e,{user:t}=(0,m.a)(),n=(0,i.useRouter)(),{currentRequest:u,loading:y,fetchRequestById:g}=(0,x.m)(),[j,f]=(0,a.useState)([]),[b,N]=(0,a.useState)("details");(0,a.useEffect)(()=>{s&&g(s)},[s,g]),(0,a.useEffect)(()=>{if(u&&u.property_matches){let e=[...u.property_matches].filter(e=>e.properties).sort((e,s)=>s.match_score-e.match_score).map(e=>({...e.properties,matchPercentage:e.match_score}));f(e)}},[u]);let handleScheduleViewing=async e=>{n.push(`/dashboard/schedule-viewing/${e}?request_id=${s}`)},formatDate=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return y?r.jsx("div",{className:"flex justify-center items-center h-40",children:(0,r.jsxs)("div",{className:"relative h-10 w-10",children:[r.jsx("div",{className:"absolute top-0 left-0 right-0 bottom-0 border-t-3 border-primary-500 border-solid rounded-full animate-spin"}),r.jsx("div",{className:"absolute top-0 left-0 right-0 bottom-0 border-t-3 border-primary-200 border-solid rounded-full opacity-20"})]})}):u?(0,r.jsxs)(c.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-3 gap-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)(l(),{href:"/dashboard/property-requests",className:"inline-flex items-center text-xs text-gray-500 hover:text-primary mb-1",children:[r.jsx(o.Ao2,{className:"mr-1 h-3 w-3"}),"Back to requests"]}),r.jsx("h1",{className:"text-xl font-bold text-gray-900",children:u.title||`Request #${u.id.substring(0,8)}`}),(0,r.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(e=>{switch(e){case"pending":return(0,r.jsxs)("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-medium bg-amber-100 text-amber-800",children:[r.jsx(o.bcx,{className:"mr-1 h-3 w-3"}),"Pending"]});case"active":return(0,r.jsxs)("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[r.jsx(o._rq,{className:"mr-1 h-3 w-3"}),"Active"]});case"closed":return(0,r.jsxs)("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:[r.jsx(o.$Rx,{className:"mr-1 h-3 w-3"}),"Closed"]});default:return(0,r.jsxs)("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[r.jsx(o.H33,{className:"mr-1 h-3 w-3"}),e?e.charAt(0).toUpperCase()+e.slice(1):"Unknown"]})}})(u.status),(0,r.jsxs)("span",{className:"text-xs text-gray-500",children:["Created ",formatDate(u.created_at)]})]})]}),r.jsx(p.Z,{variant:"outline",href:`/dashboard/property-requests/${s}/edit`,leftIcon:r.jsx(o.vPQ,{}),size:"sm",children:"Edit"})]}),(0,r.jsxs)("div",{className:"flex border-b border-gray-200 mb-3",children:[(0,r.jsxs)("button",{onClick:()=>N("details"),className:`flex items-center px-3 py-2 text-xs font-medium -mb-px ${"details"===b?"text-primary-600 border-b-2 border-primary-500":"text-gray-500 hover:text-gray-700 hover:border-gray-300 border-b-2 border-transparent"}`,children:[r.jsx(o.j4u,{className:"mr-1.5 h-3.5 w-3.5"}),"Request Details"]}),(0,r.jsxs)("button",{onClick:()=>N("matches"),className:`flex items-center px-3 py-2 text-xs font-medium -mb-px ${"matches"===b?"text-primary-600 border-b-2 border-primary-500":"text-gray-500 hover:text-gray-700 hover:border-gray-300 border-b-2 border-transparent"}`,children:[r.jsx(o.fsB,{className:"mr-1.5 h-3.5 w-3.5"}),"Matches ",j.length>0&&`(${j.length})`]}),u.status_history&&u.status_history.length>0&&(0,r.jsxs)("button",{onClick:()=>N("history"),className:`flex items-center px-3 py-2 text-xs font-medium -mb-px ${"history"===b?"text-primary-600 border-b-2 border-primary-500":"text-gray-500 hover:text-gray-700 hover:border-gray-300 border-b-2 border-transparent"}`,children:[r.jsx(o.TCC,{className:"mr-1.5 h-3.5 w-3.5"}),"History"]})]}),(0,r.jsxs)(d.M,{mode:"wait",children:["details"===b&&r.jsx(c.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:(0,r.jsxs)(h.Z,{className:"overflow-hidden",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 p-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center mb-1",children:[r.jsx(o.m6D,{className:"text-primary-500 mr-1 h-3.5 w-3.5"}),r.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Property Type"})]}),r.jsx("p",{className:"text-sm font-medium",children:u.property_type})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center mb-1",children:[r.jsx(o.i63,{className:"text-primary-500 mr-1 h-3.5 w-3.5"}),r.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Location"})]}),r.jsx("p",{className:"text-sm font-medium",children:u.location})]}),(0,r.jsxs)("div",{className:"col-span-2",children:[(0,r.jsxs)("div",{className:"flex items-center mb-1",children:[r.jsx(o.oQC,{className:"text-primary-500 mr-1 h-3.5 w-3.5"}),r.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Price Range"})]}),(0,r.jsxs)("p",{className:"text-sm font-medium",children:[u.min_price?.toLocaleString()," - ",u.max_price?.toLocaleString()," EGP"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center mb-1",children:[r.jsx(o.ERY,{className:"text-primary-500 mr-1 h-3.5 w-3.5"}),r.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Bedrooms"})]}),r.jsx("p",{className:"text-sm font-medium",children:u.bedrooms})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center mb-1",children:[r.jsx(o.ERY,{className:"text-primary-500 mr-1 h-3.5 w-3.5"}),r.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Bathrooms"})]}),r.jsx("p",{className:"text-sm font-medium",children:u.bathrooms})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center mb-1",children:[r.jsx(o.D7o,{className:"text-primary-500 mr-1 h-3.5 w-3.5"}),r.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Area Size"})]}),(0,r.jsxs)("p",{className:"text-sm font-medium",children:[u.area_size," m\xb2"]})]}),u.custom_fields&&Object.keys(u.custom_fields).length>0&&(0,r.jsxs)("div",{className:"col-span-2 sm:col-span-4 border-t border-gray-100 pt-3 mt-1",children:[r.jsx("div",{className:"flex items-center mb-2",children:r.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Additional Features"})}),r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:Object.entries(u.custom_fields).map(([e,s])=>r.jsx("div",{className:"flex items-center",children:"boolean"==typeof s?(0,r.jsxs)("span",{className:`inline-flex items-center text-xs ${s?"text-green-600":"text-gray-400"}`,children:[s?r.jsx(o._rq,{className:"mr-1 h-3 w-3"}):r.jsx(o.$Rx,{className:"mr-1 h-3 w-3"}),e.replace(/_/g," ")]}):(0,r.jsxs)("span",{className:"text-xs",children:[(0,r.jsxs)("span",{className:"font-medium",children:[e.replace(/_/g," "),":"]})," ",s.toString()]})},e))})]}),u.additional_features&&(0,r.jsxs)("div",{className:"col-span-2 sm:col-span-4 border-t border-gray-100 pt-3 mt-1",children:[r.jsx("div",{className:"flex items-center mb-1",children:r.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Additional Requirements"})}),r.jsx("p",{className:"text-sm text-gray-600",children:u.additional_features})]})]}),j.length>0&&(0,r.jsxs)("div",{className:"border-t border-gray-100 px-4 py-3 bg-gray-50 flex justify-between items-center",children:[r.jsx("div",{children:(0,r.jsxs)("span",{className:"text-xs font-medium text-gray-600",children:[j.length," matching ",1===j.length?"property":"properties"," found"]})}),r.jsx(p.Z,{variant:"light",size:"xs",rightIcon:r.jsx(o.Tfp,{}),onClick:()=>N("matches"),children:"View Matches"})]})]})},"details"),"matches"===b&&r.jsx(c.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:j.length>0?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:j.map(e=>(0,r.jsxs)(h.Z,{padding:"none",hover:!0,className:"overflow-hidden",children:[(0,r.jsxs)("div",{className:"relative h-32 bg-gray-100",children:[e.featured_image?r.jsx("img",{src:e.featured_image,alt:e.title,className:"h-full w-full object-cover"}):r.jsx("div",{className:"flex items-center justify-center h-full w-full bg-gray-100",children:r.jsx(o.m6D,{className:"h-8 w-8 text-gray-300"})}),(0,r.jsxs)("div",{className:"absolute top-2 right-2 bg-primary-600 text-white text-xs font-bold px-2 py-1 rounded shadow",children:[e.matchPercentage,"% Match"]})]}),(0,r.jsxs)("div",{className:"p-3",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:e.title}),(0,r.jsxs)("div",{className:"flex items-center text-xs text-gray-500 mb-1.5",children:[r.jsx(o.i63,{className:"h-3 w-3 text-gray-400 mr-1"}),e.location]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("p",{className:"text-sm font-bold text-primary-600",children:[e.price?.toLocaleString()," EGP"]}),(0,r.jsxs)("div",{className:"flex items-center text-xs text-gray-500",children:[e.bedrooms&&(0,r.jsxs)("span",{className:"mr-2",children:[e.bedrooms," Beds"]}),e.bathrooms&&(0,r.jsxs)("span",{className:"mr-2",children:[e.bathrooms," Baths"]}),(0,r.jsxs)("span",{children:[e.area_size," m\xb2"]})]})]}),(0,r.jsxs)("div",{className:"flex gap-1 mt-3",children:[r.jsx(p.Z,{variant:"outline",leftIcon:r.jsx(o.rDJ,{}),size:"xs",href:`/properties/${e.id}`,className:"flex-1",children:"View"}),r.jsx(p.Z,{variant:"primary",leftIcon:r.jsx(o.vlc,{}),size:"xs",onClick:()=>handleScheduleViewing(e.id),className:"flex-1",children:"Schedule"})]})]})]},e.id))}):(0,r.jsxs)(h.Z,{className:"py-4 text-center",children:[r.jsx("div",{className:"mx-auto h-10 w-10 rounded-full bg-gray-100 flex items-center justify-center mb-2",children:r.jsx(o.H33,{className:"h-5 w-5 text-gray-400"})}),r.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"No matching properties"}),r.jsx("p",{className:"text-xs text-gray-500 max-w-md mx-auto mb-3",children:"We couldn't find any properties matching your requirements."}),r.jsx("p",{className:"text-xs text-gray-500 max-w-md mx-auto",children:"Try adjusting your requirements or check back later."})]})},"matches"),"history"===b&&u.status_history&&u.status_history.length>0&&r.jsx(c.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:r.jsx(h.Z,{children:r.jsx("div",{className:"divide-y divide-gray-100",children:u.status_history.map(e=>r.jsx("div",{className:"px-3 py-2",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsxs)("div",{className:"h-8 w-8 rounded-full bg-gray-100 flex items-center justify-center mr-2",children:["active"===e.new_status&&r.jsx(o._rq,{className:"h-4 w-4 text-green-500"}),"pending"===e.new_status&&r.jsx(o.bcx,{className:"h-4 w-4 text-amber-500"}),"closed"===e.new_status&&r.jsx(o.$Rx,{className:"h-4 w-4 text-gray-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-xs font-medium text-gray-900",children:["Status changed to ",r.jsx("span",{className:"font-bold",children:e.new_status}),e.old_status&&(0,r.jsxs)("span",{className:"text-gray-500",children:[" from ",e.old_status]})]}),e.notes&&r.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:e.notes})]})]}),r.jsx("p",{className:"text-xs text-gray-500 ml-2",children:formatDate(e.created_at)})]})},e.id))})})},"history")]})]}):(0,r.jsxs)(h.Z,{className:"py-6 text-center",children:[r.jsx("div",{className:"mx-auto h-12 w-12 rounded-full bg-primary-50 flex items-center justify-center mb-3",children:r.jsx(o.H33,{className:"h-6 w-6 text-primary-500"})}),r.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"Request not found"}),r.jsx("p",{className:"text-xs text-gray-500 max-w-md mx-auto mb-4",children:"The property request you're looking for doesn't exist or you don't have access to it."}),r.jsx(p.Z,{variant:"primary",href:"/dashboard/property-requests",leftIcon:r.jsx(o.Ao2,{}),size:"sm",children:"Back to Requests"})]})}},908:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>n,__esModule:()=>i,default:()=>c});var r=t(5153);let a=(0,r.createProxy)(String.raw`E:\bigdealegy\bigdealegy\frontend\src\app\dashboard\property-requests\[id]\page.tsx`),{__esModule:i,$$typeof:n}=a,l=a.default,c=l}};var s=require("../../../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),t=s.X(0,[657,4043,2076,1332,7686,1407,2070,549,5846,2522,3431,9494,4383,4252],()=>__webpack_exec__(2429));module.exports=t})();