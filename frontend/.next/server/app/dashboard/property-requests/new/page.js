(()=>{var e={};e.id=2673,e.ids=[2673],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},1119:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>l.a,__next_app__:()=>p,originalPathname:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>d});var s=t(7096),a=t(6132),i=t(7284),l=t.n(i),n=t(2564),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);t.d(r,o);let d=["",{children:["dashboard",{children:["property-requests",{children:["new",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,2071)),"E:\\bigdealegy\\bigdealegy\\frontend\\src\\app\\dashboard\\property-requests\\new\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,8182)),"E:\\bigdealegy\\bigdealegy\\frontend\\src\\app\\dashboard\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,9851)),"E:\\bigdealegy\\bigdealegy\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9291,23)),"next/dist/client/components/not-found-error"]}],c=["E:\\bigdealegy\\bigdealegy\\frontend\\src\\app\\dashboard\\property-requests\\new\\page.tsx"],m="/dashboard/property-requests/new/page",p={require:t,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/property-requests/new/page",pathname:"/dashboard/property-requests/new",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},914:(e,r,t)=>{Promise.resolve().then(t.bind(t,1146))},1146:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>NewPropertyRequest});var s=t(784),a=t(9885),i=t(7114),l=t(1440),n=t.n(l),o=t(1332),d=t(647),c=t(4252),m=t(6558),p=t(5105),u=t(3431),x=t(2522),h=t(2770);function NewPropertyRequest(){let{user:e}=(0,d.a)(),r=(0,i.useRouter)(),{createRequest:t,fields:l,loading:b}=(0,c.m)(),[y,f]=(0,a.useState)(!1),[g,j]=(0,a.useState)(1),[v,_]=(0,a.useState)(0),{register:N,handleSubmit:q,watch:w,formState:{errors:P,isValid:k,touchedFields:S,dirtyFields:E}}=(0,m.cI)({mode:"onChange",defaultValues:{title:"",property_type:"",location:"",min_price:"",max_price:"",bedrooms:"",bathrooms:"",area_size:"",additional_features:""}}),C=w();(0,a.useEffect)(()=>{if(b)return;let e=l.filter(e=>e.is_required).map(e=>e.field_name),r=["title","property_type","location","min_price","max_price","bedrooms","bathrooms","area_size",...e],t=r.filter(e=>{let r=C[e];return null!=r&&""!==r}).length,s=Math.min(Math.round(t/r.length*100),100);_(s)},[C,l,b]);let onSubmit=async s=>{if(e){f(!0);try{let e={};l.forEach(r=>{void 0!==s[r.field_name]&&(e[r.field_name]=s[r.field_name],delete s[r.field_name])});let a={title:s.title,property_type:s.property_type,location:s.location,min_price:Number(s.min_price),max_price:Number(s.max_price),bedrooms:s.bedrooms,bathrooms:s.bathrooms,area_size:Number(s.area_size),additional_features:s.additional_features,custom_fields:e},i=await t(a);i&&r.push(`/dashboard/property-requests/${i.id}`)}catch(e){console.error("Error creating property request:",e),alert("Failed to create property request. Please try again.")}finally{f(!1)}}},$=l.length>0?3:2,z=1===g?[{id:"title",name:"title",label:"Request Title",type:"text",span:"full",required:!0,icon:p.NOg},{id:"property_type",name:"property_type",label:"Property Type",type:"select",span:"half",required:!0,icon:p.m6D},{id:"location",name:"location",label:"Location",type:"text",span:"half",required:!0,icon:p.i63},{id:"min_price",name:"min_price",label:"Minimum Price (EGP)",type:"number",span:"half",required:!0,icon:p.oQC},{id:"max_price",name:"max_price",label:"Maximum Price (EGP)",type:"number",span:"half",required:!0,icon:p.oQC}]:2===g?[{id:"bedrooms",name:"bedrooms",label:"Bedrooms",type:"select",span:"third",required:!0,icon:p.D7o},{id:"bathrooms",name:"bathrooms",label:"Bathrooms",type:"select",span:"third",required:!0,icon:p.D7o},{id:"area_size",name:"area_size",label:"Area Size (m\xb2)",type:"number",span:"third",required:!0,icon:p.D7o},{id:"additional_features",name:"additional_features",label:"Additional Features & Requirements",type:"textarea",span:"full",required:!1,icon:null}]:3===g?l.map(e=>({id:e.field_name,name:e.field_name,label:e.field_label,type:e.field_type,span:e.field_span,required:e.is_required,help:e.help_text,icon:null,options:e.options})):[];return b?s.jsx("div",{className:"flex justify-center items-center h-40",children:(0,s.jsxs)("div",{className:"relative h-10 w-10",children:[s.jsx("div",{className:"absolute top-0 left-0 right-0 bottom-0 border-t-3 border-primary-500 border-solid rounded-full animate-spin"}),s.jsx("div",{className:"absolute top-0 left-0 right-0 bottom-0 border-t-3 border-primary-200 border-solid rounded-full opacity-20"})]})}):(0,s.jsxs)(o.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:[s.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-3 gap-2",children:(0,s.jsxs)("div",{children:[(0,s.jsxs)(n(),{href:"/dashboard/property-requests",className:"inline-flex items-center text-xs text-gray-500 hover:text-primary mb-1",children:[s.jsx(p.Ao2,{className:"mr-1 h-3 w-3"}),"Back to requests"]}),s.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"New Property Request"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Tell us what you're looking for and we'll find matching properties"})]})}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[s.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Form Progress"}),(0,s.jsxs)("span",{className:"text-xs font-medium text-gray-700",children:[v,"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:s.jsx("div",{className:"bg-primary-500 h-1.5 rounded-full transition-all duration-300",style:{width:`${v}%`}})})]}),s.jsx("div",{className:"flex mb-3",children:Array.from({length:$}).map((e,r)=>(0,s.jsxs)("div",{className:"flex-1 flex items-center",onClick:()=>r<g&&j(r+1),children:[s.jsx("div",{className:`h-6 w-6 rounded-full flex items-center justify-center text-xs font-medium ${r+1<g?"bg-primary-500 text-white":r+1===g?"bg-primary-100 text-primary-700 border border-primary-500":"bg-gray-100 text-gray-500 border border-gray-300"}`,children:r+1<g?s.jsx(p.UgA,{className:"h-3 w-3"}):r+1}),r<$-1&&s.jsx("div",{className:`flex-1 h-0.5 ${r+1<g?"bg-primary-500":"bg-gray-200"}`})]},r))}),s.jsx(u.Z,{children:(0,s.jsxs)("form",{onSubmit:q(onSubmit),children:[s.jsx("div",{className:"p-4",children:s.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-6",children:z.map(e=>s.jsx("div",{className:`${"checkbox"===e.type?"flex items-start space-x-2":""} ${"full"===e.span?"sm:col-span-6":"half"===e.span?"sm:col-span-3":(e.span,"sm:col-span-2")}`,children:"checkbox"===e.type?(0,s.jsxs)("div",{className:"flex items-start",children:[s.jsx("div",{className:"flex items-center h-5",children:s.jsx("input",{id:e.id,type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500",...N(e.name,{required:e.required})})}),(0,s.jsxs)("div",{className:"ml-2",children:[(0,s.jsxs)("label",{htmlFor:e.id,className:"text-xs font-medium text-gray-700",children:[e.label,e.required&&s.jsx("span",{className:"text-red-500 ml-0.5",children:"*"})]}),e.help&&s.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:e.help})]})]}):"select"===e.type?(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:e.id,className:"flex items-center text-xs font-medium text-gray-700 mb-1",children:[e.icon&&s.jsx(e.icon,{className:"mr-1 h-3 w-3 text-gray-400"}),e.label,e.required&&s.jsx("span",{className:"text-red-500 ml-0.5",children:"*"})]}),"property_type"===e.name?(0,s.jsxs)("select",{id:e.id,className:`block w-full rounded-lg border ${P[e.name]?"border-red-300":"border-gray-300"} py-1.5 px-3 text-sm bg-white focus:outline-none focus:ring-primary-500 focus:border-primary-500`,defaultValue:"",...N(e.name,{required:e.required}),children:[s.jsx("option",{value:"",disabled:!0,children:"Select a property type"}),s.jsx("option",{value:"Apartment",children:"Apartment"}),s.jsx("option",{value:"Villa",children:"Villa"}),s.jsx("option",{value:"Townhouse",children:"Townhouse"}),s.jsx("option",{value:"Penthouse",children:"Penthouse"}),s.jsx("option",{value:"Chalet",children:"Chalet"}),s.jsx("option",{value:"Duplex",children:"Duplex"}),s.jsx("option",{value:"Office",children:"Office"}),s.jsx("option",{value:"Shop",children:"Shop"}),s.jsx("option",{value:"Land",children:"Land"})]}):"bedrooms"===e.name?(0,s.jsxs)("select",{id:e.id,className:`block w-full rounded-lg border ${P[e.name]?"border-red-300":"border-gray-300"} py-1.5 px-3 text-sm bg-white focus:outline-none focus:ring-primary-500 focus:border-primary-500`,defaultValue:"",...N(e.name,{required:e.required}),children:[s.jsx("option",{value:"",disabled:!0,children:"Select bedrooms"}),s.jsx("option",{value:"Studio",children:"Studio"}),s.jsx("option",{value:"1",children:"1"}),s.jsx("option",{value:"2",children:"2"}),s.jsx("option",{value:"3",children:"3"}),s.jsx("option",{value:"4",children:"4"}),s.jsx("option",{value:"5",children:"5"}),s.jsx("option",{value:"6+",children:"6+"})]}):"bathrooms"===e.name?(0,s.jsxs)("select",{id:e.id,className:`block w-full rounded-lg border ${P[e.name]?"border-red-300":"border-gray-300"} py-1.5 px-3 text-sm bg-white focus:outline-none focus:ring-primary-500 focus:border-primary-500`,defaultValue:"",...N(e.name,{required:e.required}),children:[s.jsx("option",{value:"",disabled:!0,children:"Select bathrooms"}),s.jsx("option",{value:"1",children:"1"}),s.jsx("option",{value:"2",children:"2"}),s.jsx("option",{value:"3",children:"3"}),s.jsx("option",{value:"4",children:"4"}),s.jsx("option",{value:"5+",children:"5+"})]}):e.options?(0,s.jsxs)("select",{id:e.id,className:`block w-full rounded-lg border ${P[e.name]?"border-red-300":"border-gray-300"} py-1.5 px-3 text-sm bg-white focus:outline-none focus:ring-primary-500 focus:border-primary-500`,defaultValue:"",...N(e.name,{required:e.required}),children:[s.jsx("option",{value:"",disabled:!0,children:e.placeholder||"Select an option"}),e.options?.split(",").map(e=>s.jsx("option",{value:e.trim(),children:e.trim()},e.trim()))]}):s.jsx("select",{id:e.id,className:`block w-full rounded-lg border ${P[e.name]?"border-red-300":"border-gray-300"} py-1.5 px-3 text-sm bg-white focus:outline-none focus:ring-primary-500 focus:border-primary-500`,defaultValue:"",...N(e.name,{required:e.required}),children:s.jsx("option",{value:"",disabled:!0,children:e.placeholder||"Select an option"})}),P[e.name]&&s.jsx("p",{className:"mt-1 text-xs text-red-600",children:"This field is required"}),e.help&&s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:e.help})]}):"textarea"===e.type?(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:e.id,className:"flex items-center text-xs font-medium text-gray-700 mb-1",children:[e.icon&&s.jsx(e.icon,{className:"mr-1 h-3 w-3 text-gray-400"}),e.label,e.required&&s.jsx("span",{className:"text-red-500 ml-0.5",children:"*"})]}),s.jsx("textarea",{id:e.id,rows:3,className:`block w-full rounded-lg border ${P[e.name]?"border-red-300":"border-gray-300"} shadow-sm text-sm py-1.5 px-3 focus:border-primary-500 focus:ring focus:ring-primary-500 focus:ring-opacity-50`,placeholder:e.placeholder||`Enter ${e.label.toLowerCase()}`,...N(e.name,{required:e.required})}),P[e.name]&&s.jsx("p",{className:"mt-1 text-xs text-red-600",children:"This field is required"}),e.help&&s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:e.help})]}):(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:e.id,className:"flex items-center text-xs font-medium text-gray-700 mb-1",children:[e.icon&&s.jsx(e.icon,{className:"mr-1 h-3 w-3 text-gray-400"}),e.label,e.required&&s.jsx("span",{className:"text-red-500 ml-0.5",children:"*"})]}),s.jsx(h.Z,{id:e.id,type:"number"===e.type?"number":"text",placeholder:e.placeholder||`Enter ${e.label.toLowerCase()}`,...N(e.name,{required:e.required,min:"number"===e.type?0:void 0}),error:!!P[e.name],size:"sm"}),P[e.name]&&s.jsx("p",{className:"mt-1 text-xs text-red-600",children:"This field is required"}),e.help&&s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:e.help})]})},e.id))})}),(0,s.jsxs)("div",{className:"px-4 py-3 bg-gray-50 border-t border-gray-100 flex justify-between",children:[s.jsx("div",{children:g>1&&s.jsx(x.Z,{type:"button",variant:"light",size:"sm",onClick:()=>{j(e=>Math.max(e-1,1))},children:"Previous"})}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[s.jsx(x.Z,{type:"button",variant:"outline",size:"sm",onClick:()=>r.push("/dashboard/property-requests"),children:"Cancel"}),g<$?s.jsx(x.Z,{type:"button",variant:"primary",size:"sm",onClick:()=>{j(e=>Math.min(e+1,$))},children:"Next"}):s.jsx(x.Z,{type:"submit",variant:"gradient",leftIcon:s.jsx(p.mW3,{}),size:"sm",loading:y,children:y?"Creating...":"Create Request"})]})]})]})}),1===g&&s.jsx(u.Z,{className:"mt-3 bg-blue-50 border-blue-100",children:(0,s.jsxs)("div",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0 pt-0.5",children:s.jsx(p.H33,{className:"h-5 w-5 text-blue-500"})}),(0,s.jsxs)("div",{className:"ml-3",children:[s.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"Property Request Tips"}),(0,s.jsxs)("div",{className:"mt-2 text-xs text-blue-700 space-y-1",children:[s.jsx("p",{children:"• A descriptive title helps us understand your needs better"}),s.jsx("p",{children:"• Be specific about your preferred location(s)"}),s.jsx("p",{children:"• Set a realistic price range based on your budget"})]})]})]})})]})}},2071:(e,r,t)=>{"use strict";t.r(r),t.d(r,{$$typeof:()=>l,__esModule:()=>i,default:()=>o});var s=t(5153);let a=(0,s.createProxy)(String.raw`E:\bigdealegy\bigdealegy\frontend\src\app\dashboard\property-requests\new\page.tsx`),{__esModule:i,$$typeof:l}=a,n=a.default,o=n}};var r=require("../../../../webpack-runtime.js");r.C(e);var __webpack_exec__=e=>r(r.s=e),t=r.X(0,[657,4043,2076,1332,6558,1407,2070,549,5846,2522,3431,9494,2770,4383,4252],()=>__webpack_exec__(1119));module.exports=t})();