(()=>{var e={};e.id=3455,e.ids=[3455],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},6309:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>d,routeModule:()=>h,tree:()=>o});var r=t(7096),a=t(6132),i=t(7284),n=t.n(i),l=t(2564),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);t.d(s,c);let o=["",{children:["dashboard",{children:["settings",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,2232)),"E:\\bigdealegy\\bigdealegy\\frontend\\src\\app\\dashboard\\settings\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,8182)),"E:\\bigdealegy\\bigdealegy\\frontend\\src\\app\\dashboard\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,9851)),"E:\\bigdealegy\\bigdealegy\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9291,23)),"next/dist/client/components/not-found-error"]}],d=["E:\\bigdealegy\\bigdealegy\\frontend\\src\\app\\dashboard\\settings\\page.tsx"],m="/dashboard/settings/page",x={require:t,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/settings/page",pathname:"/dashboard/settings",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},8249:(e,s,t)=>{Promise.resolve().then(t.bind(t,6768))},6768:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>Settings});var r=t(784),a=t(9885),i=t(1332),n=t(7686),l=t(5105),c=t(3431),o=t(2522),d=t(2770),m=t(1414),x=t(9377);function ProfileTab({profile:e,setProfile:s,setSuccessMessage:t,setErrorMessage:n}){let[h,u]=(0,a.useState)(!1),{updateProfile:g}=(0,x.r)(),handleProfileUpdate=async e=>{e.preventDefault(),u(!0),t(""),n("");try{await g(),t("Profile updated successfully")}catch(e){console.error("Error updating profile:",e),n("Failed to update profile: "+(e.message||"Unknown error"))}finally{u(!1)}};return r.jsx(i.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:(0,r.jsxs)(c.Z,{className:"overflow-hidden",children:[(0,r.jsxs)("div",{className:"px-6 py-5 border-b border-gray-100 flex items-center",children:[r.jsx(l.fzv,{className:"h-5 w-5 text-primary-500 mr-2"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Profile Information"})]}),r.jsx("div",{className:"p-6",children:(0,r.jsxs)("form",{onSubmit:handleProfileUpdate,children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6",children:[r.jsx(m.Z,{label:"Profile Photo",helpText:"Update your profile picture",span:"full",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsxs)("div",{className:"relative",children:[r.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-primary-400 to-primary-600 rounded-full flex items-center justify-center text-white text-2xl font-semibold",children:e.name?.charAt(0)||e.email?.charAt(0)||"U"}),r.jsx("div",{className:"absolute -bottom-1 -right-1",children:r.jsx("button",{type:"button",className:"bg-white rounded-full p-1.5 shadow-md border border-gray-200 text-primary-500 hover:text-primary-600",children:r.jsx(l.tBf,{className:"h-4 w-4"})})})]}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm text-gray-500",children:"JPG, PNG or GIF images up to 2MB"}),r.jsx(o.Z,{variant:"light",size:"sm",className:"mt-2",children:"Upload Photo"})]})]})}),r.jsx(m.Z,{label:"Full Name",htmlFor:"name",span:"full",required:!0,children:r.jsx(d.Z,{id:"name",type:"text",placeholder:"Your full name",value:e.name,onChange:t=>s({...e,name:t.target.value}),required:!0})}),r.jsx(m.Z,{label:"Email Address",htmlFor:"email",span:"full",helpText:"Email address cannot be changed",children:r.jsx(d.Z,{id:"email",type:"email",value:e.email,disabled:!0,className:"bg-gray-50"})}),r.jsx(m.Z,{label:"Phone Number",htmlFor:"phone",span:"full",helpText:"We'll use this number for viewing appointments and notifications",children:r.jsx(d.Z,{id:"phone",type:"tel",placeholder:"Enter your phone number",value:e.phone,onChange:t=>s({...e,phone:t.target.value})})})]}),r.jsx("div",{className:"mt-8 flex justify-end",children:r.jsx(o.Z,{type:"submit",variant:"gradient",leftIcon:r.jsx(l.mW3,{}),loading:h,children:h?"Saving...":"Save Changes"})})]})})]})},"profile")}function SecurityTab({setSuccessMessage:e,setErrorMessage:s,sessionData:t}){let[n,h]=(0,a.useState)(!1),{updatePassword:u,terminateSession:g,terminateAllSessions:p}=(0,x.r)(),[f,y]=(0,a.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),[j,b]=(0,a.useState)(0),[N,w]=(0,a.useState)(!1),[v,P]=(0,a.useState)(!1),[S,_]=(0,a.useState)(!1),k=t||{currentSession:{device:"Current Browser",location:"Cairo, Egypt",lastActive:"Now",ip:"192.168.1.1"},otherSessions:[]};(0,a.useEffect)(()=>{if(!f.newPassword){b(0);return}let e=0;f.newPassword.length>=8&&(e+=1),/[A-Z]/.test(f.newPassword)&&(e+=1),/[a-z]/.test(f.newPassword)&&(e+=1),/[0-9]/.test(f.newPassword)&&(e+=1),/[^A-Za-z0-9]/.test(f.newPassword)&&(e+=1),b(e)},[f.newPassword]);let handlePasswordChange=async t=>{if(t.preventDefault(),h(!0),e(""),s(""),f.newPassword!==f.confirmPassword){s("New passwords do not match"),h(!1);return}if(j<3){s("Password is too weak. Please use a stronger password."),h(!1);return}try{await u(f),y({currentPassword:"",newPassword:"",confirmPassword:""}),e("Password updated successfully")}catch(e){console.error("Error updating password:",e),s("Failed to update password: "+(e.message||"Unknown error"))}finally{h(!1)}},handleTerminateSession=async t=>{try{await g(t),e("Session terminated successfully")}catch(e){console.error("Error terminating session:",e),s("Failed to terminate session: "+(e.message||"Unknown error"))}};return(0,r.jsxs)(i.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"space-y-6",children:[(0,r.jsxs)(c.Z,{className:"overflow-hidden",children:[(0,r.jsxs)("div",{className:"px-6 py-5 border-b border-gray-100 flex items-center",children:[r.jsx(l.o1l,{className:"h-5 w-5 text-primary-500 mr-2"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Change Password"})]}),r.jsx("div",{className:"p-6",children:r.jsx("form",{onSubmit:handlePasswordChange,children:(0,r.jsxs)("div",{className:"space-y-6",children:[r.jsx(m.Z,{label:"Current Password",htmlFor:"currentPassword",required:!0,children:r.jsx(d.Z,{id:"currentPassword",type:N?"text":"password",placeholder:"Enter your current password",value:f.currentPassword,onChange:e=>y({...f,currentPassword:e.target.value}),required:!0,rightIcon:N?r.jsx(l.q5L,{}):r.jsx(l.o1l,{}),clickableRightIcon:!0,onRightIconClick:()=>w(!N)})}),(0,r.jsxs)(m.Z,{label:"New Password",htmlFor:"newPassword",required:!0,children:[r.jsx(d.Z,{id:"newPassword",type:v?"text":"password",placeholder:"Enter your new password",value:f.newPassword,onChange:e=>y({...f,newPassword:e.target.value}),rightIcon:v?r.jsx(l.q5L,{}):r.jsx(l.o1l,{}),clickableRightIcon:!0,onRightIconClick:()=>P(!v),required:!0}),f.newPassword&&(0,r.jsxs)("div",{className:"mt-2",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden",children:r.jsx("div",{className:`h-full rounded-full ${0===j?"bg-gray-300":j<=2?"bg-red-500":j<=3?"bg-amber-500":"bg-green-500"}`,style:{width:`${20*j}%`}})}),r.jsx("span",{className:"ml-2 text-xs font-medium text-gray-500",children:0===j?"Very Weak":j<=2?"Weak":j<=3?"Medium":j<=4?"Strong":"Very Strong"})]}),(0,r.jsxs)("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-2 gap-1",children:[(0,r.jsxs)("div",{className:"flex items-center text-xs",children:[r.jsx("span",{className:`inline-block w-4 h-4 rounded-full mr-1 flex items-center justify-center ${f.newPassword.length>=8?"bg-green-100 text-green-700":"bg-gray-100 text-gray-400"}`,children:f.newPassword.length>=8?r.jsx(l._rq,{className:"h-3 w-3"}):""}),r.jsx("span",{children:"At least 8 characters"})]}),(0,r.jsxs)("div",{className:"flex items-center text-xs",children:[r.jsx("span",{className:`inline-block w-4 h-4 rounded-full mr-1 flex items-center justify-center ${/[A-Z]/.test(f.newPassword)?"bg-green-100 text-green-700":"bg-gray-100 text-gray-400"}`,children:/[A-Z]/.test(f.newPassword)?r.jsx(l._rq,{className:"h-3 w-3"}):""}),r.jsx("span",{children:"Uppercase letter"})]}),(0,r.jsxs)("div",{className:"flex items-center text-xs",children:[r.jsx("span",{className:`inline-block w-4 h-4 rounded-full mr-1 flex items-center justify-center ${/[a-z]/.test(f.newPassword)?"bg-green-100 text-green-700":"bg-gray-100 text-gray-400"}`,children:/[a-z]/.test(f.newPassword)?r.jsx(l._rq,{className:"h-3 w-3"}):""}),r.jsx("span",{children:"Lowercase letter"})]}),(0,r.jsxs)("div",{className:"flex items-center text-xs",children:[r.jsx("span",{className:`inline-block w-4 h-4 rounded-full mr-1 flex items-center justify-center ${/[0-9]/.test(f.newPassword)?"bg-green-100 text-green-700":"bg-gray-100 text-gray-400"}`,children:/[0-9]/.test(f.newPassword)?r.jsx(l._rq,{className:"h-3 w-3"}):""}),r.jsx("span",{children:"Number"})]}),(0,r.jsxs)("div",{className:"flex items-center text-xs",children:[r.jsx("span",{className:`inline-block w-4 h-4 rounded-full mr-1 flex items-center justify-center ${/[^A-Za-z0-9]/.test(f.newPassword)?"bg-green-100 text-green-700":"bg-gray-100 text-gray-400"}`,children:/[^A-Za-z0-9]/.test(f.newPassword)?r.jsx(l._rq,{className:"h-3 w-3"}):""}),r.jsx("span",{children:"Special character"})]})]})]})]}),r.jsx(m.Z,{label:"Confirm New Password",htmlFor:"confirmPassword",error:f.confirmPassword&&f.newPassword!==f.confirmPassword?"Passwords do not match":"",required:!0,children:r.jsx(d.Z,{id:"confirmPassword",type:S?"text":"password",placeholder:"Confirm your new password",value:f.confirmPassword,onChange:e=>y({...f,confirmPassword:e.target.value}),rightIcon:S?r.jsx(l.q5L,{}):r.jsx(l.o1l,{}),clickableRightIcon:!0,onRightIconClick:()=>_(!S),required:!0,error:f.confirmPassword&&f.newPassword!==f.confirmPassword})}),r.jsx("div",{className:"flex justify-end mt-6",children:r.jsx(o.Z,{type:"submit",variant:"primary",leftIcon:r.jsx(l.bfl,{}),loading:n,disabled:!f.currentPassword||!f.newPassword||!f.confirmPassword||f.newPassword!==f.confirmPassword||j<3,children:n?"Updating...":"Update Password"})})]})})})]}),(0,r.jsxs)(c.Z,{className:"overflow-hidden",children:[(0,r.jsxs)("div",{className:"px-6 py-5 border-b border-gray-100 flex items-center",children:[r.jsx(l.UIZ,{className:"h-5 w-5 text-primary-500 mr-2"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Active Sessions"})]}),r.jsx("div",{className:"p-6",children:(0,r.jsxs)("div",{className:"space-y-6",children:[r.jsx("div",{className:"border border-green-100 rounded-lg p-4 bg-green-50",children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center",children:[r.jsx("div",{children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("span",{className:"inline-flex items-center justify-center h-8 w-8 rounded-full bg-green-100 text-green-500 mr-3",children:r.jsx(l._rq,{className:"h-5 w-5"})}),(0,r.jsxs)("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-gray-900",children:k.currentSession.device}),(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:[k.currentSession.location," • ",k.currentSession.ip]})]})]})}),r.jsx("div",{className:"mt-2 md:mt-0 flex items-center",children:r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Current Session"})})]})}),k.otherSessions.length>0?(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Other Sessions"}),k.otherSessions.map(e=>r.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center",children:[r.jsx("div",{children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("span",{className:"inline-flex items-center justify-center h-8 w-8 rounded-full bg-gray-100 text-gray-500 mr-3",children:r.jsx(l.UIZ,{className:"h-5 w-5"})}),(0,r.jsxs)("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-gray-900",children:e.device}),(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:[e.location," • Last active ",e.lastActive," • ",e.ip]})]})]})}),r.jsx("div",{className:"mt-2 md:mt-0",children:r.jsx(o.Z,{variant:"light",size:"xs",onClick:()=>handleTerminateSession(e.id),className:"text-red-600 hover:text-red-800 hover:bg-red-50",children:"Terminate"})})]})},e.id))]}):r.jsx("div",{className:"text-center py-4",children:r.jsx("p",{className:"text-sm text-gray-500",children:"No other active sessions"})}),r.jsx("div",{className:"flex justify-end",children:r.jsx(o.Z,{variant:"outline",size:"sm",onClick:async()=>{try{await p(),e("All other sessions terminated successfully")}catch(e){console.error("Error terminating all sessions:",e),s("Failed to terminate all sessions: "+(e.message||"Unknown error"))}},disabled:0===k.otherSessions.length,children:"Sign Out From All Other Devices"})})]})})]})]},"security")}function NotificationsTab({notifications:e,setNotifications:s,setSuccessMessage:t,setErrorMessage:n}){let[d,m]=(0,a.useState)(!1),{updateNotifications:h}=(0,x.r)(),handleNotificationUpdate=async e=>{e.preventDefault(),m(!0),t(""),n("");try{await h(),t("Notification settings updated successfully")}catch(e){console.error("Error updating notification settings:",e),n("Failed to update notification settings: "+(e.message||"Unknown error"))}finally{m(!1)}},toggleSetting=e=>{s(s=>({...s,[e]:!s[e]}))};return r.jsx(i.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:(0,r.jsxs)(c.Z,{className:"overflow-hidden",children:[(0,r.jsxs)("div",{className:"px-6 py-5 border-b border-gray-100 flex items-center",children:[r.jsx(l.vWP,{className:"h-5 w-5 text-primary-500 mr-2"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Notification Settings"})]}),r.jsx("div",{className:"p-6",children:r.jsx("form",{onSubmit:handleNotificationUpdate,children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"border-b border-gray-200 pb-5",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-4",children:"Notification Channels"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-start",children:[r.jsx("div",{className:"flex items-center h-5",children:r.jsx("input",{id:"email_notifications",type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500",checked:e.email_notifications,onChange:()=>toggleSetting("email_notifications")})}),(0,r.jsxs)("div",{className:"ml-3",children:[(0,r.jsxs)("label",{htmlFor:"email_notifications",className:"text-sm font-medium text-gray-700 flex items-center",children:[r.jsx(l.Imn,{className:"mr-2 text-gray-400"}),"Email Notifications"]}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Receive notifications and updates via email"})]})]}),(0,r.jsxs)("div",{className:"flex items-start",children:[r.jsx("div",{className:"flex items-center h-5",children:r.jsx("input",{id:"sms_notifications",type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500",checked:e.sms_notifications,onChange:()=>toggleSetting("sms_notifications")})}),(0,r.jsxs)("div",{className:"ml-3",children:[(0,r.jsxs)("label",{htmlFor:"sms_notifications",className:"text-sm font-medium text-gray-700 flex items-center",children:[r.jsx(l.IC0,{className:"mr-2 text-gray-400"}),"SMS Notifications"]}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Receive important notifications via SMS"})]})]}),(0,r.jsxs)("div",{className:"flex items-start",children:[r.jsx("div",{className:"flex items-center h-5",children:r.jsx("input",{id:"push_notifications",type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500",checked:e.push_notifications,onChange:()=>toggleSetting("push_notifications")})}),(0,r.jsxs)("div",{className:"ml-3",children:[(0,r.jsxs)("label",{htmlFor:"push_notifications",className:"text-sm font-medium text-gray-700 flex items-center",children:[r.jsx(l.vWP,{className:"mr-2 text-gray-400"}),"Push Notifications"]}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Receive notifications in your browser even when you're not on our site"})]})]})]})]}),(0,r.jsxs)("div",{className:"border-b border-gray-200 pb-5",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-4",children:"Notification Types"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-start",children:[r.jsx("div",{className:"flex items-center h-5",children:r.jsx("input",{id:"request_updates",type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500",checked:e.request_updates,onChange:()=>toggleSetting("request_updates")})}),(0,r.jsxs)("div",{className:"ml-3",children:[r.jsx("label",{htmlFor:"request_updates",className:"text-sm font-medium text-gray-700",children:"Property Request Updates"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Receive updates when your property requests status changes or when matching properties are found"})]})]}),(0,r.jsxs)("div",{className:"flex items-start",children:[r.jsx("div",{className:"flex items-center h-5",children:r.jsx("input",{id:"viewing_reminders",type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500",checked:e.viewing_reminders,onChange:()=>toggleSetting("viewing_reminders")})}),(0,r.jsxs)("div",{className:"ml-3",children:[r.jsx("label",{htmlFor:"viewing_reminders",className:"text-sm font-medium text-gray-700",children:"Viewing Reminders"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Receive reminders about upcoming property viewings"})]})]})]})]}),(0,r.jsxs)("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-4",children:"Marketing Communications"}),(0,r.jsxs)("div",{className:"flex items-start",children:[r.jsx("div",{className:"flex items-center h-5",children:r.jsx("input",{id:"marketing_emails",type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500",checked:e.marketing_emails,onChange:()=>toggleSetting("marketing_emails")})}),(0,r.jsxs)("div",{className:"ml-3",children:[r.jsx("label",{htmlFor:"marketing_emails",className:"text-sm font-medium text-gray-700",children:"Marketing Emails"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Receive promotional emails, special offers, and market updates"})]})]})]}),r.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 rounded-md",children:(0,r.jsxs)("div",{className:"flex",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx(l.H33,{className:"h-5 w-5 text-blue-400"})}),(0,r.jsxs)("div",{className:"ml-3",children:[r.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"Important Information"}),r.jsx("div",{className:"mt-2 text-sm text-blue-700",children:r.jsx("p",{children:"We may still send you important notifications about your account and transactions, even if you've disabled certain notification preferences."})})]})]})}),r.jsx("div",{className:"flex justify-end",children:r.jsx(o.Z,{type:"submit",variant:"primary",leftIcon:r.jsx(l.mW3,{}),loading:d,children:d?"Saving...":"Save Preferences"})})]})})})]})},"notifications")}function AccountTab({user:e,supabase:s,setSuccessMessage:t,setErrorMessage:n}){let[d,m]=(0,a.useState)(!1),[x,h]=(0,a.useState)(""),[u,g]=(0,a.useState)(!1),[p,f]=(0,a.useState)(!1),handleExportData=async()=>{try{g(!0),t("");let{data:r,error:a}=await s.from("profiles").select("*").eq("id",e.id).single();if(a)throw a;let{data:i,error:n}=await s.from("property_requests").select("*").eq("user_id",e.id);if(n)throw n;let{data:l,error:c}=await s.from("scheduled_viewings").select("*").eq("user_id",e.id);if(c)throw c;let{data:o,error:d}=await s.from("user_settings").select("*").eq("user_id",e.id).single(),m=JSON.stringify({profile:r,propertyRequests:i||[],scheduledViewings:l||[],settings:o||{}},null,2),x=new Blob([m],{type:"application/json"}),h=URL.createObjectURL(x),u=document.createElement("a");u.href=h,u.download=`bigdealegy-account-data-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(u),u.click(),document.body.removeChild(u),t("Account data exported successfully")}catch(e){console.error("Error exporting account data:",e),n("Failed to export account data")}finally{g(!1)}},handleDeleteAccount=async()=>{if("delete my account"!==x){n('Please type "delete my account" to confirm');return}try{f(!0),n(""),await new Promise(e=>setTimeout(e,1500)),t("Your account has been scheduled for deletion. You will be logged out shortly."),setTimeout(()=>{s.auth.signOut()},3e3)}catch(e){console.error("Error deleting account:",e),n("Failed to delete account")}finally{f(!1),m(!1)}};return(0,r.jsxs)(i.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"space-y-6",children:[(0,r.jsxs)(c.Z,{className:"overflow-hidden",children:[(0,r.jsxs)("div",{className:"px-6 py-5 border-b border-gray-100 flex items-center",children:[r.jsx(l._hL,{className:"h-5 w-5 text-primary-500 mr-2"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Export Account Data"})]}),(0,r.jsxs)("div",{className:"p-6",children:[r.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"You can export all your personal data including your profile information, property requests, scheduled viewings, and settings. The data will be exported as a JSON file."}),r.jsx(o.Z,{variant:"outline",leftIcon:r.jsx(l._hL,{}),onClick:handleExportData,loading:u,children:u?"Exporting...":"Export My Data"})]})]}),(0,r.jsxs)(c.Z,{className:"overflow-hidden",children:[(0,r.jsxs)("div",{className:"px-6 py-5 border-b border-gray-100 flex items-center",children:[r.jsx(l.Ybf,{className:"h-5 w-5 text-red-500 mr-2"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Delete Account"})]}),(0,r.jsxs)("div",{className:"p-6",children:[r.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 rounded-md mb-4",children:(0,r.jsxs)("div",{className:"flex",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx(l.BJv,{className:"h-5 w-5 text-red-400"})}),(0,r.jsxs)("div",{className:"ml-3",children:[r.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Warning: This action cannot be undone"}),(0,r.jsxs)("div",{className:"mt-2 text-sm text-red-700",children:[r.jsx("p",{children:"Deleting your account will permanently remove all your data including:"}),(0,r.jsxs)("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[r.jsx("li",{children:"Your profile information"}),r.jsx("li",{children:"All property requests"}),r.jsx("li",{children:"Scheduled viewings"}),r.jsx("li",{children:"Notification preferences"})]})]})]})]})}),d?(0,r.jsxs)("div",{className:"border border-red-200 rounded-lg p-4",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Confirm Account Deletion"}),(0,r.jsxs)("p",{className:"text-sm text-gray-600 mb-4",children:["Please type ",r.jsx("span",{className:"font-medium",children:"delete my account"})," to confirm deletion."]}),r.jsx("input",{type:"text",value:x,onChange:e=>h(e.target.value),placeholder:"Type 'delete my account'",className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-red-500 focus:border-red-500 sm:text-sm mb-4"}),(0,r.jsxs)("div",{className:"flex space-x-3",children:[r.jsx(o.Z,{variant:"danger",leftIcon:r.jsx(l.Ybf,{}),onClick:handleDeleteAccount,loading:p,disabled:"delete my account"!==x,children:p?"Deleting...":"Permanently Delete Account"}),r.jsx(o.Z,{variant:"light",onClick:()=>{m(!1),h("")},children:"Cancel"})]})]}):r.jsx(o.Z,{variant:"danger",leftIcon:r.jsx(l.Ybf,{}),onClick:()=>m(!0),children:"Delete My Account"})]})]}),(0,r.jsxs)(c.Z,{className:"overflow-hidden",children:[(0,r.jsxs)("div",{className:"px-6 py-5 border-b border-gray-100 flex items-center",children:[r.jsx(l.xqh,{className:"h-5 w-5 text-gray-500 mr-2"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Sign Out"})]}),(0,r.jsxs)("div",{className:"p-6",children:[r.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Sign out from your account on this device."}),r.jsx(o.Z,{variant:"light",leftIcon:r.jsx(l.xqh,{}),onClick:()=>s.auth.signOut(),children:"Sign Out"})]})]})]},"account")}function Settings(){let{loading:e,profile:s,setProfile:t,notifications:c,setNotifications:o,sessionData:d,refreshSettings:m}=(0,x.r)(),[h,u]=(0,a.useState)("profile"),[g,p]=(0,a.useState)(""),[f,y]=(0,a.useState)("");(0,a.useEffect)(()=>{p(""),y("")},[h]);let j=[{id:"profile",label:"Profile",icon:l.fzv},{id:"security",label:"Security",icon:l.bfl},{id:"notifications",label:"Notifications",icon:l.vWP},{id:"account",label:"Account",icon:l.nbt}];return(0,r.jsxs)(i.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Account Settings"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your account preferences and profile information"})]}),(0,r.jsxs)(n.M,{children:[g&&r.jsx(i.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"mb-4 bg-green-50 border-l-4 border-green-400 p-4 rounded-md",children:(0,r.jsxs)("div",{className:"flex",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx(l._rq,{className:"h-5 w-5 text-green-400"})}),r.jsx("div",{className:"ml-3",children:r.jsx("p",{className:"text-sm text-green-700",children:g})})]})}),f&&r.jsx(i.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"mb-4 bg-red-50 border-l-4 border-red-400 p-4 rounded-md",children:(0,r.jsxs)("div",{className:"flex",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx(l.bcx,{className:"h-5 w-5 text-red-400"})}),r.jsx("div",{className:"ml-3",children:r.jsx("p",{className:"text-sm text-red-700",children:f})})]})})]}),r.jsx("div",{className:"mb-6 flex border-b border-gray-200",children:j.map(e=>(0,r.jsxs)("button",{onClick:()=>u(e.id),className:`flex items-center px-4 py-3 text-sm font-medium -mb-px ${h===e.id?"text-primary-600 border-b-2 border-primary-500":"text-gray-500 hover:text-gray-700 hover:border-gray-300 border-b-2 border-transparent"}`,children:[r.jsx(e.icon,{className:`mr-2 h-5 w-5 ${h===e.id?"text-primary-500":"text-gray-400"}`}),e.label]},e.id))}),e?r.jsx("div",{className:"flex justify-center items-center h-64",children:(0,r.jsxs)("div",{className:"relative h-16 w-16",children:[r.jsx("div",{className:"absolute top-0 left-0 right-0 bottom-0 border-t-4 border-primary-500 border-solid rounded-full animate-spin"}),r.jsx("div",{className:"absolute top-0 left-0 right-0 bottom-0 border-t-4 border-primary-200 border-solid rounded-full opacity-20"})]})}):r.jsx("div",{className:"min-h-[400px]",children:(0,r.jsxs)(n.M,{mode:"wait",children:["profile"===h&&r.jsx(ProfileTab,{profile:s,setProfile:t,setSuccessMessage:p,setErrorMessage:y},"profile"),"security"===h&&r.jsx(SecurityTab,{setSuccessMessage:p,setErrorMessage:y,sessionData:d},"security"),"notifications"===h&&r.jsx(NotificationsTab,{notifications:c,setNotifications:o,setSuccessMessage:p,setErrorMessage:y},"notifications"),"account"===h&&r.jsx(AccountTab,{setSuccessMessage:p,setErrorMessage:y},"account")]})})]})}},2232:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>n,__esModule:()=>i,default:()=>c});var r=t(5153);let a=(0,r.createProxy)(String.raw`E:\bigdealegy\bigdealegy\frontend\src\app\dashboard\settings\page.tsx`),{__esModule:i,$$typeof:n}=a,l=a.default,c=l}};var s=require("../../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),t=s.X(0,[657,4043,2076,1332,7686,1407,2070,549,5846,2522,3431,9494,2770,1414],()=>__webpack_exec__(6309));module.exports=t})();