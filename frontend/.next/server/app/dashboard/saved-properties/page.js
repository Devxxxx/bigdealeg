(()=>{var e={};e.id=7704,e.ids=[7704],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},1293:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>o.a,__next_app__:()=>p,originalPathname:()=>m,pages:()=>c,routeModule:()=>x,tree:()=>d});var t=r(7096),a=r(6132),i=r(7284),o=r.n(i),l=r(2564),n={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>l[e]);r.d(s,n);let d=["",{children:["dashboard",{children:["saved-properties",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,9807)),"E:\\bigdealegy\\bigdealegy\\frontend\\src\\app\\dashboard\\saved-properties\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,8182)),"E:\\bigdealegy\\bigdealegy\\frontend\\src\\app\\dashboard\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,9851)),"E:\\bigdealegy\\bigdealegy\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9291,23)),"next/dist/client/components/not-found-error"]}],c=["E:\\bigdealegy\\bigdealegy\\frontend\\src\\app\\dashboard\\saved-properties\\page.tsx"],m="/dashboard/saved-properties/page",p={require:r,loadChunk:()=>Promise.resolve()},x=new t.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/saved-properties/page",pathname:"/dashboard/saved-properties",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},8241:(e,s,r)=>{Promise.resolve().then(r.bind(r,8824))},8824:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>SavedProperties});var t=r(784),a=r(9885),i=r(7114),o=r(6552),l=r(647),n=r(3500);function SavedProperties(){let{user:e}=(0,l.a)(),{savedProperties:s,loading:r,fetchSavedProperties:d,toggleSaved:c,unsaveProperty:m}=(0,o.c)();(0,i.useRouter)();let[p,x]=(0,a.useState)(""),[u,h]=(0,a.useState)("all"),[g,f]=(0,a.useState)("date_saved"),[y,v]=(0,a.useState)([]),[b,j]=(0,a.useState)([]);(0,a.useEffect)(()=>{d()},[d]),(0,a.useEffect)(()=>{if(s&&s.length>0){let e=s.filter(e=>e.is_favorite).map(e=>e.property_id);v(e);let r=s.map(s=>{let r=s.properties;return{id:r.id,title:r.title,description:r.description,price:r.price,location:r.location,bedrooms:r.bedrooms,bathrooms:r.bathrooms,area_size:r.area_size,property_type:r.property_type,featured_image:r.featured_image,date_saved:s.created_at,is_favorite:e.includes(r.id)}});j(r)}else j([])},[s]);let toggleFavorite=async e=>{y.includes(e)?v(y.filter(s=>s!==e)):v([...y,e]),j(b.map(s=>s.id===e?{...s,is_favorite:!s.is_favorite}:s))},removeSavedProperty=async e=>{if(confirm("Are you sure you want to remove this property from your saved list?"))try{await m(e)}catch(e){console.error("Error removing saved property:",e)}},w=b.filter(e=>{let s=""===p||e.title.toLowerCase().includes(p.toLowerCase())||e.location.toLowerCase().includes(p.toLowerCase())||e.property_type.toLowerCase().includes(p.toLowerCase()),r="all"===u||e.property_type===u;return s&&r}),formatCurrency=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"EGP",maximumFractionDigits:0}).format(e);return(0,t.jsxs)("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[t.jsx(n.$0H,{className:"mr-3 text-primary"}),"Saved Properties"]}),t.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"View and manage your saved properties"})]})}),(0,t.jsxs)("div",{className:"flex flex-col md:flex-row space-y-2 md:space-y-0 md:space-x-4",children:[(0,t.jsxs)("div",{className:"relative flex-grow",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:t.jsx(n.U41,{className:"h-4 w-4 text-gray-400"})}),t.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-primary focus:border-primary sm:text-sm",placeholder:"Search saved properties...",value:p,onChange:e=>x(e.target.value)})]}),(0,t.jsxs)("div",{className:"relative w-full md:w-48",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:t.jsx(n.ulB,{className:"h-4 w-4 text-gray-400"})}),(0,t.jsxs)("select",{className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white focus:outline-none focus:ring-primary focus:border-primary sm:text-sm",value:u,onChange:e=>h(e.target.value),children:[t.jsx("option",{value:"all",children:"All Types"}),t.jsx("option",{value:"apartment",children:"Apartments"}),t.jsx("option",{value:"villa",children:"Villas"}),t.jsx("option",{value:"townhouse",children:"Townhouses"}),t.jsx("option",{value:"office",children:"Offices"}),t.jsx("option",{value:"commercial",children:"Commercial"})]})]}),(0,t.jsxs)("div",{className:"relative w-full md:w-48",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:t.jsx(n.r_,{className:"h-4 w-4 text-gray-400"})}),(0,t.jsxs)("select",{className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white focus:outline-none focus:ring-primary focus:border-primary sm:text-sm",value:g,onChange:e=>f(e.target.value),children:[t.jsx("option",{value:"date_saved",children:"Date Saved"}),t.jsx("option",{value:"price_asc",children:"Price (Low to High)"}),t.jsx("option",{value:"price_desc",children:"Price (High to Low)"}),t.jsx("option",{value:"area_desc",children:"Area (Largest First)"})]})]})]}),t.jsx("div",{className:"bg-white rounded-lg shadow-sm divide-y divide-gray-200",children:(0,t.jsxs)("div",{className:"p-6",children:[t.jsx("div",{className:"flex justify-between items-center",children:(0,t.jsxs)("h2",{className:"text-lg font-medium text-gray-900",children:["Your Saved Properties",t.jsx("span",{className:"ml-2 bg-gray-100 text-gray-700 text-xs px-2 py-1 rounded-full",children:w.length})]})}),r?(0,t.jsxs)("div",{className:"flex justify-center items-center p-12",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"}),t.jsx("span",{className:"ml-3 text-sm text-gray-500",children:"Loading properties..."})]}):0===w.length?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center p-12 text-center",children:[t.jsx(n.m17,{className:"mr-2 h-4 w-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No saved properties"}),t.jsx("p",{className:"text-gray-500 text-sm mb-4",children:p||"all"!==u?"Try adjusting your search or filter":"Browse properties and save them to view them here"}),(0,t.jsxs)("a",{href:"/properties",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",children:[t.jsx(n.U41,{className:"mr-2 h-4 w-4"}),"Browse Properties"]})]}):t.jsx("div",{className:"mt-6 grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:w.map(e=>(0,t.jsxs)("div",{className:"group bg-white border border-gray-200 rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-all",children:[(0,t.jsxs)("div",{className:"aspect-w-16 aspect-h-9 bg-gray-200 relative",children:[t.jsx("img",{src:e.featured_image||"https://via.placeholder.com/800x450?text=No+Image",alt:e.title,className:"w-full h-full object-cover"}),(0,t.jsxs)("div",{className:"absolute top-2 right-2 flex space-x-2",children:[t.jsx("button",{onClick:()=>toggleFavorite(e.id),className:"p-2 bg-white rounded-full shadow-md hover:bg-gray-100 focus:outline-none",title:y.includes(e.id)?"Remove from favorites":"Add to favorites",children:y.includes(e.id)?t.jsx(n.QJe,{className:"h-4 w-4 text-yellow-500"}):t.jsx(n.jJN,{className:"h-4 w-4 text-gray-500"})}),t.jsx("button",{onClick:()=>removeSavedProperty(e.id),className:"p-2 bg-white rounded-full shadow-md hover:bg-gray-100 focus:outline-none",title:"Remove from saved",children:t.jsx(n.Xm5,{className:"h-4 w-4 text-red-500"})})]}),t.jsx("div",{className:"absolute bottom-2 left-2",children:t.jsx("span",{className:"inline-block bg-gray-800 bg-opacity-75 text-white px-2 py-1 text-xs rounded-md",children:e.property_type})})]}),(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 group-hover:text-primary",children:e.title}),t.jsx("p",{className:"text-lg font-bold text-primary",children:formatCurrency(e.price)})]}),(0,t.jsxs)("p",{className:"mt-1 text-sm text-gray-500 flex items-center",children:[t.jsx(n.Nh4,{className:"mr-1 text-gray-400"}),e.location]}),(0,t.jsxs)("div",{className:"mt-4 flex items-center justify-between text-sm text-gray-500",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[t.jsx(n.f0S,{className:"mr-1"}),(0,t.jsxs)("span",{children:[e.bedrooms," beds"]})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[t.jsx(n.MvV,{className:"mr-1"}),(0,t.jsxs)("span",{children:[e.bathrooms," baths"]})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[t.jsx(n.BxQ,{className:"mr-1"}),(0,t.jsxs)("span",{children:[e.area_size," m\xb2"]})]})]})]}),(0,t.jsxs)("div",{className:"border-t border-gray-200 bg-gray-50 px-4 py-3 sm:px-6 flex justify-between",children:[(0,t.jsxs)("a",{href:`/properties/${e.id}`,className:"inline-flex items-center px-3 py-1 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",children:[t.jsx(n.dSq,{className:"mr-2 h-4 w-4"}),"View Details"]}),(0,t.jsxs)("button",{className:"inline-flex items-center px-3 py-1 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",children:[t.jsx(n.Lrt,{className:"mr-2 h-4 w-4"}),"Share"]})]})]},e.id))})]})})]})}},9807:(e,s,r)=>{"use strict";r.r(s),r.d(s,{$$typeof:()=>o,__esModule:()=>i,default:()=>n});var t=r(5153);let a=(0,t.createProxy)(String.raw`E:\bigdealegy\bigdealegy\frontend\src\app\dashboard\saved-properties\page.tsx`),{__esModule:i,$$typeof:o}=a,l=a.default,n=l}};var s=require("../../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),r=s.X(0,[657,4043,2076,3500,1407,2070,549,5846,9494,6552],()=>__webpack_exec__(1293));module.exports=r})();