(()=>{var e={};e.id=6813,e.ids=[6813],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},3627:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>l.a,__next_app__:()=>p,originalPathname:()=>m,pages:()=>d,routeModule:()=>x,tree:()=>c});var t=s(7096),a=s(6132),i=s(7284),l=s.n(i),o=s(2564),n={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>o[e]);s.d(r,n);let c=["",{children:["sales-ops",{children:["properties",{children:["new",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,1680)),"E:\\bigdealegy\\bigdealegy\\frontend\\src\\app\\sales-ops\\properties\\new\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,2776)),"E:\\bigdealegy\\bigdealegy\\frontend\\src\\app\\sales-ops\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,9851)),"E:\\bigdealegy\\bigdealegy\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9291,23)),"next/dist/client/components/not-found-error"]}],d=["E:\\bigdealegy\\bigdealegy\\frontend\\src\\app\\sales-ops\\properties\\new\\page.tsx"],m="/sales-ops/properties/new/page",p={require:s,loadChunk:()=>Promise.resolve()},x=new t.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/sales-ops/properties/new/page",pathname:"/sales-ops/properties/new",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},530:(e,r,s)=>{Promise.resolve().then(s.bind(s,3865))},3865:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>NewProperty});var t=s(784),a=s(9885),i=s(7114),l=s(1440),o=s.n(l),n=s(1332),c=s(7686),d=s(647),m=s(1068),p=s(345),x=s(6558),h=s(3431),u=s(2522),g=s(2770),b=s(1414),y=s(5105);let j=process.env.NEXT_PUBLIC_GOOGLE_MAPS_API_KEY||"AIzaSyA5UgwS4ooUTXQcbCCZF-lVZQN6G7_OFRw",f=!1,v=null,N=!1,loadGoogleMapsScript=()=>f?Promise.resolve():v||(N?Promise.reject(Error("Failed to load Google Maps API")):(N=!0,v=new Promise((e,r)=>{let s=`googleMapsCallback_${Date.now()}`;window[s]=()=>{f=!0,e(),delete window[s]};let t=document.createElement("script");t.src=`https://maps.googleapis.com/maps/api/js?key=${j}&libraries=places&callback=${s}`,t.async=!0,t.defer=!0,t.onerror=e=>{console.error("Error loading Google Maps API:",e),r(Error("Failed to load Google Maps API"))},document.head.appendChild(t),setTimeout(()=>{f||r(Error("Google Maps API load timeout"))},1e4)}))),properties_LocationPicker=({onSelect:e,initialLocation:r={lat:30.0444,lng:31.2357}})=>{let[s,i]=(0,a.useState)(null),[l,o]=(0,a.useState)(null),[n,c]=(0,a.useState)(""),[d,m]=(0,a.useState)([]),[p,x]=(0,a.useState)(!1),[h,u]=(0,a.useState)(!1),[g,b]=(0,a.useState)(null),j=(0,a.useRef)(null),f=(0,a.useRef)(null);(0,a.useEffect)(()=>{let initMap=async()=>{if(j.current&&!h)try{if(x(!0),await loadGoogleMapsScript(),!window.google||!window.google.maps)throw Error("Google Maps not available");let s=new window.google.maps.Map(j.current,{center:r,zoom:12,streetViewControl:!1,mapTypeControl:!1,fullscreenControl:!1});i(s),u(!0),f.current=new window.google.maps.Geocoder;let t=new window.google.maps.Marker({position:r,map:s,draggable:!0,animation:window.google.maps.Animation.DROP});o(t),t.addListener("dragend",()=>{let r=t.getPosition();e({lat:r.lat(),lng:r.lng()})}),s.addListener("click",r=>{let s={lat:r.latLng.lat(),lng:r.latLng.lng()};t.setPosition(s),e(s)})}catch(e){console.error("Error initializing map:",e),b(e.message)}finally{x(!1)}};initMap()},[r,e,h]);let searchLocation=async e=>{if(e.preventDefault(),n.trim()&&f.current){x(!0);try{f.current.geocode({address:n},(e,r)=>{"OK"===r&&e.length>0?m(e.slice(0,5)):m([]),x(!1)})}catch(e){console.error("Error searching for location:",e),x(!1)}}},goToLocation=r=>{if(!s||!l)return;let t=r.geometry.location;s.setCenter(t),s.setZoom(15),l.setPosition(t),e({lat:t.lat(),lng:t.lng()}),m([]),c("")};return(0,t.jsxs)("div",{className:"relative h-full w-full bg-gray-100",children:[t.jsx("div",{ref:j,className:"h-full w-full"}),g&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100 z-20",children:(0,t.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 max-w-md mx-auto text-center",children:[t.jsx(y.bcx,{className:"h-8 w-8 text-red-500 mx-auto mb-2"}),t.jsx("h3",{className:"text-sm font-medium text-red-800 mb-1",children:"Google Maps Error"}),t.jsx("p",{className:"text-xs text-red-600",children:g}),t.jsx("p",{className:"text-xs text-gray-600 mt-2",children:"You can still continue with the property creation process. The location will need to be set later."})]})}),!g&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"absolute top-3 left-3 right-3 z-10",children:[(0,t.jsxs)("form",{onSubmit:searchLocation,className:"relative",children:[t.jsx("input",{type:"text",value:n,onChange:e=>c(e.target.value),placeholder:"Search for a location...",className:"w-full px-3 py-2 pl-10 pr-14 text-sm rounded-md shadow-sm border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"}),t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:t.jsx(y.jRj,{className:"h-4 w-4 text-gray-400"})}),t.jsx("button",{type:"submit",className:"absolute inset-y-0 right-0 px-3 py-1 flex items-center text-xs font-medium text-white bg-primary-600 rounded-r-md hover:bg-primary-700 focus:outline-none",children:"Search"})]}),d.length>0&&t.jsx("div",{className:"mt-1 bg-white rounded-md shadow-lg border border-gray-200 max-h-72 overflow-y-auto",children:t.jsx("ul",{className:"py-1",children:d.map((e,r)=>t.jsx("li",{children:(0,t.jsxs)("button",{type:"button",onClick:()=>goToLocation(e),className:"flex items-start px-4 py-2 w-full text-left hover:bg-gray-50",children:[t.jsx(y.i63,{className:"h-5 w-5 text-primary-500 mt-0.5 mr-2 flex-shrink-0"}),t.jsx("div",{children:t.jsx("p",{className:"text-sm font-medium text-gray-900 line-clamp-1",children:e.formatted_address})})]})},r))})})]}),t.jsx("button",{type:"button",onClick:()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(r=>{let t={lat:r.coords.latitude,lng:r.coords.longitude};s&&(s.setCenter(t),s.setZoom(15)),l&&l.setPosition(t),e(t)},e=>{console.error("Error getting current location:",e),alert("Unable to get your current location. Please try again or search for a location.")}):alert("Geolocation is not supported by your browser.")},className:"absolute bottom-4 right-4 z-10 flex items-center justify-center p-2 bg-white rounded-full shadow-md border border-gray-300 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500","aria-label":"Use current location",children:t.jsx(y.xUG,{className:"h-5 w-5 text-primary-600"})}),p&&t.jsx("div",{className:"absolute top-14 left-1/2 transform -translate-x-1/2 z-10",children:t.jsx("div",{className:"px-3 py-1 bg-white rounded-full shadow-md text-xs font-medium text-gray-700",children:"Searching..."})})]}),!h&&!g&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100",children:(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-primary-600 mb-2"}),t.jsx("p",{className:"text-sm text-gray-600",children:"Loading map..."})]})})]})};function NewProperty(){let{user:e,session:r}=(0,d.a)(),s=(0,i.useRouter)(),{register:l,handleSubmit:j,watch:f,setValue:v,formState:{errors:N,isValid:w}}=(0,x.cI)({defaultValues:{title:"",description:"",property_type:"",location:"",city:"",project_name:"",compound_name:"",developer_name:"",price:"",bedrooms:"",bathrooms:"",area_size:"",features:{},available:!0,geo_location:null},mode:"onChange"}),[_,C]=(0,a.useState)(!1),[P,S]=(0,a.useState)(""),[k,E]=(0,a.useState)(!1),[F,I]=(0,a.useState)("basic"),[L,A]=(0,a.useState)([]),[M,q]=(0,a.useState)([]),[Z,G]=(0,a.useState)([]),[U,T]=(0,a.useState)(0),[z,D]=(0,a.useState)(!1),O=(0,a.useRef)(null),R=(0,a.useRef)(null),J=(0,a.useRef)(null),$=[{id:"garden",label:"Garden",icon:t.jsx(y.aCJ,{className:"w-3 h-3"})},{id:"pool",label:"Swimming Pool",icon:t.jsx(y.aCJ,{className:"w-3 h-3"})},{id:"garage",label:"Garage",icon:t.jsx(y.aCJ,{className:"w-3 h-3"})},{id:"balcony",label:"Balcony",icon:t.jsx(y.aCJ,{className:"w-3 h-3"})},{id:"elevator",label:"Elevator",icon:t.jsx(y.aCJ,{className:"w-3 h-3"})},{id:"security",label:"Security System",icon:t.jsx(y.bfl,{className:"w-3 h-3"})},{id:"gym",label:"Gym",icon:t.jsx(y.aCJ,{className:"w-3 h-3"})},{id:"ac",label:"Air Conditioning",icon:t.jsx(y.aCJ,{className:"w-3 h-3"})},{id:"furnished",label:"Furnished",icon:t.jsx(y.aCJ,{className:"w-3 h-3"})},{id:"parking",label:"Parking",icon:t.jsx(y.aCJ,{className:"w-3 h-3"})},{id:"garden_view",label:"Garden View",icon:t.jsx(y.aCJ,{className:"w-3 h-3"})},{id:"sea_view",label:"Sea View",icon:t.jsx(y.aCJ,{className:"w-3 h-3"})},{id:"private_entrance",label:"Private Entrance",icon:t.jsx(y.aCJ,{className:"w-3 h-3"})},{id:"storage",label:"Storage Room",icon:t.jsx(y.aCJ,{className:"w-3 h-3"})},{id:"pets_allowed",label:"Pets Allowed",icon:t.jsx(y.aCJ,{className:"w-3 h-3"})},{id:"central_heating",label:"Central Heating",icon:t.jsx(y.aCJ,{className:"w-3 h-3"})},{id:"concierge",label:"Concierge Service",icon:t.jsx(y.fzv,{className:"w-3 h-3"})},{id:"fiber_internet",label:"Fiber Internet",icon:t.jsx(y.aCJ,{className:"w-3 h-3"})},{id:"smart_home",label:"Smart Home Features",icon:t.jsx(y.Par,{className:"w-3 h-3"})},{id:"kids_area",label:"Kids Play Area",icon:t.jsx(y.aCJ,{className:"w-3 h-3"})}],handleImageChange=(e,r)=>{let s=Array.from(e.target.files),t=s.map(e=>({file:e,preview:URL.createObjectURL(e),name:e.name,type:r}));"property"===r?A(e=>[...e,...t]):"master_plan"===r?q(e=>[...e,...t]):"compound"===r&&G(e=>[...e,...t])},removeImage=(e,r)=>{"property"===r?(URL.revokeObjectURL(L[e].preview),A(r=>r.filter((r,s)=>s!==e))):"master_plan"===r?(URL.revokeObjectURL(M[e].preview),q(r=>r.filter((r,s)=>s!==e))):"compound"===r&&(URL.revokeObjectURL(Z[e].preview),G(r=>r.filter((r,s)=>s!==e)))},handleFeatureChange=(e,r)=>{v("features",{...f("features"),[e]:r})},handleProgressUpdate=e=>{T(e)},onSubmit=async t=>{if("images"===F){C(!0),S("");try{if(!r?.access_token)throw Error("You must be logged in to create a property");let a={...t,price:parseFloat(t.price),area_size:parseFloat(t.area_size),features:t.features,created_by:e?.id},{property:i}=await (0,m.G3)(r.access_token,a),l=[];if(L.forEach((e,r)=>{l.push({file:e.file,type:"property",order:r})}),M.forEach((e,r)=>{l.push({file:e.file,type:"master_plan",order:r})}),Z.forEach((e,r)=>{l.push({file:e.file,type:"compound",order:r})}),l.length>0){let e=new FormData;l.forEach((r,s)=>{e.append("images",r.file),e.append(`types[${s}]`,r.type),e.append(`orders[${s}]`,r.order)}),await fetch(`/api/properties/${i.id}/images`,{method:"POST",headers:{Authorization:`Bearer ${r.access_token}`},body:e,onUploadProgress:e=>{let r=Math.round(100*e.loaded/e.total);handleProgressUpdate(r)}})}E(!0),p.toast.success("Property created successfully!"),setTimeout(()=>{s.push("/sales-ops/properties")},2e3)}catch(e){console.error("Error creating property:",e),S(e.message||"An error occurred while creating the property"),p.toast.error("Failed to create property")}finally{C(!1)}}},goToNextSection=e=>{e&&e.preventDefault(),"basic"===F?I("project"):"project"===F?I("details"):"details"===F?I("features"):"features"===F&&I("images")},goToPrevSection=e=>{e&&e.preventDefault(),"images"===F?I("features"):"features"===F?I("details"):"details"===F?I("project"):"project"===F&&I("basic")},B=[{id:"basic",label:"Basic Info",icon:t.jsx(y.m6D,{className:"h-3 w-3 mr-1"})},{id:"project",label:"Project & Location",icon:t.jsx(y.MIl,{className:"h-3 w-3 mr-1"})},{id:"details",label:"Details",icon:t.jsx(y.H33,{className:"h-3 w-3 mr-1"})},{id:"features",label:"Features",icon:t.jsx(y.SnF,{className:"h-3 w-3 mr-1"})},{id:"images",label:"Images",icon:t.jsx(y.LFN,{className:"h-3 w-3 mr-1"})}];return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,t.jsxs)(o(),{href:"/sales-ops/properties",className:"inline-flex items-center text-xs text-gray-500 hover:text-gray-700",children:[t.jsx(y.Ao2,{className:"mr-1 h-3 w-3"}),"Back to Properties"]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"h-1.5 bg-gray-200 rounded-full w-24 sm:w-32",children:t.jsx("div",{className:"h-1.5 bg-primary-500 rounded-full transition-all duration-300",style:{width:`${"basic"===F?20:"project"===F?40:"details"===F?60:"features"===F?80:"images"===F?100:void 0}%`}})}),(0,t.jsxs)("span",{className:"text-xs text-gray-500",children:["Step ","basic"===F?"1":"project"===F?"2":"details"===F?"3":"features"===F?"4":"5"," of 5"]})]})]}),(0,t.jsxs)("div",{className:"mb-3",children:[t.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Add New Property"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Create a new property listing with all details for potential buyers"})]}),P&&t.jsx(n.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-3 bg-red-50 border-l-3 border-red-500 p-2 rounded-md",children:(0,t.jsxs)("div",{className:"flex items-center",children:[t.jsx(y.bcx,{className:"h-4 w-4 text-red-500 mr-2 flex-shrink-0"}),t.jsx("p",{className:"text-xs text-red-700",children:P})]})}),k&&t.jsx(n.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-3 bg-green-50 border-l-3 border-green-500 p-2 rounded-md",children:(0,t.jsxs)("div",{className:"flex items-center",children:[t.jsx(y.UgA,{className:"h-4 w-4 text-green-500 mr-2 flex-shrink-0"}),t.jsx("p",{className:"text-xs text-green-700",children:"Property created successfully! Redirecting..."})]})}),t.jsx(h.Z,{className:"overflow-hidden",children:(0,t.jsxs)("form",{onSubmit:j(onSubmit),children:[t.jsx("div",{className:"border-b border-gray-100 px-4 py-2",children:t.jsx("div",{className:"flex overflow-x-auto hide-scrollbar",children:B.map(e=>(0,t.jsxs)("button",{type:"button",className:`text-xs whitespace-nowrap font-medium py-1 px-2 mr-2 rounded flex items-center transition-colors ${F===e.id?"bg-primary-50 text-primary-600":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,onClick:r=>{r.preventDefault(),I(e.id)},children:[e.icon,e.label,F===e.id&&(0,t.jsxs)("span",{className:"ml-1.5 flex h-2 w-2",children:[t.jsx("span",{className:"animate-ping absolute h-2 w-2 rounded-full bg-primary-400 opacity-75"}),t.jsx("span",{className:"rounded-full h-2 w-2 bg-primary-500"})]})]},e.id))})}),t.jsx("div",{className:"p-4",children:(0,t.jsxs)(c.M,{mode:"wait",children:["basic"===F&&(0,t.jsxs)(n.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"space-y-3",children:[(0,t.jsxs)("div",{className:"mb-2 pb-2 border-b border-gray-100",children:[(0,t.jsxs)("h2",{className:"text-sm font-semibold text-gray-800 flex items-center",children:[t.jsx(y.m6D,{className:"mr-2 h-4 w-4 text-primary-500"}),"Basic Property Information"]}),t.jsx("p",{className:"text-xs text-gray-500",children:"Enter the essential details about this property"})]}),t.jsx(b.Z,{label:"Property Title",htmlFor:"title",required:!0,error:N.title?.message,children:t.jsx(g.Z,{id:"title",type:"text",placeholder:"Enter a descriptive title",leftIcon:t.jsx(y.l1M,{}),...l("title",{required:"Property title is required"}),error:!!N.title})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[t.jsx(b.Z,{label:"Property Type",htmlFor:"property_type",required:!0,error:N.property_type?.message,children:(0,t.jsxs)("select",{id:"property_type",className:`block w-full rounded-lg border ${N.property_type?"border-red-300":"border-gray-300"} py-2 px-3 text-sm bg-white focus:outline-none focus:ring-primary-500 focus:border-primary-500`,...l("property_type",{required:"Property type is required"}),children:[t.jsx("option",{value:"",children:"Select Property Type"}),t.jsx("option",{value:"Apartment",children:"Apartment"}),t.jsx("option",{value:"Villa",children:"Villa"}),t.jsx("option",{value:"Townhouse",children:"Townhouse"}),t.jsx("option",{value:"Penthouse",children:"Penthouse"}),t.jsx("option",{value:"Chalet",children:"Chalet"}),t.jsx("option",{value:"Duplex",children:"Duplex"}),t.jsx("option",{value:"Office",children:"Office"}),t.jsx("option",{value:"Shop",children:"Shop"}),t.jsx("option",{value:"Land",children:"Land"})]})}),t.jsx(b.Z,{label:"Price (EGP)",htmlFor:"price",required:!0,error:N.price?.message,children:t.jsx(g.Z,{id:"price",type:"number",placeholder:"Enter property price",leftIcon:t.jsx(y.oQC,{}),...l("price",{required:"Price is required",min:{value:0,message:"Price must be positive"}}),error:!!N.price})})]}),t.jsx(b.Z,{label:"Description",htmlFor:"description",children:t.jsx("textarea",{id:"description",rows:5,placeholder:"Describe the property in detail",className:"block w-full rounded-lg border border-gray-300 py-2 px-3 text-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500",...l("description")})}),t.jsx("div",{className:"bg-blue-50 p-3 rounded-lg mt-4",children:(0,t.jsxs)("div",{className:"flex items-start",children:[t.jsx(y.H33,{className:"h-4 w-4 text-blue-500 mt-0.5 mr-2 flex-shrink-0"}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-xs text-blue-700 font-medium",children:"Pro Tip"}),t.jsx("p",{className:"text-xs text-blue-600",children:"Create a compelling title that highlights the property's best features. Add a detailed description including unique selling points, nearby amenities, and transportation options."})]})]})})]},"basic"),"project"===F&&(0,t.jsxs)(n.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"space-y-3",children:[(0,t.jsxs)("div",{className:"mb-2 pb-2 border-b border-gray-100",children:[(0,t.jsxs)("h2",{className:"text-sm font-semibold text-gray-800 flex items-center",children:[t.jsx(y.MIl,{className:"mr-2 h-4 w-4 text-primary-500"}),"Project & Location Details"]}),t.jsx("p",{className:"text-xs text-gray-500",children:"Enter information about the project and its location"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[t.jsx(b.Z,{label:"Project Name",htmlFor:"project_name",helper:"The name of the development project",children:t.jsx(g.Z,{id:"project_name",type:"text",placeholder:"e.g. Mountain View iCity",leftIcon:t.jsx(y.wBW,{}),...l("project_name")})}),t.jsx(b.Z,{label:"Compound Name",htmlFor:"compound_name",helper:"The specific compound within the project",children:t.jsx(g.Z,{id:"compound_name",type:"text",placeholder:"e.g. iVilla",leftIcon:t.jsx(y.aCJ,{}),...l("compound_name")})})]}),t.jsx(b.Z,{label:"Developer Name",htmlFor:"developer_name",helper:"The company that developed the property",children:t.jsx(g.Z,{id:"developer_name",type:"text",placeholder:"e.g. SODIC, Emaar, etc.",leftIcon:t.jsx(y.vPQ,{}),...l("developer_name")})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[t.jsx(b.Z,{label:"City",htmlFor:"city",required:!0,error:N.city?.message,children:(0,t.jsxs)("select",{id:"city",className:`block w-full rounded-lg border ${N.city?"border-red-300":"border-gray-300"} py-2 px-3 text-sm bg-white focus:outline-none focus:ring-primary-500 focus:border-primary-500`,...l("city",{required:"City is required"}),children:[t.jsx("option",{value:"",children:"Select City"}),t.jsx("option",{value:"Cairo",children:"Cairo"}),t.jsx("option",{value:"Alexandria",children:"Alexandria"}),t.jsx("option",{value:"Giza",children:"Giza"}),t.jsx("option",{value:"Sharm El Sheikh",children:"Sharm El Sheikh"}),t.jsx("option",{value:"Hurghada",children:"Hurghada"}),t.jsx("option",{value:"Luxor",children:"Luxor"}),t.jsx("option",{value:"Aswan",children:"Aswan"}),t.jsx("option",{value:"Port Said",children:"Port Said"}),t.jsx("option",{value:"Suez",children:"Suez"}),t.jsx("option",{value:"El Alamein",children:"El Alamein"}),t.jsx("option",{value:"Dahab",children:"Dahab"}),t.jsx("option",{value:"North Coast",children:"North Coast"}),t.jsx("option",{value:"New Cairo",children:"New Cairo"}),t.jsx("option",{value:"6th of October",children:"6th of October"}),t.jsx("option",{value:"Sheikh Zayed",children:"Sheikh Zayed"}),t.jsx("option",{value:"New Capital",children:"New Capital"})]})}),t.jsx(b.Z,{label:"Location",htmlFor:"location",required:!0,error:N.location?.message,children:t.jsx(g.Z,{id:"location",type:"text",placeholder:"e.g. Fifth Settlement, Maadi",leftIcon:t.jsx(y.i63,{}),...l("location",{required:"Location is required"}),error:!!N.location})})]}),(0,t.jsxs)("div",{className:"mt-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Geo Location"}),t.jsx("button",{type:"button",className:"text-xs text-primary-600 hover:text-primary-500 font-medium",onClick:()=>D(!z),children:z?"Close Map":"Open Map"})]}),f("geo_location")&&t.jsx("div",{className:"bg-gray-50 p-2 rounded-md mb-2",children:(0,t.jsxs)("div",{className:"text-xs text-gray-700",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[t.jsx(y.i63,{className:"mr-1 h-3 w-3 text-primary-500"}),(0,t.jsxs)("span",{children:["Latitude: ",f("geo_location")?.lat.toFixed(6)]})]}),(0,t.jsxs)("div",{className:"flex items-center mt-1",children:[t.jsx(y.i63,{className:"mr-1 h-3 w-3 text-primary-500"}),(0,t.jsxs)("span",{children:["Longitude: ",f("geo_location")?.lng.toFixed(6)]})]})]})}),z&&t.jsx("div",{className:"mt-2 border border-gray-200 rounded-lg overflow-hidden h-96",children:t.jsx(properties_LocationPicker,{onSelect:e=>{v("geo_location",e),D(!1)}})}),!f("geo_location")&&!z&&(0,t.jsxs)("button",{type:"button",onClick:()=>D(!0),className:"flex items-center justify-center w-full p-3 border-2 border-dashed border-gray-300 rounded-lg text-sm text-gray-600 hover:text-primary-600 hover:border-primary-300",children:[t.jsx(y.i63,{className:"mr-2 h-4 w-4"}),"Select Location on Map"]})]})]},"project"),"details"===F&&(0,t.jsxs)(n.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"space-y-3",children:[(0,t.jsxs)("div",{className:"mb-2 pb-2 border-b border-gray-100",children:[(0,t.jsxs)("h2",{className:"text-sm font-semibold text-gray-800 flex items-center",children:[t.jsx(y.H33,{className:"mr-2 h-4 w-4 text-primary-500"}),"Property Details"]}),t.jsx("p",{className:"text-xs text-gray-500",children:"Enter the specific details of this property"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[t.jsx(b.Z,{label:"Bedrooms",htmlFor:"bedrooms",children:(0,t.jsxs)("div",{className:"flex items-center",children:[t.jsx("div",{className:"mr-2 text-gray-400",children:t.jsx(y.m6D,{className:"h-4 w-4"})}),(0,t.jsxs)("select",{id:"bedrooms",className:"block w-full rounded-lg border border-gray-300 py-2 px-3 text-sm bg-white focus:outline-none focus:ring-primary-500 focus:border-primary-500",...l("bedrooms"),children:[t.jsx("option",{value:"",children:"Select"}),t.jsx("option",{value:"Studio",children:"Studio"}),t.jsx("option",{value:"1",children:"1"}),t.jsx("option",{value:"2",children:"2"}),t.jsx("option",{value:"3",children:"3"}),t.jsx("option",{value:"4",children:"4"}),t.jsx("option",{value:"5",children:"5"}),t.jsx("option",{value:"6+",children:"6+"})]})]})}),t.jsx(b.Z,{label:"Bathrooms",htmlFor:"bathrooms",children:(0,t.jsxs)("div",{className:"flex items-center",children:[t.jsx("div",{className:"mr-2 text-gray-400",children:t.jsx(y.m6D,{className:"h-4 w-4"})}),(0,t.jsxs)("select",{id:"bathrooms",className:"block w-full rounded-lg border border-gray-300 py-2 px-3 text-sm bg-white focus:outline-none focus:ring-primary-500 focus:border-primary-500",...l("bathrooms"),children:[t.jsx("option",{value:"",children:"Select"}),t.jsx("option",{value:"1",children:"1"}),t.jsx("option",{value:"2",children:"2"}),t.jsx("option",{value:"3",children:"3"}),t.jsx("option",{value:"4",children:"4"}),t.jsx("option",{value:"5+",children:"5+"})]})]})}),t.jsx(b.Z,{label:"Area Size (m\xb2)",htmlFor:"area_size",error:N.area_size?.message,children:(0,t.jsxs)("div",{className:"flex items-center",children:[t.jsx("div",{className:"mr-2 text-gray-400",children:t.jsx(y.D7o,{className:"h-4 w-4"})}),t.jsx(g.Z,{id:"area_size",type:"number",placeholder:"e.g. 150",...l("area_size",{min:{value:0,message:"Area must be positive"}}),error:!!N.area_size})]})})]}),(0,t.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg mt-2",children:[t.jsx(b.Z,{label:"Availability",htmlFor:"available",children:(0,t.jsxs)("div",{className:"flex items-center mt-1",children:[t.jsx("input",{id:"available",type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500",...l("available")}),t.jsx("label",{htmlFor:"available",className:"ml-2 block text-sm text-gray-700",children:"Available for viewing/purchase"})]})}),f("available")&&t.jsx("div",{className:"mt-2 pl-6",children:t.jsx("p",{className:"text-xs text-gray-500",children:"This property will be shown in search results and available for scheduling viewings."})}),!f("available")&&t.jsx("div",{className:"mt-2 pl-6",children:t.jsx("p",{className:"text-xs text-gray-500",children:"This property will be hidden from search results and not available for scheduling viewings."})})]}),t.jsx("div",{className:"bg-blue-50 p-3 rounded-lg mt-4",children:(0,t.jsxs)("div",{className:"flex items-start",children:[t.jsx(y.H33,{className:"h-4 w-4 text-blue-500 mt-0.5 mr-2 flex-shrink-0"}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-xs text-blue-700 font-medium",children:"Pro Tip"}),t.jsx("p",{className:"text-xs text-blue-600",children:"Adding detailed information about the property helps potential buyers make informed decisions. Be accurate with measurements and include all relevant specifications."})]})]})})]},"details"),"features"===F&&(0,t.jsxs)(n.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:[(0,t.jsxs)("div",{className:"mb-2 pb-2 border-b border-gray-100",children:[(0,t.jsxs)("h2",{className:"text-sm font-semibold text-gray-800 flex items-center",children:[t.jsx(y.SnF,{className:"mr-2 h-4 w-4 text-primary-500"}),"Property Features"]}),t.jsx("p",{className:"text-xs text-gray-500",children:"Select all the features and amenities this property offers"})]}),t.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-x-4 gap-y-3",children:$.map(e=>(0,t.jsxs)("div",{className:"relative flex items-start",children:[t.jsx("div",{className:"flex items-center h-5",children:t.jsx("input",{id:e.id,type:"checkbox",onChange:r=>handleFeatureChange(e.id,r.target.checked),className:"focus:ring-primary-500 h-4 w-4 text-primary-600 border-gray-300 rounded"})}),(0,t.jsxs)("div",{className:"ml-2 flex items-center",children:[e.icon,t.jsx("label",{htmlFor:e.id,className:"ml-1 text-xs text-gray-700",children:e.label})]})]},e.id))}),(0,t.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg mt-6",children:[t.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Selected Features"}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[Object.entries(f("features")||{}).filter(([e,r])=>r).map(([e])=>{let r=$.find(r=>r.id===e);return r?(0,t.jsxs)("div",{className:"px-2 py-1 bg-primary-50 text-primary-700 rounded-full text-xs flex items-center",children:[r.icon,t.jsx("span",{className:"ml-1",children:r.label})]},e):null}),0===Object.entries(f("features")||{}).filter(([e,r])=>r).length&&t.jsx("p",{className:"text-xs text-gray-500 italic",children:"No features selected"})]})]})]},"features"),"images"===F&&(0,t.jsxs)(n.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:[(0,t.jsxs)("div",{className:"mb-2 pb-2 border-b border-gray-100",children:[(0,t.jsxs)("h2",{className:"text-sm font-semibold text-gray-800 flex items-center",children:[t.jsx(y.LFN,{className:"mr-2 h-4 w-4 text-primary-500"}),"Property Images"]}),t.jsx("p",{className:"text-xs text-gray-500",children:"Upload high-quality images to showcase the property"})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,t.jsxs)("h3",{className:"text-sm font-medium text-gray-700 mb-2 flex items-center",children:[t.jsx(y.tBf,{className:"mr-2 h-4 w-4 text-primary-500"}),"Property Images"]}),t.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Upload high-quality images of the property interior and exterior"}),t.jsx("input",{ref:O,type:"file",accept:"image/*",multiple:!0,onChange:e=>handleImageChange(e,"property"),className:"hidden"}),(0,t.jsxs)("button",{type:"button",onClick:()=>O.current?.click(),className:"flex items-center justify-center w-full p-3 border-2 border-dashed border-gray-300 rounded-lg text-sm text-gray-600 hover:text-primary-600 hover:border-primary-300",children:[t.jsx(y.Yjd,{className:"mr-2 h-4 w-4"}),"Upload Property Images"]}),L.length>0&&t.jsx("div",{className:"mt-4 grid grid-cols-2 gap-4 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5",children:L.map((e,r)=>(0,t.jsxs)("div",{className:"relative group",children:[t.jsx("img",{src:e.preview,alt:`Property preview ${r+1}`,className:"h-24 w-full object-cover rounded-md"}),t.jsx("button",{type:"button",onClick:()=>removeImage(r,"property"),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 shadow-sm hover:bg-red-600 focus:outline-none",children:t.jsx(y.q5L,{className:"h-3 w-3"})}),0===r&&t.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-primary-500 text-white text-xs text-center py-0.5",children:"Featured"})]},r))})]}),(0,t.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,t.jsxs)("h3",{className:"text-sm font-medium text-gray-700 mb-2 flex items-center",children:[t.jsx(y.NOg,{className:"mr-2 h-4 w-4 text-primary-500"}),"Master Plan Images"]}),t.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Upload project master plan images and layouts"}),t.jsx("input",{ref:R,type:"file",accept:"image/*",multiple:!0,onChange:e=>handleImageChange(e,"master_plan"),className:"hidden"}),(0,t.jsxs)("button",{type:"button",onClick:()=>R.current?.click(),className:"flex items-center justify-center w-full p-3 border-2 border-dashed border-gray-300 rounded-lg text-sm text-gray-600 hover:text-primary-600 hover:border-primary-300",children:[t.jsx(y.Yjd,{className:"mr-2 h-4 w-4"}),"Upload Master Plan Images"]}),M.length>0&&t.jsx("div",{className:"mt-4 grid grid-cols-2 gap-4 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5",children:M.map((e,r)=>(0,t.jsxs)("div",{className:"relative group",children:[t.jsx("img",{src:e.preview,alt:`Master Plan preview ${r+1}`,className:"h-24 w-full object-cover rounded-md"}),t.jsx("button",{type:"button",onClick:()=>removeImage(r,"master_plan"),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 shadow-sm hover:bg-red-600 focus:outline-none",children:t.jsx(y.q5L,{className:"h-3 w-3"})})]},r))})]}),(0,t.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,t.jsxs)("h3",{className:"text-sm font-medium text-gray-700 mb-2 flex items-center",children:[t.jsx(y.yG,{className:"mr-2 h-4 w-4 text-primary-500"}),"Compound Images"]}),t.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Upload images of the compound and amenities"}),t.jsx("input",{ref:J,type:"file",accept:"image/*",multiple:!0,onChange:e=>handleImageChange(e,"compound"),className:"hidden"}),(0,t.jsxs)("button",{type:"button",onClick:()=>J.current?.click(),className:"flex items-center justify-center w-full p-3 border-2 border-dashed border-gray-300 rounded-lg text-sm text-gray-600 hover:text-primary-600 hover:border-primary-300",children:[t.jsx(y.Yjd,{className:"mr-2 h-4 w-4"}),"Upload Compound Images"]}),Z.length>0&&t.jsx("div",{className:"mt-4 grid grid-cols-2 gap-4 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5",children:Z.map((e,r)=>(0,t.jsxs)("div",{className:"relative group",children:[t.jsx("img",{src:e.preview,alt:`Compound preview ${r+1}`,className:"h-24 w-full object-cover rounded-md"}),t.jsx("button",{type:"button",onClick:()=>removeImage(r,"compound"),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 shadow-sm hover:bg-red-600 focus:outline-none",children:t.jsx(y.q5L,{className:"h-3 w-3"})})]},r))})]})]}),(0,t.jsxs)("div",{className:"mt-6 bg-white p-4 rounded-lg border border-gray-200",children:[t.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Upload Summary"}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"bg-gray-50 p-2 rounded-md text-center",children:[t.jsx("span",{className:"text-xs text-gray-500",children:"Property Images"}),t.jsx("p",{className:"text-lg font-semibold text-primary-600",children:L.length})]}),(0,t.jsxs)("div",{className:"bg-gray-50 p-2 rounded-md text-center",children:[t.jsx("span",{className:"text-xs text-gray-500",children:"Master Plan"}),t.jsx("p",{className:"text-lg font-semibold text-primary-600",children:M.length})]}),(0,t.jsxs)("div",{className:"bg-gray-50 p-2 rounded-md text-center",children:[t.jsx("span",{className:"text-xs text-gray-500",children:"Compound"}),t.jsx("p",{className:"text-lg font-semibold text-primary-600",children:Z.length})]})]})]}),_&&(L.length>0||M.length>0||Z.length>0)&&t.jsx("div",{className:"mt-6",children:(0,t.jsxs)("div",{className:"relative pt-1",children:[(0,t.jsxs)("div",{className:"flex mb-2 items-center justify-between",children:[t.jsx("div",{children:t.jsx("span",{className:"text-xs font-medium inline-block py-1 px-2 uppercase rounded-full text-primary-600 bg-primary-50",children:"Uploading images"})}),t.jsx("div",{className:"text-right",children:(0,t.jsxs)("span",{className:"text-xs font-medium inline-block text-primary-600",children:[U,"%"]})})]}),t.jsx("div",{className:"overflow-hidden h-2 mb-4 text-xs flex rounded bg-primary-50",children:t.jsx("div",{style:{width:`${U}%`},className:"shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-primary-500"})})]})})]},"images")]})}),(0,t.jsxs)("div",{className:"px-4 py-3 bg-gray-50 flex justify-between",children:[t.jsx(u.Z,{type:"button",variant:"light",size:"sm",onClick:e=>{e.preventDefault(),"basic"===F?s.back():goToPrevSection()},children:"basic"===F?"Cancel":"Previous"}),"images"===F?t.jsx(u.Z,{type:"submit",variant:"gradient",size:"sm",leftIcon:t.jsx(y.mW3,{}),loading:_,disabled:_,children:"Create Property"}):t.jsx(u.Z,{type:"button",variant:"primary",size:"sm",onClick:e=>{e.preventDefault(),goToNextSection()},disabled:!("basic"===F?!!f("title")&&!!f("property_type")&&!!f("price"):"project"!==F||!!f("location")&&!!f("city")),children:"Continue"})]})]})})]})}},1680:(e,r,s)=>{"use strict";s.r(r),s.d(r,{$$typeof:()=>l,__esModule:()=>i,default:()=>n});var t=s(5153);let a=(0,t.createProxy)(String.raw`E:\bigdealegy\bigdealegy\frontend\src\app\sales-ops\properties\new\page.tsx`),{__esModule:i,$$typeof:l}=a,o=a.default,n=o}};var r=require("../../../../webpack-runtime.js");r.C(e);var __webpack_exec__=e=>r(r.s=e),s=r.X(0,[657,4043,2076,1332,7686,6558,1407,2070,549,5846,2522,3431,2718,2770,1414,1068],()=>__webpack_exec__(3627));module.exports=s})();