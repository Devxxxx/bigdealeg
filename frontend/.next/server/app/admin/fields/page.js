(()=>{var e={};e.id=9924,e.ids=[9924],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},6377:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>d.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>o});var s=t(7096),a=t(6132),l=t(7284),d=t.n(l),i=t(2564),n={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>i[e]);t.d(r,n);let o=["",{children:["admin",{children:["fields",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,2391)),"E:\\bigdealegy\\bigdealegy\\frontend\\src\\app\\admin\\fields\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,9862)),"E:\\bigdealegy\\bigdealegy\\frontend\\src\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,9851)),"E:\\bigdealegy\\bigdealegy\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9291,23)),"next/dist/client/components/not-found-error"]}],c=["E:\\bigdealegy\\bigdealegy\\frontend\\src\\app\\admin\\fields\\page.tsx"],m="/admin/fields/page",x={require:t,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/fields/page",pathname:"/admin/fields",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},9154:(e,r,t)=>{Promise.resolve().then(t.bind(t,752))},752:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>FormFieldsManagement});var s=t(784),a=t(9885),l=t(647),d=t(5189),i=t(345),n=t(3500);function FieldFormModal({isOpen:e,onClose:r,onSave:t,field:l,mode:d="create"}){let i={field_name:"",field_label:"",field_type:"text",is_required:!1,field_span:"full",placeholder:"",help_text:"",options:"",min_value:"",max_value:""},[o,c]=(0,a.useState)(i),[m,x]=(0,a.useState)({});(0,a.useEffect)(()=>{"edit"===d&&l?c({...i,...l}):"create"===d&&c(i)},[l,d]);let u=(0,a.useCallback)(e=>{let{name:r,value:t,type:s,checked:a}=e.target;c(e=>({...e,[r]:"checkbox"===s?a:t})),m[r]&&x(e=>({...e,[r]:""}))},[m]),h=(0,a.useCallback)(()=>{let e={};if(o.field_name.trim()?/^[a-zA-Z0-9_]+$/.test(o.field_name)||(e.field_name="Field name can only contain letters, numbers, and underscores"):e.field_name="Field name is required",o.field_label.trim()||(e.field_label="Field label is required"),"select"!==o.field_type||o.options.trim()||(e.options="Options are required for dropdown fields"),"number"===o.field_type&&""!==o.min_value&&""!==o.max_value){let r=parseFloat(o.min_value),t=parseFloat(o.max_value);r>=t&&(e.min_value="Minimum value must be less than maximum value")}return x(e),0===Object.keys(e).length},[o]),f=(0,a.useCallback)(e=>{if(e.preventDefault(),h()){let e={...o};"number"!==e.field_type&&(delete e.min_value,delete e.max_value),"select"!==e.field_type&&delete e.options,"edit"===d&&l?.id&&(e.id=l.id),t(e)}},[o,h,d,l,t]);return e?s.jsx("div",{className:"fixed inset-0 overflow-y-auto z-50",children:(0,s.jsxs)("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[s.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",onClick:r,children:s.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),s.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"​"}),(0,s.jsxs)("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:(0,s.jsxs)("div",{className:"sm:flex sm:items-start",children:[s.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-100 sm:mx-0 sm:h-10 sm:w-10",children:s.jsx(n.p4t,{className:"h-6 w-6 text-blue-600"})}),(0,s.jsxs)("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full",children:[s.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 dark:text-white",children:"create"===d?"Add New Field":"Edit Field"}),s.jsx("form",{onSubmit:f,className:"mt-4",children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"field_name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Field Name ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",id:"field_name",name:"field_name",value:o.field_name,onChange:u,disabled:"edit"===d,className:`mt-1 block w-full rounded-md ${"edit"===d?"bg-gray-100 dark:bg-gray-700":""} ${m.field_name?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary focus:border-primary"} shadow-sm dark:border-gray-600 dark:text-white`}),m.field_name&&s.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:m.field_name}),s.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Unique identifier (no spaces, only letters, numbers, and underscores)"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"field_label",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Field Label ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",id:"field_label",name:"field_label",value:o.field_label,onChange:u,className:`mt-1 block w-full rounded-md ${m.field_label?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary focus:border-primary"} shadow-sm dark:border-gray-600 dark:text-white`}),m.field_label&&s.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:m.field_label}),s.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Text displayed above the field"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"field_type",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Field Type ",s.jsx("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("select",{id:"field_type",name:"field_type",value:o.field_type,onChange:u,className:"mt-1 block w-full rounded-md border-gray-300 focus:ring-primary focus:border-primary shadow-sm dark:border-gray-600 dark:bg-gray-700 dark:text-white",children:[s.jsx("option",{value:"text",children:"Text"}),s.jsx("option",{value:"number",children:"Number"}),s.jsx("option",{value:"select",children:"Dropdown"}),s.jsx("option",{value:"checkbox",children:"Checkbox"}),s.jsx("option",{value:"textarea",children:"Text Area"})]})]}),(0,s.jsxs)("div",{className:"flex items-start",children:[s.jsx("div",{className:"flex items-center h-5",children:s.jsx("input",{id:"is_required",name:"is_required",type:"checkbox",checked:o.is_required,onChange:u,className:"focus:ring-primary h-4 w-4 text-primary border-gray-300 rounded dark:border-gray-600 dark:bg-gray-700"})}),(0,s.jsxs)("div",{className:"ml-3 text-sm",children:[s.jsx("label",{htmlFor:"is_required",className:"font-medium text-gray-700 dark:text-gray-300",children:"Required Field"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Users must fill out this field"})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"field_span",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Field Width"}),(0,s.jsxs)("select",{id:"field_span",name:"field_span",value:o.field_span,onChange:u,className:"mt-1 block w-full rounded-md border-gray-300 focus:ring-primary focus:border-primary shadow-sm dark:border-gray-600 dark:bg-gray-700 dark:text-white",children:[s.jsx("option",{value:"full",children:"Full Width"}),s.jsx("option",{value:"half",children:"Half Width"}),s.jsx("option",{value:"third",children:"Third Width"})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"placeholder",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Placeholder"}),s.jsx("input",{type:"text",id:"placeholder",name:"placeholder",value:o.placeholder,onChange:u,className:"mt-1 block w-full rounded-md border-gray-300 focus:ring-primary focus:border-primary shadow-sm dark:border-gray-600 dark:text-white"}),s.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Example text shown in the field"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"help_text",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Help Text"}),s.jsx("input",{type:"text",id:"help_text",name:"help_text",value:o.help_text,onChange:u,className:"mt-1 block w-full rounded-md border-gray-300 focus:ring-primary focus:border-primary shadow-sm dark:border-gray-600 dark:text-white"}),s.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Additional instructions shown below the field"})]}),"select"===o.field_type&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"options",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Options ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("textarea",{id:"options",name:"options",value:o.options,onChange:u,rows:3,className:`mt-1 block w-full rounded-md ${m.options?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary focus:border-primary"} shadow-sm dark:border-gray-600 dark:text-white`}),m.options&&s.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:m.options}),s.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:'Comma-separated list of options (e.g., "Option 1, Option 2, Option 3")'})]}),"number"===o.field_type&&(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"min_value",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Minimum Value"}),s.jsx("input",{type:"number",id:"min_value",name:"min_value",value:o.min_value,onChange:u,className:`mt-1 block w-full rounded-md ${m.min_value?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary focus:border-primary"} shadow-sm dark:border-gray-600 dark:text-white`}),m.min_value&&s.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:m.min_value})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"max_value",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Maximum Value"}),s.jsx("input",{type:"number",id:"max_value",name:"max_value",value:o.max_value,onChange:u,className:"mt-1 block w-full rounded-md border-gray-300 focus:ring-primary focus:border-primary shadow-sm dark:border-gray-600 dark:text-white"})]})]})]})})]})]})}),(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[(0,s.jsxs)("button",{type:"button",onClick:f,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary text-base font-medium text-white hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary sm:ml-3 sm:w-auto sm:text-sm",children:[s.jsx(n.TvB,{className:"mr-2 h-5 w-5"}),"create"===d?"Create Field":"Save Changes"]}),(0,s.jsxs)("button",{type:"button",onClick:r,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm dark:bg-gray-600 dark:text-white dark:border-gray-600 dark:hover:bg-gray-500",children:[s.jsx(n.aHS,{className:"mr-2 h-5 w-5"}),"Cancel"]})]})]})]})}):null}function Header({openCreateModal:e,fieldCount:r}){return s.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between p-6",children:[(0,s.jsxs)("div",{className:"mb-4 md:mb-0",children:[(0,s.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[s.jsx("span",{className:"mr-2",children:"\uD83D\uDEE0️"})," Form Fields Management"]}),s.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Customize the property request form fields for your users"})]}),s.jsx("div",{children:(0,s.jsxs)("button",{onClick:e,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",children:[s.jsx(n.wEH,{className:"mr-2 h-4 w-4"}),"Add Field"]})})]})})}function FieldsListHeader({fieldCount:e}){return(0,s.jsxs)("div",{className:"px-6 py-4 flex justify-between items-center bg-gray-50 rounded-t-lg",children:[(0,s.jsxs)("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:["Form Fields",s.jsx("span",{className:"ml-2 bg-gray-200 text-gray-700 text-xs font-medium px-2.5 py-0.5 rounded-full",children:e})]}),(0,s.jsxs)("div",{className:"flex items-center text-sm text-gray-500",children:[s.jsx(n.r_,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Ordered by position"})]})]})}function EmptyState({hasFilters:e,openCreateModal:r}){return s.jsx("div",{className:"flex flex-col items-center justify-center p-12 text-center",children:e?(0,s.jsxs)(s.Fragment,{children:[s.jsx("div",{className:"text-gray-400 text-4xl mb-4",children:"\uD83D\uDD0D"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No matching fields"}),s.jsx("p",{className:"text-gray-500 text-sm",children:"Try adjusting your search or filter"})]}):(0,s.jsxs)(s.Fragment,{children:[s.jsx("div",{className:"text-gray-400 text-4xl mb-4",children:"\uD83D\uDCCB"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No fields found"}),s.jsx("p",{className:"text-gray-500 text-sm mb-4",children:"Create your first form field to get started"}),(0,s.jsxs)("button",{onClick:r,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",children:[s.jsx(n.wEH,{className:"-ml-1 mr-2 h-4 w-4"}),"Add First Field"]})]})})}let getFieldTypeDetails=e=>{switch(e){case"text":return{icon:"T",color:"bg-blue-500",label:"Text"};case"number":return{icon:"#",color:"bg-green-500",label:"Number"};case"select":return{icon:"▼",color:"bg-purple-500",label:"Dropdown"};case"checkbox":return{icon:"☑",color:"bg-yellow-500",label:"Checkbox"};case"textarea":return{icon:"\xb6",color:"bg-indigo-500",label:"Text Area"};default:return{icon:"?",color:"bg-gray-500",label:e}}};function FieldCard({field:e,index:r,totalFields:t,onEdit:a,onDelete:l,onToggleRequired:d,onChangeOrder:i,onDuplicate:o}){let c=getFieldTypeDetails(e.field_type),m=0===r,x=r===t-1;return(0,s.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4 shadow-sm transition-all hover:shadow-md relative group",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsxs)("div",{className:"flex items-start",children:[s.jsx("div",{className:`flex-shrink-0 w-10 h-10 ${c.color} text-white flex items-center justify-center rounded-lg font-mono text-lg`,children:c.icon}),(0,s.jsxs)("div",{className:"ml-4",children:[(0,s.jsxs)("div",{className:"flex items-center flex-wrap gap-2",children:[s.jsx("h4",{className:"text-lg font-medium text-gray-900",children:e.field_label}),e.is_required&&s.jsx("span",{className:"bg-red-100 text-red-800 text-xs font-semibold px-2.5 py-0.5 rounded-full",children:"Required"}),s.jsx("span",{className:"text-gray-500 text-xs font-medium px-2.5 py-0.5 rounded-full border border-gray-300",children:"full"===e.field_span?"Full Width":"half"===e.field_span?"Half Width":"Third Width"})]}),(0,s.jsxs)("div",{className:"mt-1 text-sm text-gray-500 flex flex-wrap gap-2 items-center",children:[s.jsx("span",{className:"font-mono bg-gray-100 px-2 py-0.5 rounded",children:e.field_name}),(0,s.jsxs)("span",{className:"flex items-center",children:[s.jsx("span",{className:`inline-block w-2 h-2 rounded-full ${c.color} mr-1`}),c.label]}),(0,s.jsxs)("span",{children:["Order: ",e.order]})]}),e.help_text&&(0,s.jsxs)("div",{className:"mt-2 text-xs text-gray-500 bg-gray-50 p-2 rounded",children:[s.jsx("span",{className:"font-medium",children:"Help text:"})," ",e.help_text]}),"select"===e.field_type&&e.options&&(0,s.jsxs)("div",{className:"mt-2 text-xs text-gray-500",children:[s.jsx("span",{className:"font-medium",children:"Options:"})," ",e.options]})]})]}),(0,s.jsxs)("div",{className:"hidden group-hover:flex items-start space-x-2",children:[s.jsx("button",{onClick:()=>d(e),className:"p-1 rounded-md hover:bg-gray-100",title:e.is_required?"Make Optional":"Make Required",children:e.is_required?s.jsx(n.NCu,{className:"h-5 w-5 text-green-600"}):s.jsx(n.uYB,{className:"h-5 w-5 text-gray-400"})}),s.jsx("button",{onClick:()=>i(e,"up"),className:"p-1 rounded-md hover:bg-gray-100",title:"Move Up",disabled:m,children:s.jsx(n.ZTc,{className:`h-5 w-5 ${m?"text-gray-300":"text-gray-600 hover:text-gray-900"}`})}),s.jsx("button",{onClick:()=>i(e,"down"),className:"p-1 rounded-md hover:bg-gray-100",title:"Move Down",disabled:x,children:s.jsx(n.NWQ,{className:`h-5 w-5 ${x?"text-gray-300":"text-gray-600 hover:text-gray-900"}`})}),s.jsx("button",{onClick:()=>o(e),className:"p-1 rounded-md hover:bg-gray-100 text-blue-600 hover:text-blue-800",title:"Duplicate Field",children:s.jsx(n.d_e,{className:"h-5 w-5"})}),s.jsx("button",{onClick:()=>a(e),className:"p-1 rounded-md hover:bg-gray-100 text-primary hover:text-primary/80",title:"Edit Field",children:s.jsx(n.fmQ,{className:"h-5 w-5"})}),s.jsx("button",{onClick:()=>l(e.id),className:"p-1 rounded-md hover:bg-gray-100 text-red-600 hover:text-red-800",title:"Delete Field",children:s.jsx(n.Xm5,{className:"h-5 w-5"})})]})]}),s.jsx("div",{className:"absolute top-1/2 left-0 transform -translate-y-1/2 -translate-x-2 w-4 h-8 flex items-center justify-center opacity-0 group-hover:opacity-50 cursor-move",children:s.jsx(n.U9V,{className:"h-4 w-4 text-gray-400"})})]})}function SearchAndFilter({searchTerm:e,setSearchTerm:r,filterType:t,setFilterType:a}){return(0,s.jsxs)("div",{className:"flex flex-col md:flex-row space-y-2 md:space-y-0 md:space-x-4",children:[(0,s.jsxs)("div",{className:"relative flex-grow",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(n.U41,{className:"h-4 w-4 text-gray-400"})}),s.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-primary focus:border-primary sm:text-sm",placeholder:"Search fields...",value:e,onChange:e=>r(e.target.value)})]}),(0,s.jsxs)("div",{className:"relative w-full md:w-56",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(n.ulB,{className:"h-4 w-4 text-gray-400"})}),(0,s.jsxs)("select",{className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white focus:outline-none focus:ring-primary focus:border-primary sm:text-sm",value:t,onChange:e=>a(e.target.value),children:[s.jsx("option",{value:"all",children:"All Field Types"}),s.jsx("option",{value:"text",children:"Text Fields"}),s.jsx("option",{value:"number",children:"Number Fields"}),s.jsx("option",{value:"select",children:"Dropdown Fields"}),s.jsx("option",{value:"checkbox",children:"Checkbox Fields"}),s.jsx("option",{value:"textarea",children:"Text Area Fields"})]})]})]})}function HelpPanel(){let[e,r]=(0,a.useState)(!1);return(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden mb-6",children:[(0,s.jsxs)("div",{className:"p-6 flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[s.jsx(n.DAO,{className:"h-5 w-5 text-blue-500 mr-3"}),(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Need help with form fields?"}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Learn about how to create and manage form fields effectively"})]})]}),s.jsx("button",{onClick:()=>r(!e),className:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",children:e?"Hide Help":"Show Help"})]}),e&&(0,s.jsxs)("div",{className:"bg-blue-50 p-6 animate-fadeIn border-t border-blue-100",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{className:"bg-white p-4 rounded shadow-sm",children:[s.jsx("h4",{className:"font-medium text-gray-800 mb-2",children:"Field Name"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Unique identifier for the field (no spaces, letters, numbers, and underscores only)."})]}),(0,s.jsxs)("div",{className:"bg-white p-4 rounded shadow-sm",children:[s.jsx("h4",{className:"font-medium text-gray-800 mb-2",children:"Field Label"}),s.jsx("p",{className:"text-sm text-gray-600",children:"The text that appears above the field on the form."})]}),(0,s.jsxs)("div",{className:"bg-white p-4 rounded shadow-sm",children:[s.jsx("h4",{className:"font-medium text-gray-800 mb-2",children:"Field Types"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Choose from text, number, dropdown, checkbox, or text area inputs."})]}),(0,s.jsxs)("div",{className:"bg-white p-4 rounded shadow-sm",children:[s.jsx("h4",{className:"font-medium text-gray-800 mb-2",children:"Field Order"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Arrange fields by using the up/down arrows to change display order."})]})]}),(0,s.jsxs)("div",{className:"mt-4",children:[s.jsx("h4",{className:"font-medium text-gray-800 mb-2",children:"Best Practices"}),(0,s.jsxs)("ul",{className:"list-disc pl-5 text-sm text-gray-600 space-y-1",children:[s.jsx("li",{children:"Keep field labels clear and concise"}),s.jsx("li",{children:"Group related fields together with similar order numbers"}),s.jsx("li",{children:"Use help text to clarify what information is needed"}),s.jsx("li",{children:"Only mark fields as required when the information is essential"}),s.jsx("li",{children:"For dropdown fields, list the most common options first"})]})]})]})]})}function StatusMessage({message:e,type:r}){return e?s.jsx("div",{className:`
      bg-${"success"===r?"green":"red"}-50 
      border-l-4 
      border-${"success"===r?"green":"red"}-400 
      p-4 
      rounded-md 
      shadow-sm 
      animate-fadeIn
      mb-4
    `,children:(0,s.jsxs)("div",{className:"flex items-center",children:["success"===r?s.jsx(n.l_A,{className:"h-5 w-5 text-green-400 mr-3"}):s.jsx(n.aHS,{className:"h-5 w-5 text-red-400 mr-3"}),s.jsx("p",{className:`text-sm text-${"success"===r?"green":"red"}-700`,children:e})]})}):null}function FormFieldsManagement(){let{session:e}=(0,l.a)(),[r,t]=(0,a.useState)([]),[n,o]=(0,a.useState)(!0),[c,m]=(0,a.useState)(!1),[x,u]=(0,a.useState)(null),[h,f]=(0,a.useState)("create"),[p,g]=(0,a.useState)(""),[y,b]=(0,a.useState)(""),[j,v]=(0,a.useState)(""),[N,w]=(0,a.useState)("all");(0,a.useEffect)(()=>{let fetchFields=async()=>{try{if(o(!0),!e||!e.access_token){console.error("No access token available");return}let r=await (0,d.s4)(e.access_token);t(r||[])}catch(e){console.error("Error fetching form fields:",e),g("Failed to load form fields"),i.toast.error("Failed to load form fields")}finally{o(!1)}};fetchFields()},[e]),(0,a.useEffect)(()=>{if(p){let e=setTimeout(()=>g(""),3e3);return()=>clearTimeout(e)}},[p]),(0,a.useEffect)(()=>{if(y){let e=setTimeout(()=>b(""),3e3);return()=>clearTimeout(e)}},[y]);let openCreateModal=()=>{u(null),f("create"),m(!0)},openEditModal=e=>{u(e),f("edit"),m(!0)},handleDuplicateField=async s=>{try{if(!e||!e.access_token){console.error("No access token available");return}let{id:a,created_at:l,updated_at:i,...n}=s,o=r.length>0?Math.max(...r.map(e=>e.order)):0,c={...n,field_name:`${n.field_name}_copy`,field_label:`${n.field_label} (Copy)`,order:o+10},m=await (0,d.WP)(e.access_token,c);t([...r,m]),b("Field duplicated successfully")}catch(e){console.error("Error duplicating field:",e),g("Failed to duplicate field"),i.toast.error("Failed to duplicate field")}},handleSaveField=async s=>{try{if(!e||!e.access_token){console.error("No access token available");return}if("create"===h){let a=await (0,d.WP)(e.access_token,s);t([...r,a]),b("Field created successfully")}else{let a=await (0,d.kN)(e.access_token,x?.id,s);t(r.map(e=>e.id===a.id?a:e)),b("Field updated successfully")}m(!1)}catch(e){console.error("Error saving field:",e),g("create"===h?"Failed to create field":"Failed to update field"),i.toast.error("create"===h?"Failed to create field":"Failed to update field")}},handleDeleteField=async s=>{if(confirm("Are you sure you want to delete this field? This action cannot be undone."))try{if(!e||!e.access_token){console.error("No access token available");return}await (0,d.HG)(e.access_token,s),t(r.filter(e=>e.id!==s)),b("Field deleted successfully")}catch(e){console.error("Error deleting field:",e),g("Failed to delete field"),i.toast.error("Failed to delete field")}},handleToggleRequired=async s=>{try{if(!e||!e.access_token){console.error("No access token available");return}let a=await (0,d.bs)(e.access_token,s.id,!s.is_required);t(r.map(e=>e.id===s.id?a:e)),b(`Field ${a.is_required?"marked as required":"marked as optional"}`)}catch(e){console.error("Error toggling required field:",e),g("Failed to update field"),i.toast.error("Failed to update field")}},handleChangeOrder=async(s,a)=>{let l=[...r].sort((e,r)=>e.order-r.order),n=l.findIndex(e=>e.id===s.id),o="up"===a?n-1:n+1;if(o<0||o>=l.length)return;let c=l[o],m=s.order,x=c.order;try{if(!e||!e.access_token){console.error("No access token available");return}console.log("Updating field order:",{fieldId:s.id,currentOrder:m,targetOrder:x,currentOrderType:typeof m,targetOrderType:typeof x}),await (0,d.ow)(e.access_token,s.id,m,x),t(r.map(e=>e.id===s.id?{...e,order:x}:e.id===c.id?{...e,order:m}:e)),b("Field order updated")}catch(e){console.error("Error updating field order:",e),g("Failed to update field order"),i.toast.error("Failed to update field order")}},k=r.filter(e=>{let r=""===j||e.field_label.toLowerCase().includes(j.toLowerCase())||e.field_name.toLowerCase().includes(j.toLowerCase()),t="all"===N||e.field_type===N;return r&&t}),_=[...k].sort((e,r)=>e.order-r.order);return(0,s.jsxs)("div",{className:"space-y-6",children:[s.jsx(Header,{openCreateModal:openCreateModal,fieldCount:r.length}),y&&s.jsx(StatusMessage,{message:y,type:"success"}),p&&s.jsx(StatusMessage,{message:p,type:"error"}),s.jsx(HelpPanel,{}),s.jsx(SearchAndFilter,{searchTerm:j,setSearchTerm:v,filterType:N,setFilterType:w}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm divide-y divide-gray-200 min-h-[300px]",children:[s.jsx(FieldsListHeader,{fieldCount:_.length}),n?(0,s.jsxs)("div",{className:"flex justify-center items-center p-12",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"}),s.jsx("span",{className:"ml-3 text-sm text-gray-500",children:"Loading fields..."})]}):0===_.length?s.jsx(EmptyState,{hasFilters:""!==j||"all"!==N,openCreateModal:openCreateModal}):s.jsx("div",{className:"p-6 grid grid-cols-1 gap-4",children:_.map((e,r)=>s.jsx(FieldCard,{field:e,index:r,totalFields:_.length,onEdit:openEditModal,onDelete:handleDeleteField,onToggleRequired:handleToggleRequired,onChangeOrder:handleChangeOrder,onDuplicate:handleDuplicateField},e.id))})]}),c&&s.jsx(FieldFormModal,{isOpen:c,onClose:()=>m(!1),onSave:handleSaveField,field:x,mode:h})]})}},2391:(e,r,t)=>{"use strict";t.r(r),t.d(r,{$$typeof:()=>d,__esModule:()=>l,default:()=>n});var s=t(5153);let a=(0,s.createProxy)(String.raw`E:\bigdealegy\bigdealegy\frontend\src\app\admin\fields\page.tsx`),{__esModule:l,$$typeof:d}=a,i=a.default,n=i}};var r=require("../../../webpack-runtime.js");r.C(e);var __webpack_exec__=e=>r(r.s=e),t=r.X(0,[657,4043,2076,3500,1407,2070,549,5846,6677,5189],()=>__webpack_exec__(6377));module.exports=t})();