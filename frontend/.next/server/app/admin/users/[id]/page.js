(()=>{var e={};e.id=214,e.ids=[214],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},3552:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>o,pages:()=>m,routeModule:()=>u,tree:()=>d});var r=t(7096),a=t(6132),i=t(7284),n=t.n(i),l=t(2564),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);t.d(s,c);let d=["",{children:["admin",{children:["users",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,2336)),"E:\\bigdealegy\\bigdealegy\\frontend\\src\\app\\admin\\users\\[id]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,9862)),"E:\\bigdealegy\\bigdealegy\\frontend\\src\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,9851)),"E:\\bigdealegy\\bigdealegy\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9291,23)),"next/dist/client/components/not-found-error"]}],m=["E:\\bigdealegy\\bigdealegy\\frontend\\src\\app\\admin\\users\\[id]\\page.tsx"],o="/admin/users/[id]/page",x={require:t,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/users/[id]/page",pathname:"/admin/users/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},9048:(e,s,t)=>{Promise.resolve().then(t.bind(t,264))},264:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>UserDetail});var r=t(784),a=t(9885),i=t(647),n=t(5189),l=t(345),c=t(7114),d=t(3500);function UserHeader({user:e,formatDate:s,toggleUserActive:t,router:a}){return(0,r.jsxs)("div",{className:"p-6 sm:flex sm:items-center sm:justify-between",children:[(0,r.jsxs)("div",{className:"sm:flex sm:items-center",children:[r.jsx("div",{className:"mb-4 sm:mb-0 sm:mr-4 flex-shrink-0",children:e.profile_image?r.jsx("img",{className:"h-24 w-24 rounded-full object-cover",src:e.profile_image,alt:e.name}):r.jsx("div",{className:"h-24 w-24 rounded-full bg-primary/10 flex items-center justify-center",children:r.jsx(d.Xws,{className:"h-12 w-12 text-primary/30"})})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[e.name,r.jsx("span",{className:"ml-3",children:e.is_active?(0,r.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[r.jsx(d.l_A,{className:"mr-1 h-3 w-3"}),"Active"]}):(0,r.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[r.jsx(d.aHS,{className:"mr-1 h-3 w-3"}),"Inactive"]})})]}),(0,r.jsxs)("div",{className:"mt-1 text-sm text-gray-500 flex items-center",children:[r.jsx(d.SRX,{className:"mr-1 h-4 w-4"}),e.email]}),(0,r.jsxs)("div",{className:"mt-2 flex items-center",children:[(e=>{switch(e){case"admin":return r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:"Admin"});case"sales_ops":return r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Sales Operations"});case"customer":return r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Customer"});default:return r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:e})}})(e.role),(0,r.jsxs)("span",{className:"ml-2 text-sm text-gray-500",children:["Joined: ",s(e.created_at)]})]})]})]}),(0,r.jsxs)("div",{className:"mt-5 sm:mt-0 flex flex-col sm:flex-row gap-2",children:[(0,r.jsxs)("button",{onClick:()=>a.push(`/admin/users/${e.id}/edit`),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",children:[r.jsx(d.fmQ,{className:"mr-2 h-4 w-4 text-gray-500"}),"Edit User"]}),r.jsx("button",{onClick:t,className:`inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white ${e.is_active?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"} focus:outline-none focus:ring-2 focus:ring-offset-2 ${e.is_active?"focus:ring-red-500":"focus:ring-green-500"}`,children:e.is_active?(0,r.jsxs)(r.Fragment,{children:[r.jsx(d.kUi,{className:"mr-2 h-4 w-4"}),"Deactivate"]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx(d.D5B,{className:"mr-2 h-4 w-4"}),"Activate"]})})]})]})}function TabBar({activeTab:e,setActiveTab:s}){return r.jsx("div",{className:"border-t border-gray-200",children:(0,r.jsxs)("nav",{className:"-mb-px flex","aria-label":"Tabs",children:[r.jsx("button",{className:`${"profile"===e?"border-primary text-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} w-1/4 py-4 px-1 text-center border-b-2 font-medium text-sm`,onClick:()=>s("profile"),children:"Profile"}),r.jsx("button",{className:`${"activity"===e?"border-primary text-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} w-1/4 py-4 px-1 text-center border-b-2 font-medium text-sm`,onClick:()=>s("activity"),children:"Activity"}),r.jsx("button",{className:`${"properties"===e?"border-primary text-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} w-1/4 py-4 px-1 text-center border-b-2 font-medium text-sm`,onClick:()=>s("properties"),children:"Properties"}),r.jsx("button",{className:`${"requests"===e?"border-primary text-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} w-1/4 py-4 px-1 text-center border-b-2 font-medium text-sm`,onClick:()=>s("requests"),children:"Requests"})]})})}function ProfileTab({user:e,formatDate:s,updateUserRole:t,deleteUser:a}){return r.jsx("div",{className:"p-6",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"bg-white shadow overflow-hidden rounded-lg",children:[(0,r.jsxs)("div",{className:"px-4 py-5 sm:px-6 bg-gray-50",children:[r.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Basic Information"}),r.jsx("p",{className:"mt-1 max-w-2xl text-sm text-gray-500",children:"User details and information"})]}),r.jsx("div",{className:"border-t border-gray-200 px-4 py-5 sm:p-6",children:(0,r.jsxs)("dl",{className:"grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2",children:[(0,r.jsxs)("div",{className:"sm:col-span-1",children:[(0,r.jsxs)("dt",{className:"text-sm font-medium text-gray-500 flex items-center",children:[r.jsx(d.pPV,{className:"mr-1 h-4 w-4 text-gray-400"}),"Full Name"]}),r.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:e.name})]}),(0,r.jsxs)("div",{className:"sm:col-span-1",children:[(0,r.jsxs)("dt",{className:"text-sm font-medium text-gray-500 flex items-center",children:[r.jsx(d.dfI,{className:"mr-1 h-4 w-4 text-gray-400"}),"Role"]}),r.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:(0,r.jsxs)("select",{value:e.role,onChange:e=>t(e.target.value),className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary focus:border-primary sm:text-sm rounded-md",children:[r.jsx("option",{value:"customer",children:"Customer"}),r.jsx("option",{value:"sales_ops",children:"Sales Operations"}),r.jsx("option",{value:"admin",children:"Administrator"})]})})]}),(0,r.jsxs)("div",{className:"sm:col-span-1",children:[(0,r.jsxs)("dt",{className:"text-sm font-medium text-gray-500 flex items-center",children:[r.jsx(d.I7T,{className:"mr-1 h-4 w-4 text-gray-400"}),"Phone"]}),r.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:e.phone||"Not provided"})]}),(0,r.jsxs)("div",{className:"sm:col-span-1",children:[(0,r.jsxs)("dt",{className:"text-sm font-medium text-gray-500 flex items-center",children:[r.jsx(d.Nh4,{className:"mr-1 h-4 w-4 text-gray-400"}),"Address"]}),r.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:e.address||"Not provided"})]}),(0,r.jsxs)("div",{className:"sm:col-span-1",children:[(0,r.jsxs)("dt",{className:"text-sm font-medium text-gray-500 flex items-center",children:[r.jsx(d.IiJ,{className:"mr-1 h-4 w-4 text-gray-400"}),"Account Created"]}),r.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:s(e.created_at)})]}),(0,r.jsxs)("div",{className:"sm:col-span-1",children:[(0,r.jsxs)("dt",{className:"text-sm font-medium text-gray-500 flex items-center",children:[r.jsx(d.IiJ,{className:"mr-1 h-4 w-4 text-gray-400"}),"Last Login"]}),r.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:e.last_login?s(e.last_login):"Never"})]}),(0,r.jsxs)("div",{className:"sm:col-span-2",children:[r.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Bio"}),r.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:e.bio||"No bio information provided."})]})]})})]}),(0,r.jsxs)("div",{className:"bg-white shadow overflow-hidden rounded-lg",children:[(0,r.jsxs)("div",{className:"px-4 py-5 sm:px-6 bg-gray-50",children:[r.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Account Management"}),r.jsx("p",{className:"mt-1 max-w-2xl text-sm text-gray-500",children:"Manage user account and access"})]}),r.jsx("div",{className:"border-t border-gray-200 px-4 py-5 sm:p-6",children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"rounded-lg bg-white p-6 shadow-sm border border-gray-200",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Account Status"}),r.jsx("div",{className:"mt-4 space-y-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:["Account is ",e.is_active?"Active":"Inactive"]}),r.jsx("p",{className:"text-sm text-gray-500",children:e.is_active?"User can log in and access the platform.":"User cannot log in or access the platform."})]}),r.jsx("div",{children:r.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${e.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:e.is_active?"Active":"Inactive"})})]})})]}),(0,r.jsxs)("div",{className:"rounded-lg bg-red-50 p-6 shadow-sm border border-red-200",children:[r.jsx("h3",{className:"text-lg font-medium text-red-900",children:"Danger Zone"}),r.jsx("div",{className:"mt-4 space-y-4",children:(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-red-700",children:"Permanently delete this user and all associated data. This action cannot be undone."}),r.jsx("div",{className:"mt-4",children:r.jsx("button",{type:"button",onClick:a,className:"inline-flex items-center justify-center px-4 py-2 border border-transparent font-medium rounded-md text-red-700 bg-red-100 hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:text-sm",children:"Delete User Account"})})]})})]})]})})]})]})})}function ActivityTab({activity:e,formatDate:s,noDataMessage:t="This user has no recorded activity"}){let getActivityIcon=e=>{switch(e){case"view":return r.jsx(d.dSq,{className:"h-5 w-5 text-blue-500"});case"save":return r.jsx(d.xng,{className:"h-5 w-5 text-green-500"});case"favorite":return r.jsx(d.$0H,{className:"h-5 w-5 text-red-500"});case"message":return r.jsx(d.diV,{className:"h-5 w-5 text-purple-500"});case"login":return r.jsx(d.kUi,{className:"h-5 w-5 text-green-500"});default:return r.jsx(d.ceS,{className:"h-5 w-5 text-gray-500"})}},getActivityDescription=e=>{switch(e.activity_type){case"view":return"Viewed a property";case"save":return"Saved a property";case"favorite":return"Favorited a property";case"message":return"Sent a message";case"login":return"Logged in";case"request":return"Submitted a property request";case"viewing":return"Scheduled a property viewing";default:return e.description||"Performed an action"}};return(0,r.jsxs)("div",{className:"bg-white p-6",children:[r.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-6",children:"Recent Activity"}),0===e.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx("div",{className:"text-gray-400 text-4xl mb-4",children:"\uD83D\uDCCA"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No activity yet"}),r.jsx("p",{className:"text-gray-500 text-sm",children:t})]}):r.jsx("div",{className:"flow-root",children:r.jsx("ul",{className:"-mb-8",children:e.map((t,a)=>r.jsx("li",{children:(0,r.jsxs)("div",{className:"relative pb-8",children:[a!==e.length-1?r.jsx("span",{className:"absolute top-5 left-5 -ml-px h-full w-0.5 bg-gray-200","aria-hidden":"true"}):null,(0,r.jsxs)("div",{className:"relative flex items-start space-x-3",children:[r.jsx("div",{className:"relative",children:r.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-100 flex items-center justify-center ring-8 ring-white",children:getActivityIcon(t.activity_type)})}),r.jsx("div",{className:"min-w-0 flex-1",children:(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-sm",children:r.jsx("span",{className:"font-medium text-gray-900",children:getActivityDescription(t)})}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:t.details||(t.property_id?`Property ID: ${t.property_id}`:"")}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:s(t.created_at)})]})})]})]})},t.id))})})]})}function PropertiesTab({properties:e,formatPrice:s,noDataMessage:t="This user hasn't saved any properties yet"}){return(0,r.jsxs)("div",{className:"bg-white p-6",children:[r.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-6",children:"Saved Properties"}),0===e.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx("div",{className:"text-gray-400 text-4xl mb-4",children:"\uD83C\uDFE0"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No saved properties"}),r.jsx("p",{className:"text-gray-500 text-sm",children:t})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.map(e=>{let t=e.properties;return(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-all",children:[(0,r.jsxs)("div",{className:"aspect-w-16 aspect-h-9 bg-gray-200 relative",children:[r.jsx("img",{src:t.featured_image||"https://via.placeholder.com/800x450?text=No+Image",alt:t.title,className:"w-full h-44 object-cover"}),e.is_favorite&&r.jsx("div",{className:"absolute top-2 right-2",children:r.jsx("div",{className:"p-1 bg-white rounded-full shadow-sm",children:r.jsx(d.$0H,{className:"h-4 w-4 text-red-500"})})}),r.jsx("div",{className:"absolute bottom-2 left-2",children:r.jsx("span",{className:"inline-block bg-gray-800 bg-opacity-75 text-white px-2 py-1 text-xs rounded-md",children:t.property_type})})]}),(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 line-clamp-1",children:t.title}),r.jsx("p",{className:"text-lg font-bold text-primary",children:s(t.price)})]}),(0,r.jsxs)("p",{className:"mt-1 text-sm text-gray-500 flex items-center",children:[r.jsx(d.Nh4,{className:"mr-1 text-gray-400"}),t.location]}),(0,r.jsxs)("div",{className:"mt-4 flex items-center justify-between text-sm text-gray-500",children:[t.bedrooms&&(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(d.f0S,{className:"mr-1"}),(0,r.jsxs)("span",{children:[t.bedrooms," beds"]})]}),t.bathrooms&&(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(d.MvV,{className:"mr-1"}),(0,r.jsxs)("span",{children:[t.bathrooms," baths"]})]}),t.area_size&&(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(d.BxQ,{className:"mr-1"}),(0,r.jsxs)("span",{children:[t.area_size," m\xb2"]})]})]})]}),r.jsx("div",{className:"border-t border-gray-200 bg-gray-50 px-4 py-3 sm:px-6",children:(0,r.jsxs)("a",{href:`/properties/${t.id}`,className:"inline-flex items-center px-3 py-1 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",children:[r.jsx(d.dSq,{className:"mr-2 h-4 w-4"}),"View Property"]})})]},e.id)})})]})}function RequestsTab({requests:e,formatPrice:s,formatDate:t,noDataMessage:a="This user hasn't submitted any property requests yet"}){let getStatusBadge=e=>{switch(e){case"pending":return(0,r.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[r.jsx(d.DdE,{className:"mr-1 h-3 w-3"}),"Pending"]});case"active":return(0,r.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[r.jsx(d.FJM,{className:"mr-1 h-3 w-3"}),"Active"]});case"completed":return(0,r.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[r.jsx(d.FJM,{className:"mr-1 h-3 w-3"}),"Completed"]});case"cancelled":return(0,r.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[r.jsx(d.G5m,{className:"mr-1 h-3 w-3"}),"Cancelled"]});default:return r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:e})}};return(0,r.jsxs)("div",{className:"bg-white p-6",children:[r.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-6",children:"Property Requests"}),0===e.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx("div",{className:"text-gray-400 text-4xl mb-4",children:"\uD83D\uDCCB"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No property requests"}),r.jsx("p",{className:"text-gray-500 text-sm",children:a})]}):r.jsx("div",{className:"space-y-6",children:e.map(e=>(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden shadow-sm p-6",children:[(0,r.jsxs)("div",{className:"sm:flex sm:items-center sm:justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:e.title||`Property Request #${e.id.slice(0,8)}`}),(0,r.jsxs)("div",{className:"mt-1 flex items-center text-sm text-gray-500",children:[r.jsx(d.Nh4,{className:"mr-1 h-4 w-4 text-gray-400"}),e.location]})]}),r.jsx("div",{className:"mt-4 sm:mt-0",children:getStatusBadge(e.status)})]}),r.jsx("div",{className:"mt-6 border-t border-gray-200 pt-4",children:(0,r.jsxs)("dl",{className:"grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-3",children:[(0,r.jsxs)("div",{className:"sm:col-span-1",children:[(0,r.jsxs)("dt",{className:"text-sm font-medium text-gray-500 flex items-center",children:[r.jsx(d.l80,{className:"mr-1 h-4 w-4 text-gray-400"}),"Price Range"]}),(0,r.jsxs)("dd",{className:"mt-1 text-sm text-gray-900",children:[s(e.min_price)," - ",s(e.max_price)]})]}),(0,r.jsxs)("div",{className:"sm:col-span-1",children:[(0,r.jsxs)("dt",{className:"text-sm font-medium text-gray-500 flex items-center",children:[r.jsx(d.f0S,{className:"mr-1 h-4 w-4 text-gray-400"}),"Bedrooms"]}),r.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:e.bedrooms})]}),(0,r.jsxs)("div",{className:"sm:col-span-1",children:[(0,r.jsxs)("dt",{className:"text-sm font-medium text-gray-500 flex items-center",children:[r.jsx(d.MvV,{className:"mr-1 h-4 w-4 text-gray-400"}),"Bathrooms"]}),r.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:e.bathrooms})]}),(0,r.jsxs)("div",{className:"sm:col-span-1",children:[(0,r.jsxs)("dt",{className:"text-sm font-medium text-gray-500 flex items-center",children:[r.jsx(d.BxQ,{className:"mr-1 h-4 w-4 text-gray-400"}),"Area Size"]}),(0,r.jsxs)("dd",{className:"mt-1 text-sm text-gray-900",children:[e.area_size," m\xb2"]})]}),(0,r.jsxs)("div",{className:"sm:col-span-1",children:[r.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Property Type"}),r.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:e.property_type})]}),(0,r.jsxs)("div",{className:"sm:col-span-1",children:[r.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Submitted On"}),r.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:t(e.created_at)})]})]})}),r.jsx("div",{className:"mt-6 flex justify-end",children:r.jsx("a",{href:`/sales-ops/requests/${e.id}`,className:"inline-flex items-center px-3 py-1 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",children:"View Details"})})]},e.id))})]})}function UserDetail({params:e}){let{id:s}=e,{session:t}=(0,i.a)(),m=(0,c.useRouter)(),[o,x]=(0,a.useState)(null),[u,h]=(0,a.useState)(!0),[g,p]=(0,a.useState)([]),[y,f]=(0,a.useState)([]),[j,N]=(0,a.useState)([]),[b,v]=(0,a.useState)("profile");(0,a.useEffect)(()=>{let fetchUserData=async()=>{try{if(h(!0),!t||!t.access_token){console.error("No access token available");return}let e=await (0,n.GA)(t.access_token,s);x(e.user),p(e.activity||[]),f(e.properties||[]),N(e.requests||[]),h(!1)}catch(e){console.error("Error fetching user data:",e),l.toast.error("Failed to load user data"),h(!1),m.push("/admin/users")}};fetchUserData()},[s,m,t]);let formatDate=e=>e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",formatPrice=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"EGP",maximumFractionDigits:0}).format(e),toggleUserActive=async()=>{if(o&&window.confirm(`Are you sure you want to ${o.is_active?"deactivate":"activate"} this user?`))try{if(!t||!t.access_token){console.error("No access token available");return}let e=await (0,n.VC)(t.access_token,o.id,!o.is_active);x(e.user),l.toast.success(`User ${o.is_active?"deactivated":"activated"} successfully`)}catch(e){console.error("Error updating user status:",e),l.toast.error("Failed to update user status")}},updateUserRoleHandler=async e=>{if(o&&window.confirm(`Are you sure you want to change this user's role to ${e}?`))try{if(!t||!t.access_token){console.error("No access token available");return}let s=await (0,n.c7)(t.access_token,o.id,e);x(s.user),l.toast.success(`User role updated to ${e}`)}catch(e){console.error("Error updating user role:",e),l.toast.error("Failed to update user role")}},deleteUserHandler=async()=>{if(o&&window.confirm("Are you sure you want to delete this user? This action cannot be undone."))try{if(!t||!t.access_token){console.error("No access token available");return}await (0,n.h8)(t.access_token,o.id),l.toast.success("User deleted successfully"),m.push("/admin/users")}catch(e){console.error("Error deleting user:",e),l.toast.error("Failed to delete user")}};return u?r.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gray-50",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):o?r.jsx("div",{className:"min-h-screen bg-gray-50",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:[r.jsx("div",{className:"mb-6",children:(0,r.jsxs)("button",{onClick:()=>m.push("/admin/users"),className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700",children:[r.jsx(d.x_l,{className:"mr-2 h-4 w-4"}),"Back to Users"]})}),(0,r.jsxs)("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg mb-6",children:[r.jsx(UserHeader,{user:o,formatDate:formatDate,toggleUserActive:toggleUserActive,router:m}),r.jsx(TabBar,{activeTab:b,setActiveTab:v})]}),r.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:(()=>{switch(b){case"profile":default:return r.jsx(ProfileTab,{user:o,formatDate:formatDate,updateUserRole:updateUserRoleHandler,deleteUser:deleteUserHandler});case"activity":return r.jsx(ActivityTab,{activity:g.length>0?g:[{id:"no-data",type:"info",title:"No activity data available",description:"User has no recorded activity or the activity tracking system is not configured.",timestamp:formatDate(new Date().toISOString())}],formatDate:formatDate});case"properties":return r.jsx(PropertiesTab,{properties:y.length>0?y:[],formatPrice:formatPrice,noDataMessage:"No saved properties found."});case"requests":return r.jsx(RequestsTab,{requests:j.length>0?j:[],formatPrice:formatPrice,formatDate:formatDate,noDataMessage:"No property requests found."})}})()})]})}):(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-50",children:[r.jsx("div",{className:"text-gray-400 text-4xl mb-4",children:"\uD83D\uDC64"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"User not found"}),r.jsx("p",{className:"text-gray-500 text-sm mb-4",children:"The user you're looking for doesn't exist or has been deleted"}),(0,r.jsxs)("button",{onClick:()=>m.push("/admin/users"),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",children:[r.jsx(d.x_l,{className:"mr-2 h-4 w-4"}),"Back to Users"]})]})}},2336:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>n,__esModule:()=>i,default:()=>c});var r=t(5153);let a=(0,r.createProxy)(String.raw`E:\bigdealegy\bigdealegy\frontend\src\app\admin\users\[id]\page.tsx`),{__esModule:i,$$typeof:n}=a,l=a.default,c=l}};var s=require("../../../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),t=s.X(0,[657,4043,2076,3500,1407,2070,549,5846,6677,5189],()=>__webpack_exec__(3552));module.exports=t})();